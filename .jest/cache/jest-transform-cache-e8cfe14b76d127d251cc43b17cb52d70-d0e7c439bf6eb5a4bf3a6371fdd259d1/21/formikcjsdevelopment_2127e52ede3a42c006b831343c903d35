f13e85cce917bbd677b6947a4ff99637
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

function _interopDefault(ex) {
  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;
}

var tslib_1 = require('tslib');

var React = require('react');

var isEqual = _interopDefault(require('react-fast-compare'));

var deepmerge = _interopDefault(require('deepmerge'));

var hoistNonReactStatics = _interopDefault(require('hoist-non-react-statics'));

var createContext = _interopDefault(require('create-react-context'));

var warning = _interopDefault(require('tiny-warning'));

var clone = _interopDefault(require('lodash/clone'));

var toPath = _interopDefault(require('lodash/toPath'));

var cloneDeep = _interopDefault(require('lodash/cloneDeep'));

var _a;

var FormikProvider = (_a = createContext({}), _a.Provider),
    FormikConsumer = _a.Consumer;

function connect(Comp) {
  var C = function C(props) {
    return React.createElement(FormikConsumer, null, function (formik) {
      return React.createElement(Comp, tslib_1.__assign({}, props, {
        formik: formik
      }));
    });
  };

  var componentDisplayName = Comp.displayName || Comp.name || Comp.constructor && Comp.constructor.name || 'Component';
  C.WrappedComponent = Comp;
  C.displayName = "FormikConnect(" + componentDisplayName + ")";
  return hoistNonReactStatics(C, Comp);
}

var isFunction = function isFunction(obj) {
  return typeof obj === 'function';
};

var isObject = function isObject(obj) {
  return obj !== null && typeof obj === 'object';
};

var isInteger = function isInteger(obj) {
  return String(Math.floor(Number(obj))) === obj;
};

var isString = function isString(obj) {
  return Object.prototype.toString.call(obj) === '[object String]';
};

var isNaN = function isNaN(obj) {
  return obj !== obj;
};

var isEmptyChildren = function isEmptyChildren(children) {
  return React.Children.count(children) === 0;
};

var isPromise = function isPromise(value) {
  return isObject(value) && isFunction(value.then);
};

var isInputEvent = function isInputEvent(value) {
  return value && isObject(value) && isObject(value.target);
};

function getActiveElement(doc) {
  doc = doc || (typeof document !== 'undefined' ? document : undefined);

  if (typeof doc === 'undefined') {
    return null;
  }

  try {
    return doc.activeElement || doc.body;
  } catch (e) {
    return doc.body;
  }
}

function makeCancelable(promise) {
  var hasCanceled = false;
  var wrappedPromise = new Promise(function (resolve, reject) {
    promise.then(function (val) {
      return hasCanceled ? reject({
        isCanceled: true
      }) : resolve(val);
    }, function (error) {
      return hasCanceled ? reject({
        isCanceled: true
      }) : reject(error);
    });
  });
  return [wrappedPromise, function cancel() {
    hasCanceled = true;
  }];
}

function getIn(obj, key, def, p) {
  if (p === void 0) {
    p = 0;
  }

  var path = toPath(key);

  while (obj && p < path.length) {
    obj = obj[path[p++]];
  }

  return obj === undefined ? def : obj;
}

function setIn(obj, path, value) {
  var res = clone(obj);
  var resVal = res;
  var i = 0;
  var pathArray = toPath(path);

  for (; i < pathArray.length - 1; i++) {
    var currentPath = pathArray[i];
    var currentObj = getIn(obj, pathArray.slice(0, i + 1));

    if (currentObj) {
      resVal = resVal[currentPath] = clone(currentObj);
    } else {
      var nextPath = pathArray[i + 1];
      resVal = resVal[currentPath] = isInteger(nextPath) && Number(nextPath) >= 0 ? [] : {};
    }
  }

  if ((i === 0 ? obj : resVal)[pathArray[i]] === value) {
    return obj;
  }

  if (value === undefined) {
    delete resVal[pathArray[i]];
  } else {
    resVal[pathArray[i]] = value;
  }

  if (i === 0 && value === undefined) {
    delete res[pathArray[i]];
  }

  return res;
}

function setNestedObjectValues(object, value, visited, response) {
  if (visited === void 0) {
    visited = new WeakMap();
  }

  if (response === void 0) {
    response = {};
  }

  for (var _i = 0, _a = Object.keys(object); _i < _a.length; _i++) {
    var k = _a[_i];
    var val = object[k];

    if (isObject(val)) {
      if (!visited.get(val)) {
        visited.set(val, true);
        response[k] = Array.isArray(val) ? [] : {};
        setNestedObjectValues(val, value, visited, response[k]);
      }
    } else {
      response[k] = value;
    }
  }

  return response;
}

var Formik = function (_super) {
  tslib_1.__extends(Formik, _super);

  function Formik(props) {
    var _this = _super.call(this, props) || this;

    _this.hcCache = {};
    _this.hbCache = {};

    _this.registerField = function (name, Comp) {
      _this.fields[name] = Comp;
    };

    _this.unregisterField = function (name) {
      delete _this.fields[name];
    };

    _this.setErrors = function (errors) {
      _this.setState({
        errors: errors
      });
    };

    _this.setTouched = function (touched) {
      _this.setState({
        touched: touched
      }, function () {
        if (_this.props.validateOnBlur) {
          _this.runValidations(_this.state.values);
        }
      });
    };

    _this.setValues = function (values) {
      _this.setState({
        values: values
      }, function () {
        if (_this.props.validateOnChange) {
          _this.runValidations(values);
        }
      });
    };

    _this.setStatus = function (status) {
      _this.setState({
        status: status
      });
    };

    _this.setError = function (error) {
      {
        console.warn("Warning: Formik's setError(error) is deprecated and may be removed in future releases. Please use Formik's setStatus(status) instead. It works identically. For more info see https://github.com/jaredpalmer/formik#setstatus-status-any--void");
      }

      _this.setState({
        error: error
      });
    };

    _this.setSubmitting = function (isSubmitting) {
      if (_this.didMount) {
        _this.setState({
          isSubmitting: isSubmitting
        });
      }
    };

    _this.validateField = function (field) {
      _this.setState({
        isValidating: true
      });

      return _this.runSingleFieldLevelValidation(field, getIn(_this.state.values, field)).then(function (error) {
        if (_this.didMount) {
          _this.setState({
            errors: setIn(_this.state.errors, field, error),
            isValidating: false
          });
        }

        return error;
      });
    };

    _this.runSingleFieldLevelValidation = function (field, value) {
      return new Promise(function (resolve) {
        return resolve(_this.fields[field].props.validate(value));
      }).then(function (x) {
        return x;
      }, function (e) {
        return e;
      });
    };

    _this.runValidationSchema = function (values) {
      return new Promise(function (resolve) {
        var validationSchema = _this.props.validationSchema;
        var schema = isFunction(validationSchema) ? validationSchema() : validationSchema;
        validateYupSchema(values, schema).then(function () {
          resolve({});
        }, function (err) {
          resolve(yupToFormErrors(err));
        });
      });
    };

    _this.runValidations = function (values) {
      if (values === void 0) {
        values = _this.state.values;
      }

      if (_this.validator) {
        _this.validator();
      }

      var _a = makeCancelable(Promise.all([_this.runFieldLevelValidations(values), _this.props.validationSchema ? _this.runValidationSchema(values) : {}, _this.props.validate ? _this.runValidateHandler(values) : {}]).then(function (_a) {
        var fieldErrors = _a[0],
            schemaErrors = _a[1],
            handlerErrors = _a[2];
        return deepmerge.all([fieldErrors, schemaErrors, handlerErrors], {
          arrayMerge: arrayMerge
        });
      })),
          promise = _a[0],
          cancel = _a[1];

      _this.validator = cancel;
      return promise.then(function (errors) {
        if (_this.didMount) {
          _this.setState(function (prevState) {
            if (!isEqual(prevState.errors, errors)) {
              return {
                errors: errors
              };
            }

            return null;
          });
        }

        return errors;
      }).catch(function (x) {
        return x;
      });
    };

    _this.handleChange = function (eventOrPath) {
      var executeChange = function executeChange(eventOrValue, maybePath) {
        var field = maybePath;
        var value;

        if (isInputEvent(eventOrValue)) {
          var event_1 = eventOrValue;

          if (event_1.persist) {
            event_1.persist();
          }

          var _a = event_1.target,
              type = _a.type,
              name_1 = _a.name,
              id = _a.id,
              checked = _a.checked,
              outerHTML = _a.outerHTML;
          field = maybePath ? maybePath : name_1 ? name_1 : id;

          if (!field && "development" !== 'production') {
            warnAboutMissingIdentifier({
              htmlContent: outerHTML,
              documentationAnchorLink: 'handlechange-e-reactchangeeventany--void',
              handlerName: 'handleChange'
            });
          }

          value = event_1.target.value;

          if (/number|range/.test(type)) {
            var parsed = parseFloat(event_1.target.value);
            value = isNaN(parsed) ? '' : parsed;
          }

          if (/checkbox/.test(type)) {
            value = checked;
          }
        } else {
          value = eventOrValue;
        }

        if (field) {
          _this.setState(function (prevState) {
            return tslib_1.__assign({}, prevState, {
              values: setIn(prevState.values, field, value)
            });
          }, function () {
            if (_this.props.validateOnChange) {
              _this.runValidations(setIn(_this.state.values, field, value));
            }
          });
        }
      };

      if (isString(eventOrPath)) {
        var path_1 = eventOrPath;

        if (!isFunction(_this.hcCache[path_1])) {
          _this.hcCache[path_1] = function (eventOrValue) {
            return executeChange(eventOrValue, path_1);
          };
        }

        return _this.hcCache[path_1];
      } else {
        var event_2 = eventOrPath;
        executeChange(event_2);
      }
    };

    _this.setFieldValue = function (field, value, shouldValidate) {
      if (shouldValidate === void 0) {
        shouldValidate = true;
      }

      if (_this.didMount) {
        _this.setState(function (prevState) {
          return tslib_1.__assign({}, prevState, {
            values: setIn(prevState.values, field, value)
          });
        }, function () {
          if (_this.props.validateOnChange && shouldValidate) {
            _this.runValidations(_this.state.values);
          }
        });
      }
    };

    _this.handleSubmit = function (e) {
      if (e && e.preventDefault) {
        e.preventDefault();
      }

      if (typeof document !== 'undefined') {
        var activeElement = getActiveElement();

        if (activeElement !== null && activeElement instanceof HTMLButtonElement) {
          warning(!!(activeElement.attributes && activeElement.attributes.getNamedItem('type')), 'You submitted a Formik form using a button with an unspecified `type` attribute.  Most browsers default button elements to `type="submit"`. If this is not a submit button, please add `type="button"`.');
        }
      }

      _this.submitForm();
    };

    _this.submitForm = function () {
      _this.setState(function (prevState) {
        return {
          touched: setNestedObjectValues(prevState.values, true),
          isSubmitting: true,
          isValidating: true,
          submitCount: prevState.submitCount + 1
        };
      });

      return _this.runValidations(_this.state.values).then(function (combinedErrors) {
        if (_this.didMount) {
          _this.setState({
            isValidating: false
          });
        }

        var isValid = Object.keys(combinedErrors).length === 0;

        if (isValid) {
          _this.executeSubmit();
        } else if (_this.didMount) {
          _this.setState({
            isSubmitting: false
          });
        }
      });
    };

    _this.executeSubmit = function () {
      _this.props.onSubmit(_this.state.values, _this.getFormikActions());
    };

    _this.handleBlur = function (eventOrPath) {
      var executeBlur = function executeBlur(maybeEvent, maybePath) {
        var field = maybePath;

        if (isInputEvent(maybeEvent)) {
          var event_3 = maybeEvent;

          if (event_3.persist) {
            event_3.persist();
          }

          var _a = event_3.target,
              name_2 = _a.name,
              id = _a.id,
              outerHTML = _a.outerHTML;
          field = name_2 ? name_2 : id;

          if (!field && "development" !== 'production') {
            warnAboutMissingIdentifier({
              htmlContent: outerHTML,
              documentationAnchorLink: 'handleblur-e-reactfocuseventany--void',
              handlerName: 'handleBlur'
            });
          }
        }

        _this.setState(function (prevState) {
          return {
            touched: setIn(prevState.touched, field, true)
          };
        });

        if (_this.props.validateOnBlur) {
          _this.runValidations(_this.state.values);
        }
      };

      if (isString(eventOrPath)) {
        var path_2 = eventOrPath;

        if (!isFunction(_this.hbCache[path_2])) {
          _this.hbCache[path_2] = function (event) {
            return executeBlur(event, path_2);
          };
        }

        return _this.hbCache[path_2];
      } else {
        var event_4 = eventOrPath;
        executeBlur(event_4);
      }
    };

    _this.setFieldTouched = function (field, touched, shouldValidate) {
      if (touched === void 0) {
        touched = true;
      }

      if (shouldValidate === void 0) {
        shouldValidate = true;
      }

      _this.setState(function (prevState) {
        return tslib_1.__assign({}, prevState, {
          touched: setIn(prevState.touched, field, touched)
        });
      }, function () {
        if (_this.props.validateOnBlur && shouldValidate) {
          _this.runValidations(_this.state.values);
        }
      });
    };

    _this.setFieldError = function (field, message) {
      _this.setState(function (prevState) {
        return tslib_1.__assign({}, prevState, {
          errors: setIn(prevState.errors, field, message)
        });
      });
    };

    _this.resetForm = function (nextValues) {
      var values = nextValues ? nextValues : _this.props.initialValues;
      _this.initialValues = values;

      _this.setState({
        isSubmitting: false,
        isValidating: false,
        errors: {},
        touched: {},
        error: undefined,
        status: _this.props.initialStatus,
        values: values,
        submitCount: 0
      });
    };

    _this.handleReset = function () {
      if (_this.props.onReset) {
        var maybePromisedOnReset = _this.props.onReset(_this.state.values, _this.getFormikActions());

        if (isPromise(maybePromisedOnReset)) {
          maybePromisedOnReset.then(_this.resetForm);
        } else {
          _this.resetForm();
        }
      } else {
        _this.resetForm();
      }
    };

    _this.setFormikState = function (s, callback) {
      return _this.setState(s, callback);
    };

    _this.validateForm = function (values) {
      _this.setState({
        isValidating: true
      });

      return _this.runValidations(values).then(function (errors) {
        if (_this.didMount) {
          _this.setState({
            isValidating: false
          });
        }

        return errors;
      });
    };

    _this.getFormikActions = function () {
      return {
        resetForm: _this.resetForm,
        submitForm: _this.submitForm,
        validateForm: _this.validateForm,
        validateField: _this.validateField,
        setError: _this.setError,
        setErrors: _this.setErrors,
        setFieldError: _this.setFieldError,
        setFieldTouched: _this.setFieldTouched,
        setFieldValue: _this.setFieldValue,
        setStatus: _this.setStatus,
        setSubmitting: _this.setSubmitting,
        setTouched: _this.setTouched,
        setValues: _this.setValues,
        setFormikState: _this.setFormikState
      };
    };

    _this.getFormikComputedProps = function () {
      var isInitialValid = _this.props.isInitialValid;
      var dirty = !isEqual(_this.initialValues, _this.state.values);
      return {
        dirty: dirty,
        isValid: dirty ? _this.state.errors && Object.keys(_this.state.errors).length === 0 : isInitialValid !== false && isFunction(isInitialValid) ? isInitialValid(_this.props) : isInitialValid,
        initialValues: _this.initialValues
      };
    };

    _this.getFormikBag = function () {
      return tslib_1.__assign({}, _this.state, _this.getFormikActions(), _this.getFormikComputedProps(), {
        registerField: _this.registerField,
        unregisterField: _this.unregisterField,
        handleBlur: _this.handleBlur,
        handleChange: _this.handleChange,
        handleReset: _this.handleReset,
        handleSubmit: _this.handleSubmit,
        validateOnChange: _this.props.validateOnChange,
        validateOnBlur: _this.props.validateOnBlur
      });
    };

    _this.getFormikContext = function () {
      return tslib_1.__assign({}, _this.getFormikBag(), {
        validationSchema: _this.props.validationSchema,
        validate: _this.props.validate,
        initialValues: _this.initialValues
      });
    };

    _this.state = {
      values: props.initialValues || {},
      errors: {},
      touched: {},
      isSubmitting: false,
      isValidating: false,
      submitCount: 0,
      status: props.initialStatus
    };
    _this.didMount = false;
    _this.fields = {};
    _this.initialValues = props.initialValues || {};
    warning(!(props.component && props.render), 'You should not use <Formik component> and <Formik render> in the same <Formik> component; <Formik render> will be ignored');
    warning(!(props.component && props.children && !isEmptyChildren(props.children)), 'You should not use <Formik component> and <Formik children> in the same <Formik> component; <Formik children> will be ignored');
    warning(!(props.render && props.children && !isEmptyChildren(props.children)), 'You should not use <Formik render> and <Formik children> in the same <Formik> component; <Formik children> will be ignored');
    return _this;
  }

  Formik.prototype.componentDidMount = function () {
    this.didMount = true;
  };

  Formik.prototype.componentWillUnmount = function () {
    this.didMount = false;

    if (this.validator) {
      this.validator();
    }
  };

  Formik.prototype.componentDidUpdate = function (prevProps) {
    if (this.props.enableReinitialize && !isEqual(prevProps.initialValues, this.props.initialValues)) {
      this.initialValues = this.props.initialValues;
      this.resetForm(this.props.initialValues);
    }
  };

  Formik.prototype.runFieldLevelValidations = function (values) {
    var _this = this;

    var fieldKeysWithValidation = Object.keys(this.fields).filter(function (f) {
      return _this.fields && _this.fields[f] && _this.fields[f].props.validate && isFunction(_this.fields[f].props.validate);
    });
    var fieldValidations = fieldKeysWithValidation.length > 0 ? fieldKeysWithValidation.map(function (f) {
      return _this.runSingleFieldLevelValidation(f, getIn(values, f));
    }) : [Promise.resolve('DO_NOT_DELETE_YOU_WILL_BE_FIRED')];
    return Promise.all(fieldValidations).then(function (fieldErrorsList) {
      return fieldErrorsList.reduce(function (prev, curr, index) {
        if (curr === 'DO_NOT_DELETE_YOU_WILL_BE_FIRED') {
          return prev;
        }

        if (!!curr) {
          prev = setIn(prev, fieldKeysWithValidation[index], curr);
        }

        return prev;
      }, {});
    });
  };

  Formik.prototype.runValidateHandler = function (values) {
    var _this = this;

    return new Promise(function (resolve) {
      var maybePromisedErrors = _this.props.validate(values);

      if (maybePromisedErrors === undefined) {
        resolve({});
      } else if (isPromise(maybePromisedErrors)) {
        maybePromisedErrors.then(function () {
          resolve({});
        }, function (errors) {
          resolve(errors);
        });
      } else {
        resolve(maybePromisedErrors);
      }
    });
  };

  Formik.prototype.render = function () {
    var _a = this.props,
        component = _a.component,
        render = _a.render,
        children = _a.children;
    var props = this.getFormikBag();
    var ctx = this.getFormikContext();
    return React.createElement(FormikProvider, {
      value: ctx
    }, component ? React.createElement(component, props) : render ? render(props) : children ? isFunction(children) ? children(props) : !isEmptyChildren(children) ? React.Children.only(children) : null : null);
  };

  Formik.defaultProps = {
    validateOnChange: true,
    validateOnBlur: true,
    isInitialValid: false,
    enableReinitialize: false
  };
  return Formik;
}(React.Component);

function warnAboutMissingIdentifier(_a) {
  var htmlContent = _a.htmlContent,
      documentationAnchorLink = _a.documentationAnchorLink,
      handlerName = _a.handlerName;
  console.warn("Warning: Formik called `" + handlerName + "`, but you forgot to pass an `id` or `name` attribute to your input:\n\n    " + htmlContent + "\n\n    Formik cannot determine which value to update. For more info see https://github.com/jaredpalmer/formik#" + documentationAnchorLink + "\n  ");
}

function yupToFormErrors(yupError) {
  var errors = {};

  if (yupError.inner.length === 0) {
    return setIn(errors, yupError.path, yupError.message);
  }

  for (var _i = 0, _a = yupError.inner; _i < _a.length; _i++) {
    var err = _a[_i];

    if (!errors[err.path]) {
      errors = setIn(errors, err.path, err.message);
    }
  }

  return errors;
}

function validateYupSchema(values, schema, sync, context) {
  if (sync === void 0) {
    sync = false;
  }

  if (context === void 0) {
    context = {};
  }

  var validateData = {};

  for (var k in values) {
    if (values.hasOwnProperty(k)) {
      var key = String(k);
      validateData[key] = values[key] !== '' ? values[key] : undefined;
    }
  }

  return schema[sync ? 'validateSync' : 'validate'](validateData, {
    abortEarly: false,
    context: context
  });
}

function arrayMerge(target, source, options) {
  var destination = target.slice();
  source.forEach(function (e, i) {
    if (typeof destination[i] === 'undefined') {
      var cloneRequested = options.clone !== false;
      var shouldClone = cloneRequested && options.isMergeableObject(e);
      destination[i] = shouldClone ? deepmerge(Array.isArray(e) ? [] : {}, e, options) : e;
    } else if (options.isMergeableObject(e)) {
      destination[i] = deepmerge(target[i], e, options);
    } else if (target.indexOf(e) === -1) {
      destination.push(e);
    }
  });
  return destination;
}

var FieldInner = function (_super) {
  tslib_1.__extends(FieldInner, _super);

  function FieldInner(props) {
    var _this = _super.call(this, props) || this;

    var render = props.render,
        children = props.children,
        component = props.component;
    warning(!(component && render), 'You should not use <Field component> and <Field render> in the same <Field> component; <Field component> will be ignored');
    warning(!(component && children && isFunction(children)), 'You should not use <Field component> and <Field children> as a function in the same <Field> component; <Field component> will be ignored.');
    warning(!(render && children && !isEmptyChildren(children)), 'You should not use <Field render> and <Field children> in the same <Field> component; <Field children> will be ignored');
    return _this;
  }

  FieldInner.prototype.componentDidMount = function () {
    this.props.formik.registerField(this.props.name, this);
  };

  FieldInner.prototype.componentDidUpdate = function (prevProps) {
    if (this.props.name !== prevProps.name) {
      this.props.formik.unregisterField(prevProps.name);
      this.props.formik.registerField(this.props.name, this);
    }

    if (this.props.validate !== prevProps.validate) {
      this.props.formik.registerField(this.props.name, this);
    }
  };

  FieldInner.prototype.componentWillUnmount = function () {
    this.props.formik.unregisterField(this.props.name);
  };

  FieldInner.prototype.render = function () {
    var _a = this.props,
        validate = _a.validate,
        name = _a.name,
        render = _a.render,
        children = _a.children,
        _b = _a.component,
        component = _b === void 0 ? 'input' : _b,
        formik = _a.formik,
        props = tslib_1.__rest(_a, ["validate", "name", "render", "children", "component", "formik"]);

    var _validate = formik.validate,
        _validationSchema = formik.validationSchema,
        restOfFormik = tslib_1.__rest(formik, ["validate", "validationSchema"]);

    var field = {
      value: props.type === 'radio' || props.type === 'checkbox' ? props.value : getIn(formik.values, name),
      name: name,
      onChange: formik.handleChange,
      onBlur: formik.handleBlur
    };
    var bag = {
      field: field,
      form: restOfFormik
    };

    if (render) {
      return render(bag);
    }

    if (isFunction(children)) {
      return children(bag);
    }

    if (typeof component === 'string') {
      var innerRef = props.innerRef,
          rest = tslib_1.__rest(props, ["innerRef"]);

      return React.createElement(component, tslib_1.__assign({
        ref: innerRef
      }, field, rest, {
        children: children
      }));
    }

    return React.createElement(component, tslib_1.__assign({}, bag, props, {
      children: children
    }));
  };

  return FieldInner;
}(React.Component);

var Field = connect(FieldInner);
var Form = connect(function (_a) {
  var _b = _a.formik,
      handleReset = _b.handleReset,
      handleSubmit = _b.handleSubmit,
      props = tslib_1.__rest(_a, ["formik"]);

  return React.createElement("form", tslib_1.__assign({
    onReset: handleReset,
    onSubmit: handleSubmit
  }, props));
});
Form.displayName = 'Form';

function withFormik(_a) {
  var _b = _a.mapPropsToValues,
      mapPropsToValues = _b === void 0 ? function (vanillaProps) {
    var val = {};

    for (var k in vanillaProps) {
      if (vanillaProps.hasOwnProperty(k) && typeof vanillaProps[k] !== 'function') {
        val[k] = vanillaProps[k];
      }
    }

    return val;
  } : _b,
      config = tslib_1.__rest(_a, ["mapPropsToValues"]);

  return function createFormik(Component) {
    var componentDisplayName = Component.displayName || Component.name || Component.constructor && Component.constructor.name || 'Component';

    var C = function (_super) {
      tslib_1.__extends(C, _super);

      function C() {
        var _this = _super !== null && _super.apply(this, arguments) || this;

        _this.validate = function (values) {
          return config.validate(values, _this.props);
        };

        _this.validationSchema = function () {
          return isFunction(config.validationSchema) ? config.validationSchema(_this.props) : config.validationSchema;
        };

        _this.handleSubmit = function (values, actions) {
          return config.handleSubmit(values, tslib_1.__assign({}, actions, {
            props: _this.props
          }));
        };

        _this.renderFormComponent = function (formikProps) {
          return React.createElement(Component, tslib_1.__assign({}, _this.props, formikProps));
        };

        return _this;
      }

      C.prototype.render = function () {
        var _a = this.props,
            children = _a.children,
            props = tslib_1.__rest(_a, ["children"]);

        return React.createElement(Formik, tslib_1.__assign({}, props, config, {
          validate: config.validate && this.validate,
          validationSchema: config.validationSchema && this.validationSchema,
          initialValues: mapPropsToValues(this.props),
          initialStatus: config.mapPropsToStatus && config.mapPropsToStatus(this.props),
          onSubmit: this.handleSubmit,
          render: this.renderFormComponent
        }));
      };

      C.displayName = "WithFormik(" + componentDisplayName + ")";
      return C;
    }(React.Component);

    return hoistNonReactStatics(C, Component);
  };
}

var move = function move(array, from, to) {
  var copy = (array || []).slice();
  var value = copy[from];
  copy.splice(from, 1);
  copy.splice(to, 0, value);
  return copy;
};

var swap = function swap(array, indexA, indexB) {
  var copy = (array || []).slice();
  var a = copy[indexA];
  copy[indexA] = copy[indexB];
  copy[indexB] = a;
  return copy;
};

var insert = function insert(array, index, value) {
  var copy = (array || []).slice();
  copy.splice(index, 0, value);
  return copy;
};

var replace = function replace(array, index, value) {
  var copy = (array || []).slice();
  copy[index] = value;
  return copy;
};

var FieldArrayInner = function (_super) {
  tslib_1.__extends(FieldArrayInner, _super);

  function FieldArrayInner(props) {
    var _this = _super.call(this, props) || this;

    _this.updateArrayField = function (fn, alterTouched, alterErrors) {
      var _a = _this.props,
          name = _a.name,
          validateOnChange = _a.validateOnChange,
          _b = _a.formik,
          setFormikState = _b.setFormikState,
          validateForm = _b.validateForm;
      setFormikState(function (prevState) {
        var updateErrors = typeof alterErrors === 'function' ? alterErrors : fn;
        var updateTouched = typeof alterTouched === 'function' ? alterTouched : fn;
        return tslib_1.__assign({}, prevState, {
          values: setIn(prevState.values, name, fn(getIn(prevState.values, name))),
          errors: alterErrors ? setIn(prevState.errors, name, updateErrors(getIn(prevState.errors, name))) : prevState.errors,
          touched: alterTouched ? setIn(prevState.touched, name, updateTouched(getIn(prevState.touched, name))) : prevState.touched
        });
      }, function () {
        if (validateOnChange) {
          validateForm();
        }
      });
    };

    _this.push = function (value) {
      return _this.updateArrayField(function (array) {
        return (array || []).concat([cloneDeep(value)]);
      }, false, false);
    };

    _this.handlePush = function (value) {
      return function () {
        return _this.push(value);
      };
    };

    _this.swap = function (indexA, indexB) {
      return _this.updateArrayField(function (array) {
        return swap(array, indexA, indexB);
      }, true, true);
    };

    _this.handleSwap = function (indexA, indexB) {
      return function () {
        return _this.swap(indexA, indexB);
      };
    };

    _this.move = function (from, to) {
      return _this.updateArrayField(function (array) {
        return move(array, from, to);
      }, true, true);
    };

    _this.handleMove = function (from, to) {
      return function () {
        return _this.move(from, to);
      };
    };

    _this.insert = function (index, value) {
      return _this.updateArrayField(function (array) {
        return insert(array, index, value);
      }, function (array) {
        return insert(array, index, null);
      }, function (array) {
        return insert(array, index, null);
      });
    };

    _this.handleInsert = function (index, value) {
      return function () {
        return _this.insert(index, value);
      };
    };

    _this.replace = function (index, value) {
      return _this.updateArrayField(function (array) {
        return replace(array, index, value);
      }, false, false);
    };

    _this.handleReplace = function (index, value) {
      return function () {
        return _this.replace(index, value);
      };
    };

    _this.unshift = function (value) {
      var length = -1;

      _this.updateArrayField(function (array) {
        var arr = array ? [value].concat(array) : [value];

        if (length < 0) {
          length = arr.length;
        }

        return arr;
      }, function (array) {
        var arr = array ? [null].concat(array) : [null];
        if (length < 0) length = arr.length;
        return arr;
      }, function (array) {
        var arr = array ? [null].concat(array) : [null];
        if (length < 0) length = arr.length;
        return arr;
      });

      return length;
    };

    _this.handleUnshift = function (value) {
      return function () {
        return _this.unshift(value);
      };
    };

    _this.handleRemove = function (index) {
      return function () {
        return _this.remove(index);
      };
    };

    _this.handlePop = function () {
      return function () {
        return _this.pop();
      };
    };

    _this.remove = _this.remove.bind(_this);
    _this.pop = _this.pop.bind(_this);
    return _this;
  }

  FieldArrayInner.prototype.remove = function (index) {
    var result;
    this.updateArrayField(function (array) {
      var copy = array ? array.slice() : [];

      if (!result) {
        result = copy[index];
      }

      if (isFunction(copy.splice)) {
        copy.splice(index, 1);
      }

      return copy;
    }, true, true);
    return result;
  };

  FieldArrayInner.prototype.pop = function () {
    var result;
    this.updateArrayField(function (array) {
      var tmp = array;

      if (!result) {
        result = tmp && tmp.pop && tmp.pop();
      }

      return tmp;
    }, true, true);
    return result;
  };

  FieldArrayInner.prototype.render = function () {
    var arrayHelpers = {
      push: this.push,
      pop: this.pop,
      swap: this.swap,
      move: this.move,
      insert: this.insert,
      replace: this.replace,
      unshift: this.unshift,
      remove: this.remove,
      handlePush: this.handlePush,
      handlePop: this.handlePop,
      handleSwap: this.handleSwap,
      handleMove: this.handleMove,
      handleInsert: this.handleInsert,
      handleReplace: this.handleReplace,
      handleUnshift: this.handleUnshift,
      handleRemove: this.handleRemove
    };

    var _a = this.props,
        component = _a.component,
        render = _a.render,
        children = _a.children,
        name = _a.name,
        _b = _a.formik,
        _validate = _b.validate,
        _validationSchema = _b.validationSchema,
        restOfFormik = tslib_1.__rest(_b, ["validate", "validationSchema"]);

    var props = tslib_1.__assign({}, arrayHelpers, {
      form: restOfFormik,
      name: name
    });

    return component ? React.createElement(component, props) : render ? render(props) : children ? typeof children === 'function' ? children(props) : !isEmptyChildren(children) ? React.Children.only(children) : null : null;
  };

  FieldArrayInner.defaultProps = {
    validateOnChange: true
  };
  return FieldArrayInner;
}(React.Component);

var FieldArray = connect(FieldArrayInner);

var FastFieldInner = function (_super) {
  tslib_1.__extends(FastFieldInner, _super);

  function FastFieldInner(props) {
    var _this = _super.call(this, props) || this;

    var render = props.render,
        children = props.children,
        component = props.component;
    warning(!(component && render), 'You should not use <FastField component> and <FastField render> in the same <FastField> component; <FastField component> will be ignored');
    warning(!(component && children && isFunction(children)), 'You should not use <FastField component> and <FastField children> as a function in the same <FastField> component; <FastField component> will be ignored.');
    warning(!(render && children && !isEmptyChildren(children)), 'You should not use <FastField render> and <FastField children> in the same <FastField> component; <FastField children> will be ignored');
    return _this;
  }

  FastFieldInner.prototype.shouldComponentUpdate = function (props) {
    if (this.props.shouldUpdate) {
      return this.props.shouldUpdate(props, this.props);
    } else if (getIn(this.props.formik.values, this.props.name) !== getIn(props.formik.values, this.props.name) || getIn(this.props.formik.errors, this.props.name) !== getIn(props.formik.errors, this.props.name) || getIn(this.props.formik.touched, this.props.name) !== getIn(props.formik.touched, this.props.name) || Object.keys(this.props).length !== Object.keys(props).length || this.props.formik.isSubmitting !== props.formik.isSubmitting) {
      return true;
    } else {
      return false;
    }
  };

  FastFieldInner.prototype.componentDidMount = function () {
    this.props.formik.registerField(this.props.name, this);
  };

  FastFieldInner.prototype.componentDidUpdate = function (prevProps) {
    if (this.props.name !== prevProps.name) {
      this.props.formik.unregisterField(prevProps.name);
      this.props.formik.registerField(this.props.name, this);
    }

    if (this.props.validate !== prevProps.validate) {
      this.props.formik.registerField(this.props.name, this);
    }
  };

  FastFieldInner.prototype.componentWillUnmount = function () {
    this.props.formik.unregisterField(this.props.name);
  };

  FastFieldInner.prototype.render = function () {
    var _a = this.props,
        validate = _a.validate,
        name = _a.name,
        render = _a.render,
        children = _a.children,
        _b = _a.component,
        component = _b === void 0 ? 'input' : _b,
        formik = _a.formik,
        shouldUpdate = _a.shouldUpdate,
        props = tslib_1.__rest(_a, ["validate", "name", "render", "children", "component", "formik", "shouldUpdate"]);

    var _validate = formik.validate,
        _validationSchema = formik.validationSchema,
        restOfFormik = tslib_1.__rest(formik, ["validate", "validationSchema"]);

    var field = {
      value: props.type === 'radio' || props.type === 'checkbox' ? props.value : getIn(formik.values, name),
      name: name,
      onChange: formik.handleChange,
      onBlur: formik.handleBlur
    };
    var bag = {
      field: field,
      form: restOfFormik
    };

    if (render) {
      return render(bag);
    }

    if (isFunction(children)) {
      return children(bag);
    }

    if (typeof component === 'string') {
      var innerRef = props.innerRef,
          rest = tslib_1.__rest(props, ["innerRef"]);

      return React.createElement(component, tslib_1.__assign({
        ref: innerRef
      }, field, rest, {
        children: children
      }));
    }

    return React.createElement(component, tslib_1.__assign({}, bag, props, {
      children: children
    }));
  };

  return FastFieldInner;
}(React.Component);

var FastField = connect(FastFieldInner);

var ErrorMessageImpl = function (_super) {
  tslib_1.__extends(ErrorMessageImpl, _super);

  function ErrorMessageImpl() {
    return _super !== null && _super.apply(this, arguments) || this;
  }

  ErrorMessageImpl.prototype.shouldComponentUpdate = function (props) {
    if (getIn(this.props.formik.errors, this.props.name) !== getIn(props.formik.errors, this.props.name) || getIn(this.props.formik.touched, this.props.name) !== getIn(props.formik.touched, this.props.name) || Object.keys(this.props).length !== Object.keys(props).length) {
      return true;
    } else {
      return false;
    }
  };

  ErrorMessageImpl.prototype.render = function () {
    var _a = this.props,
        component = _a.component,
        formik = _a.formik,
        render = _a.render,
        children = _a.children,
        name = _a.name,
        rest = tslib_1.__rest(_a, ["component", "formik", "render", "children", "name"]);

    var touch = getIn(formik.touched, name);
    var error = getIn(formik.errors, name);
    return !!touch && !!error ? render ? isFunction(render) ? render(error) : null : children ? isFunction(children) ? children(error) : null : component ? React.createElement(component, rest, error) : error : null;
  };

  return ErrorMessageImpl;
}(React.Component);

var ErrorMessage = connect(ErrorMessageImpl);
exports.Formik = Formik;
exports.yupToFormErrors = yupToFormErrors;
exports.validateYupSchema = validateYupSchema;
exports.Field = Field;
exports.Form = Form;
exports.withFormik = withFormik;
exports.move = move;
exports.swap = swap;
exports.insert = insert;
exports.replace = replace;
exports.FieldArray = FieldArray;
exports.isFunction = isFunction;
exports.isObject = isObject;
exports.isInteger = isInteger;
exports.isString = isString;
exports.isNaN = isNaN;
exports.isEmptyChildren = isEmptyChildren;
exports.isPromise = isPromise;
exports.isInputEvent = isInputEvent;
exports.getActiveElement = getActiveElement;
exports.makeCancelable = makeCancelable;
exports.getIn = getIn;
exports.setIn = setIn;
exports.setNestedObjectValues = setNestedObjectValues;
exports.FastField = FastField;
exports.FormikProvider = FormikProvider;
exports.FormikConsumer = FormikConsumer;
exports.connect = connect;
exports.ErrorMessage = ErrorMessage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25uZWN0LnRzeCIsIi4uL3NyYy91dGlscy50cyIsIi4uL3NyYy9Gb3JtaWsudHN4IiwiLi4vc3JjL0ZpZWxkLnRzeCIsIi4uL3NyYy9Gb3JtLnRzeCIsIi4uL3NyYy93aXRoRm9ybWlrLnRzeCIsIi4uL3NyYy9GaWVsZEFycmF5LnRzeCIsIi4uL3NyYy9GYXN0RmllbGQudHN4IiwiLi4vc3JjL0Vycm9yTWVzc2FnZS50c3giXSwibmFtZXMiOlsiUmVhY3QuY3JlYXRlRWxlbWVudCIsIlJlYWN0LkNvbXBvbmVudCIsIlJlYWN0LkNoaWxkcmVuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBTUUsY0FBQSxJQUFBLEVBQUEsR0FBQSxhQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsRUFBQSxDQUFBLFFBQUEsQ0FORjtBQUFBLElBT0UsY0FBQSxHQUFBLEVBQUEsQ0FBQSxRQVBGOztBQWNBLFNBQWdCLE9BQWhCLENBQ0UsSUFERixFQUMyRTtBQUV6RSxNQUFNLENBQUMsR0FBMEIsU0FBM0IsQ0FBMkIsQ0FBQyxLQUFELEVBQWtCO0FBQUssV0FDdERBLEtBQUFBLENBQUFBLGFBQUFBLENBQUMsY0FBREEsRUFBZSxJQUFmQSxFQUNHLFVBQUEsTUFBQSxFQUFNO0FBQUksYUFBQSxLQUFBLENBQUEsYUFBQSxDQUFDLElBQUQsRUFBSyxPQUFBLENBQUEsUUFBQSxDQUFBLEVBQUEsRUFBSyxLQUFMLEVBQVU7QUFBRSxRQUFBLE1BQU0sRUFBRTtBQUFWLE9BQVYsQ0FBTCxDQUFBO0FBQW1DLEtBRGhEQSxDQURzRDtBQUl2RCxHQUpEOztBQUtBLE1BQU0sb0JBQW9CLEdBQ3hCLElBQUksQ0FBQyxXQUFMLElBQ0EsSUFBSSxDQUFDLElBREwsSUFFQyxJQUFJLENBQUMsV0FBTCxJQUFvQixJQUFJLENBQUMsV0FBTCxDQUFpQixJQUZ0QyxJQUdBLFdBSkY7QUFRQyxFQUFBLENBRUMsQ0FBQyxnQkFGRixHQUVxQixJ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UUFBQSxFQUFBLFFBQUEsRUFBQSxVQUFBLEVBQUEsTUFBQSxDQUFBLENBQWpEOztBQUVBLFFBQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBUixFQUFpQixJQUFqQixDQUFuQjtBQUNBLFFBQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBUixFQUFnQixJQUFoQixDQUFuQjtBQUVBLFdBQU8sQ0FBQyxDQUFDLEtBQUYsSUFBVyxDQUFDLENBQUMsS0FBYixHQUNILE1BQU0sR0FDSixVQUFVLENBQUMsTUFBRCxDQUFWLEdBQXFCLE1BQU0sQ0FBQyxLQUFELENBQTNCLEdBQXFDLElBRGpDLEdBRUosUUFBUSxHQUNOLFVBQVUsQ0FBQyxRQUFELENBQVYsR0FBdUIsUUFBUSxDQUFDLEtBQUQsQ0FBL0IsR0FBeUMsSUFEbkMsR0FFTixTQUFTLEdBQ1BELEtBQUFBLENBQUFBLGFBQUFBLENBQW9CLFNBQXBCQSxFQUErQixJQUEvQkEsRUFBNEMsS0FBNUNBLENBRE8sR0FFUCxLQVBILEdBUUgsSUFSSjtBQVNELEdBZkQ7O0FBZ0JGLFNBQUEsZ0JBQUE7QUFBQyxDQW5DRCxDQUErQkMsS0FBQUEsQ0FBQUEsU0FBL0IsQ0FBQTs7QUFxQ0EsSUFBYSxZQUFZLEdBQUcsT0FBTyxDQUdqQyxnQkFIaUMsQ0FBbkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgaG9pc3ROb25SZWFjdFN0YXRpY3MgZnJvbSAnaG9pc3Qtbm9uLXJlYWN0LXN0YXRpY3MnO1xuaW1wb3J0IGNyZWF0ZUNvbnRleHQgZnJvbSAnY3JlYXRlLXJlYWN0LWNvbnRleHQnO1xuaW1wb3J0IHsgRm9ybWlrQ29udGV4dCB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3Qge1xuICBQcm92aWRlcjogRm9ybWlrUHJvdmlkZXIsXG4gIENvbnN1bWVyOiBGb3JtaWtDb25zdW1lcixcbn06IFJlYWN0LkNvbnRleHQ8Rm9ybWlrQ29udGV4dDxhbnk+PiA9IChjcmVhdGVDb250ZXh0IGFzIGFueSkoe30gYXMgYW55KTtcblxuLyoqXG4gKiBDb25uZWN0IGFueSBjb21wb25lbnQgdG8gRm9ybWlrIGNvbnRleHQsIGFuZCBpbmplY3QgYXMgYSBwcm9wIGNhbGxlZCBgZm9ybWlrYDtcbiAqIEBwYXJhbSBDb21wIFJlYWN0IENvbXBvbmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29ubmVjdDxPdXRlclByb3BzLCBWYWx1ZXMgPSB7fT4oXG4gIENvbXA6IFJlYWN0LkNvbXBvbmVudFR5cGU8T3V0ZXJQcm9wcyAmIHsgZm9ybWlrOiBGb3JtaWtDb250ZXh0PFZhbHVlcz4gfT5cbikge1xuICBjb25zdCBDOiBSZWFjdC5TRkM8T3V0ZXJQcm9wcz4gPSAocHJvcHM6IE91dGVyUHJvcHMpID0+IChcbiAgICA8Rm9ybWlrQ29uc3VtZXI+XG4gICAgICB7Zm9ybWlrID0+IDxDb21wIHsuLi5wcm9wc30gZm9ybWlrPXtmb3JtaWt9IC8+fVxuICAgIDwvRm9ybWlrQ29uc3VtZXI+XG4gICk7XG4gIGNvbnN0IGNvbXBvbmVudERpc3BsYXlOYW1lID1cbiAgICBDb21wLmRpc3BsYXlOYW1lIHx8XG4gICAgQ29tcC5uYW1lIHx8XG4gICAgKENvbXAuY29uc3RydWN0b3IgJiYgQ29tcC5jb25zdHJ1Y3Rvci5uYW1lKSB8fFxuICAgICdDb21wb25lbnQnO1xuXG4gIC8vIEFzc2lnbiBDb21wIHRvIEMuV3JhcHBlZENvbXBvbmVudCBzbyB3ZSBjYW4gYWNjZXNzIHRoZSBpbm5lciBjb21wb25lbnQgaW4gdGVzdHNcbiAgLy8gRm9yIGV4YW1wbGUsIDxGaWVsZC5XcmFwcGVkQ29tcG9uZW50IC8+IGdldHMgdXMgPEZpZWxkSW5uZXIvPlxuICAoQyBhcyBSZWFjdC5TRkM8T3V0ZXJQcm9wcz4gJiB7XG4gICAgV3JhcHBlZENvbXBvbmVudDogUmVhY3QuUmVhY3ROb2RlO1xuICB9KS5XcmFwcGVkQ29tcG9uZW50ID0gQ29tcDtcblxuICBDLmRpc3BsYXlOYW1lID0gYEZvcm1pa0Nvbm5lY3QoJHtjb21wb25lbnREaXNwbGF5TmFtZX0pYDtcblxuICByZXR1cm4gaG9pc3ROb25SZWFjdFN0YXRpY3MoXG4gICAgQyxcbiAgICBDb21wIGFzIFJlYWN0LkNvbXBvbmVudENsYXNzPE91dGVyUHJvcHMgJiB7IGZvcm1pazogRm9ybWlrQ29udGV4dDxWYWx1ZXM+IH0+IC8vIGNhc3QgdHlwZSB0byBDb21wb25lbnRDbGFzcyAoZXZlbiBpZiBTRkMpXG4gICkgYXMgUmVhY3QuQ29tcG9uZW50VHlwZTxPdXRlclByb3BzPjtcbn1cbiIsImltcG9ydCBjbG9uZSBmcm9tICdsb2Rhc2gvY2xvbmUnO1xuaW1wb3J0IHRvUGF0aCBmcm9tICdsb2Rhc2gvdG9QYXRoJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuLy8gQXNzZXJ0aW9uc1xuXG4vKiogQHByaXZhdGUgaXMgdGhlIGdpdmVuIG9iamVjdCBhIEZ1bmN0aW9uPyAqL1xuZXhwb3J0IGNvbnN0IGlzRnVuY3Rpb24gPSAob2JqOiBhbnkpOiBvYmogaXMgRnVuY3Rpb24gPT5cbiAgdHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJztcblxuLyoqIEBwcml2YXRlIGlzIHRoZSBnaXZlbiBvYmplY3QgYW4gT2JqZWN0PyAqL1xuZXhwb3J0IGNvbnN0IGlzT2JqZWN0ID0gKG9iajogYW55KTogYm9vbGVhbiA9PlxuICBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCc7XG5cbi8qKiBAcHJpdmF0ZSBpcyB0aGUgZ2l2ZW4gb2JqZWN0IGFuIGludGVnZXI/ICovXG5leHBvcnQgY29uc3QgaXNJbnRlZ2VyID0gKG9iajogYW55KTogYm9vbGVhbiA9PlxuICBTdHJpbmcoTWF0aC5mbG9vcihOdW1iZXIob2JqKSkpID09PSBvYmo7XG5cbi8qKiBAcHJpdmF0ZSBpcyB0aGUgZ2l2ZW4gb2JqZWN0IGEgc3RyaW5nPyAqL1xuZXhwb3J0IGNvbnN0IGlzU3RyaW5nID0gKG9iajogYW55KTogb2JqIGlzIHN0cmluZyA9PlxuICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgU3RyaW5nXSc7XG5cbi8qKiBAcHJpdmF0ZSBpcyB0aGUgZ2l2ZW4gb2JqZWN0IGEgTmFOPyAqL1xuZXhwb3J0IGNvbnN0IGlzTmFOID0gKG9iajogYW55KTogYm9vbGVhbiA9PiBvYmogIT09IG9iajtcblxuLyoqIEBwcml2YXRlIERvZXMgYSBSZWFjdCBjb21wb25lbnQgaGF2ZSBleGFjdGx5IDAgY2hpbGRyZW4/ICovXG5leHBvcnQgY29uc3QgaXNFbXB0eUNoaWxkcmVuID0gKGNoaWxkcmVuOiBhbnkpOiBib29sZWFuID0+XG4gIFJlYWN0LkNoaWxkcmVuLmNvdW50KGNoaWxkcmVuKSA9PT0gMDtcblxuLyoqIEBwcml2YXRlIGlzIHRoZSBnaXZlbiBvYmplY3QvdmFsdWUgYSBwcm9taXNlPyAqL1xuZXhwb3J0IGNvbnN0IGlzUHJvbWlzZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgUHJvbWlzZUxpa2U8YW55PiA9PlxuICBpc09iamVjdCh2YWx1ZSkgJiYgaXNGdW5jdGlvbih2YWx1ZS50aGVuKTtcblxuLyoqIEBwcml2YXRlIGlzIHRoZSBnaXZlbiBvYmplY3QvdmFsdWUgYSB0eXBlIG9mIHN5bnRoZXRpYyBldmVudD8gKi9cbmV4cG9ydCBjb25zdCBpc0lucHV0RXZlbnQgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIFJlYWN0LlN5bnRoZXRpY0V2ZW50PGFueT4gPT5cbiAgdmFsdWUgJiYgaXNPYmplY3QodmFsdWUpICYmIGlzT2JqZWN0KHZhbHVlLnRhcmdldCk7XG5cbi8qKlxuICogU2FtZSBhcyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGJ1dCB3cmFwcyBpbiBhIHRyeS1jYXRjaCBibG9jay4gSW4gSUUgaXQgaXNcbiAqIG5vdCBzYWZlIHRvIGNhbGwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpZiB0aGVyZSBpcyBub3RoaW5nIGZvY3VzZWQuXG4gKlxuICogVGhlIGFjdGl2ZUVsZW1lbnQgd2lsbCBiZSBudWxsIG9ubHkgaWYgdGhlIGRvY3VtZW50IG9yIGRvY3VtZW50IGJvZHkgaXMgbm90XG4gKiB5ZXQgZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0gez9Eb2N1bWVudH0gZG9jIERlZmF1bHRzIHRvIGN1cnJlbnQgZG9jdW1lbnQuXG4gKiBAcmV0dXJuIHtFbGVtZW50IHwgbnVsbH1cbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2ZianMvYmxvYi9tYXN0ZXIvcGFja2FnZXMvZmJqcy9zcmMvY29yZS9kb20vZ2V0QWN0aXZlRWxlbWVudC5qc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWN0aXZlRWxlbWVudChkb2M/OiBEb2N1bWVudCk6IEVsZW1lbnQgfCBudWxsIHtcbiAgZG9jID0gZG9jIHx8ICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnID8gZG9jdW1lbnQgOiB1bmRlZmluZWQpO1xuICBpZiAodHlwZW9mIGRvYyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB0cnkge1xuICAgIHJldHVybiBkb2MuYWN0aXZlRWxlbWVudCB8fCBkb2MuYm9keTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBkb2MuYm9keTtcbiAgfVxufVxuXG4vKipcbiAqIE1ha2UgYSBwcm9taXNlIGNhbmNlbGxhYmxlIGJ5IEBpc3RhcmtvdlxuICogQHNlZSBodHRwczovL3JlYWN0anMub3JnL2Jsb2cvMjAxNS8xMi8xNi9pc21vdW50ZWQtYW50aXBhdHRlcm4uaHRtbFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZUNhbmNlbGFibGU8VCBleHRlbmRzIFByb21pc2U8YW55Pj4oXG4gIHByb21pc2U6IFRcbik6IFtULCAoKSA9PiB2b2lkXSB7XG4gIGxldCBoYXNDYW5jZWxlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0IHdyYXBwZWRQcm9taXNlOiBhbnkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgcHJvbWlzZS50aGVuKFxuICAgICAgdmFsID0+IChoYXNDYW5jZWxlZCA/IHJlamVjdCh7IGlzQ2FuY2VsZWQ6IHRydWUgfSkgOiByZXNvbHZlKHZhbCkpLFxuICAgICAgZXJyb3IgPT4gKGhhc0NhbmNlbGVkID8gcmVqZWN0KHsgaXNDYW5jZWxlZDogdHJ1ZSB9KSA6IHJlamVjdChlcnJvcikpXG4gICAgKTtcbiAgfSk7XG5cbiAgcmV0dXJuIFtcbiAgICB3cmFwcGVkUHJvbWlzZSxcbiAgICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgICBoYXNDYW5jZWxlZCA9IHRydWU7XG4gICAgfSxcbiAgXTtcbn1cblxuLyoqXG4gKiBEZWVwbHkgZ2V0IGEgdmFsdWUgZnJvbSBhbiBvYmplY3QgdmlhIGl0cyBwYXRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW4oXG4gIG9iajogYW55LFxuICBrZXk6IHN0cmluZyB8IHN0cmluZ1tdLFxuICBkZWY/OiBhbnksXG4gIHA6IG51bWJlciA9IDBcbikge1xuICBjb25zdCBwYXRoID0gdG9QYXRoKGtleSk7XG4gIHdoaWxlIChvYmogJiYgcCA8IHBhdGgubGVuZ3RoKSB7XG4gICAgb2JqID0gb2JqW3BhdGhbcCsrXV07XG4gIH1cbiAgcmV0dXJuIG9iaiA9PT0gdW5kZWZpbmVkID8gZGVmIDogb2JqO1xufVxuXG4vKipcbiAqIERlZXBseSBzZXQgYSB2YWx1ZSBmcm9tIGluIG9iamVjdCB2aWEgaXQncyBwYXRoLiBJZiB0aGUgdmFsdWUgYXQgYHBhdGhgXG4gKiBoYXMgY2hhbmdlZCwgcmV0dXJuIGEgc2hhbGxvdyBjb3B5IG9mIG9iaiB3aXRoIGB2YWx1ZWAgc2V0IGF0IGBwYXRoYC5cbiAqIElmIGB2YWx1ZWAgaGFzIG5vdCBjaGFuZ2VkLCByZXR1cm4gdGhlIG9yaWdpbmFsIGBvYmpgLlxuICpcbiAqIEV4aXN0aW5nIG9iamVjdHMgLyBhcnJheXMgYWxvbmcgYHBhdGhgIGFyZSBhbHNvIHNoYWxsb3cgY29waWVkLiBTaWJsaW5nXG4gKiBvYmplY3RzIGFsb25nIHBhdGggcmV0YWluIHRoZSBzYW1lIGludGVybmFsIGpzIHJlZmVyZW5jZS4gU2luY2UgbmV3XG4gKiBvYmplY3RzIC8gYXJyYXlzIGFyZSBvbmx5IGNyZWF0ZWQgYWxvbmcgYHBhdGhgLCB3ZSBjYW4gdGVzdCBpZiBhbnl0aGluZ1xuICogY2hhbmdlZCBpbiBhIG5lc3RlZCBzdHJ1Y3R1cmUgYnkgY29tcGFyaW5nIHRoZSBvYmplY3QncyByZWZlcmVuY2UgaW5cbiAqIHRoZSBvbGQgYW5kIG5ldyBvYmplY3QsIHNpbWlsYXIgdG8gaG93IHJ1c3NpYW4gZG9sbCBjYWNoZSBpbnZhbGlkYXRpb25cbiAqIHdvcmtzLlxuICpcbiAqIEluIGVhcmxpZXIgdmVyc2lvbnMgb2YgdGhpcyBmdW5jdGlvbiwgd2hpY2ggdXNlZCBjbG9uZURlZXAsIHRoZXJlIHdlcmVcbiAqIGlzc3VlcyB3aGVyZWJ5IHNldHRpbmdzIGEgbmVzdGVkIHZhbHVlIHdvdWxkIG11dGF0ZSB0aGUgcGFyZW50XG4gKiBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3IG9iamVjdC4gYGNsb25lYCBhdm9pZHMgdGhhdCBidWcgbWFraW5nIGFcbiAqIHNoYWxsb3cgY29weSBvZiB0aGUgb2JqZWN0cyBhbG9uZyB0aGUgdXBkYXRlIHBhdGhcbiAqIHNvIG5vIG9iamVjdCBpcyBtdXRhdGVkIGluIHBsYWNlLlxuICpcbiAqIEJlZm9yZSBjaGFuZ2luZyB0aGlzIGZ1bmN0aW9uLCBwbGVhc2UgcmVhZCB0aHJvdWdoIHRoZSBmb2xsb3dpbmdcbiAqIGRpc2N1c3Npb25zLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2RldmVsb3BpdC9saW5rc3RhdGVcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2phcmVkcGFsbWVyL2Zvcm1pay9wdWxsLzEyM1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0SW4ob2JqOiBhbnksIHBhdGg6IHN0cmluZywgdmFsdWU6IGFueSk6IGFueSB7XG4gIGxldCByZXM6IGFueSA9IGNsb25lKG9iaik7IC8vIHRoaXMga2VlcHMgaW5oZXJpdGFuY2Ugd2hlbiBvYmogaXMgYSBjbGFzc1xuICBsZXQgcmVzVmFsOiBhbnkgPSByZXM7XG4gIGxldCBpID0gMDtcbiAgbGV0IHBhdGhBcnJheSA9IHRvUGF0aChwYXRoKTtcblxuICBmb3IgKDsgaSA8IHBhdGhBcnJheS5sZW5ndGggLSAxOyBpKyspIHtcbiAgICBjb25zdCBjdXJyZW50UGF0aDogc3RyaW5nID0gcGF0aEFycmF5W2ldO1xuICAgIGxldCBjdXJyZW50T2JqOiBhbnkgPSBnZXRJbihvYmosIHBhdGhBcnJheS5zbGljZSgwLCBpICsgMSkpO1xuXG4gICAgaWYgKGN1cnJlbnRPYmopIHtcbiAgICAgIHJlc1ZhbCA9IHJlc1ZhbFtjdXJyZW50UGF0aF0gPSBjbG9uZShjdXJyZW50T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmV4dFBhdGg6IHN0cmluZyA9IHBhdGhBcnJheVtpICsgMV07XG4gICAgICByZXNWYWwgPSByZXNWYWxbY3VycmVudFBhdGhdID1cbiAgICAgICAgaXNJbnRlZ2VyKG5leHRQYXRoKSAmJiBOdW1iZXIobmV4dFBhdGgpID49IDAgPyBbXSA6IHt9O1xuICAgIH1cbiAgfVxuXG4gIC8vIFJldHVybiBvcmlnaW5hbCBvYmplY3QgaWYgbmV3IHZhbHVlIGlzIHRoZSBzYW1lIGFzIGN1cnJlbnRcbiAgaWYgKChpID09PSAwID8gb2JqIDogcmVzVmFsKVtwYXRoQXJyYXlbaV1dID09PSB2YWx1ZSkge1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIGRlbGV0ZSByZXNWYWxbcGF0aEFycmF5W2ldXTtcbiAgfSBlbHNlIHtcbiAgICByZXNWYWxbcGF0aEFycmF5W2ldXSA9IHZhbHVlO1xuICB9XG5cbiAgLy8gSWYgdGhlIHBhdGggYXJyYXkgaGFzIGEgc2luZ2xlIGVsZW1lbnQsIHRoZSBsb29wIGRpZCBub3QgcnVuLlxuICAvLyBEZWxldGluZyBvbiBgcmVzVmFsYCBoYWQgbm8gZWZmZWN0IGluIHRoaXMgc2NlbmFyaW8sIHNvIHdlIGRlbGV0ZSBvbiB0aGUgcmVzdWx0IGluc3RlYWQuXG4gIGlmIChpID09PSAwICYmIHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICBkZWxldGUgcmVzW3BhdGhBcnJheVtpXV07XG4gIH1cblxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IGEgc2V0IHRoZSBzYW1lIHZhbHVlIGZvciBhbGwga2V5cyBhbmQgYXJyYXlzIG5lc3RlZCBvYmplY3QsIGNsb25pbmdcbiAqIEBwYXJhbSBvYmplY3RcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHBhcmFtIHZpc2l0ZWRcbiAqIEBwYXJhbSByZXNwb25zZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0TmVzdGVkT2JqZWN0VmFsdWVzPFQ+KFxuICBvYmplY3Q6IGFueSxcbiAgdmFsdWU6IGFueSxcbiAgdmlzaXRlZDogYW55ID0gbmV3IFdlYWtNYXAoKSxcbiAgcmVzcG9uc2U6IGFueSA9IHt9XG4pOiBUIHtcbiAgZm9yIChsZXQgayBvZiBPYmplY3Qua2V5cyhvYmplY3QpKSB7XG4gICAgY29uc3QgdmFsID0gb2JqZWN0W2tdO1xuICAgIGlmIChpc09iamVjdCh2YWwpKSB7XG4gICAgICBpZiAoIXZpc2l0ZWQuZ2V0KHZhbCkpIHtcbiAgICAgICAgdmlzaXRlZC5zZXQodmFsLCB0cnVlKTtcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8ga2VlcCBhcnJheSB2YWx1ZXMgY29uc2lzdGVudCBmb3IgYm90aCBkb3QgcGF0aCAgYW5kXG4gICAgICAgIC8vIGJyYWNrZXQgc3ludGF4LCB3ZSBuZWVkIHRvIGNoZWNrIGlmIHRoaXMgaXMgYW4gYXJyYXkgc28gdGhhdFxuICAgICAgICAvLyB0aGlzIHdpbGwgb3V0cHV0ICB7IGZyaWVuZHM6IFt0cnVlXSB9IGFuZCBub3QgeyBmcmllbmRzOiB7IFwiMFwiOiB0cnVlIH0gfVxuICAgICAgICByZXNwb25zZVtrXSA9IEFycmF5LmlzQXJyYXkodmFsKSA/IFtdIDoge307XG4gICAgICAgIHNldE5lc3RlZE9iamVjdFZhbHVlcyh2YWwsIHZhbHVlLCB2aXNpdGVkLCByZXNwb25zZVtrXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3BvbnNlW2tdID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGlzRXF1YWwgZnJvbSAncmVhY3QtZmFzdC1jb21wYXJlJztcbmltcG9ydCBkZWVwbWVyZ2UgZnJvbSAnZGVlcG1lcmdlJztcbmltcG9ydCB7IEZvcm1pa1Byb3ZpZGVyIH0gZnJvbSAnLi9jb25uZWN0JztcbmltcG9ydCB3YXJuaW5nIGZyb20gJ3Rpbnktd2FybmluZyc7XG5pbXBvcnQge1xuICBGb3JtaWtBY3Rpb25zLFxuICBGb3JtaWtDb25maWcsXG4gIEZvcm1pa0Vycm9ycyxcbiAgRm9ybWlrU3RhdGUsXG4gIEZvcm1pa1RvdWNoZWQsXG4gIEZvcm1pa1ZhbHVlcyxcbiAgRm9ybWlrUHJvcHMsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtcbiAgaXNFbXB0eUNoaWxkcmVuLFxuICBpc0Z1bmN0aW9uLFxuICBpc05hTixcbiAgaXNQcm9taXNlLFxuICBpc1N0cmluZyxcbiAgaXNJbnB1dEV2ZW50LFxuICBzZXRJbixcbiAgc2V0TmVzdGVkT2JqZWN0VmFsdWVzLFxuICBnZXRBY3RpdmVFbGVtZW50LFxuICBnZXRJbixcbiAgbWFrZUNhbmNlbGFibGUsXG59IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgRm9ybWlrPFZhbHVlcyA9IEZvcm1pa1ZhbHVlcz4gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8XG4gIEZvcm1pa0NvbmZpZzxWYWx1ZXM+LFxuICBGb3JtaWtTdGF0ZTxWYWx1ZXM+XG4+IHtcbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICB2YWxpZGF0ZU9uQ2hhbmdlOiB0cnVlLFxuICAgIHZhbGlkYXRlT25CbHVyOiB0cnVlLFxuICAgIGlzSW5pdGlhbFZhbGlkOiBmYWxzZSxcbiAgICBlbmFibGVSZWluaXRpYWxpemU6IGZhbHNlLFxuICB9O1xuXG4gIGluaXRpYWxWYWx1ZXM6IFZhbHVlcztcbiAgZGlkTW91bnQ6IGJvb2xlYW47XG4gIGhjQ2FjaGU6IHtcbiAgICBba2V5OiBzdHJpbmddOiAoZTogdW5rbm93biB8IFJlYWN0LkNoYW5nZUV2ZW50PGFueT4pID0+IHZvaWQ7XG4gIH0gPSB7fTtcbiAgaGJDYWNoZToge1xuICAgIFtrZXk6IHN0cmluZ106IChlOiBhbnkpID0+IHZvaWQ7XG4gIH0gPSB7fTtcbiAgZmllbGRzOiB7XG4gICAgW2ZpZWxkOiBzdHJpbmddOiBSZWFjdC5Db21wb25lbnQ8YW55PjtcbiAgfTtcbiAgdmFsaWRhdG9yOiBhbnk7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IEZvcm1pa0NvbmZpZzxWYWx1ZXM+KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB2YWx1ZXM6IHByb3BzLmluaXRpYWxWYWx1ZXMgfHwgKHt9IGFzIGFueSksXG4gICAgICBlcnJvcnM6IHt9LFxuICAgICAgdG91Y2hlZDoge30sXG4gICAgICBpc1N1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgaXNWYWxpZGF0aW5nOiBmYWxzZSxcbiAgICAgIHN1Ym1pdENvdW50OiAwLFxuICAgICAgc3RhdHVzOiBwcm9wcy5pbml0aWFsU3RhdHVzLFxuICAgIH07XG4gICAgdGhpcy5kaWRNb3VudCA9IGZhbHNlO1xuICAgIHRoaXMuZmllbGRzID0ge307XG4gICAgdGhpcy5pbml0aWFsVmFsdWVzID0gcHJvcHMuaW5pdGlhbFZhbHVlcyB8fCAoe30gYXMgYW55KTtcbiAgICB3YXJuaW5nKFxuICAgICAgIShwcm9wcy5jb21wb25lbnQgJiYgcHJvcHMucmVuZGVyKSxcbiAgICAgICdZb3Ugc2hvdWxkIG5vdCB1c2UgPEZvcm1payBjb21wb25lbnQ+IGFuZCA8Rm9ybWlrIHJlbmRlcj4gaW4gdGhlIHNhbWUgPEZvcm1paz4gY29tcG9uZW50OyA8Rm9ybWlrIHJlbmRlcj4gd2lsbCBiZSBpZ25vcmVkJ1xuICAgICk7XG5cbiAgICB3YXJuaW5nKFxuICAgICAgIShwcm9wcy5jb21wb25lbnQgJiYgcHJvcHMuY2hpbGRyZW4gJiYgIWlzRW1wdHlDaGlsZHJlbihwcm9wcy5jaGlsZHJlbikpLFxuICAgICAgJ1lvdSBzaG91bGQgbm90IHVzZSA8Rm9ybWlrIGNvbXBvbmVudD4gYW5kIDxGb3JtaWsgY2hpbGRyZW4+IGluIHRoZSBzYW1lIDxGb3JtaWs+IGNvbXBvbmVudDsgPEZvcm1payBjaGlsZHJlbj4gd2lsbCBiZSBpZ25vcmVkJ1xuICAgICk7XG5cbiAgICB3YXJuaW5nKFxuICAgICAgIShwcm9wcy5yZW5kZXIgJiYgcHJvcHMuY2hpbGRyZW4gJiYgIWlzRW1wdHlDaGlsZHJlbihwcm9wcy5jaGlsZHJlbikpLFxuICAgICAgJ1lvdSBzaG91bGQgbm90IHVzZSA8Rm9ybWlrIHJlbmRlcj4gYW5kIDxGb3JtaWsgY2hpbGRyZW4+IGluIHRoZSBzYW1lIDxGb3JtaWs+IGNvbXBvbmVudDsgPEZvcm1payBjaGlsZHJlbj4gd2lsbCBiZSBpZ25vcmVkJ1xuICAgICk7XG4gIH1cblxuICByZWdpc3RlckZpZWxkID0gKG5hbWU6IHN0cmluZywgQ29tcDogUmVhY3QuQ29tcG9uZW50PGFueT4pID0+IHtcbiAgICB0aGlzLmZpZWxkc1tuYW1lXSA9IENvbXA7XG4gIH07XG5cbiAgdW5yZWdpc3RlckZpZWxkID0gKG5hbWU6IHN0cmluZykgPT4ge1xuICAgIGRlbGV0ZSB0aGlzLmZpZWxkc1tuYW1lXTtcbiAgfTtcblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmRpZE1vdW50ID0gdHJ1ZTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIC8vIFRoaXMgYWxsb3dzIHVzIHRvIHByZXZlbnQgc2V0dGluZyBzdGF0ZSBvbiBhblxuICAgIC8vIHVubW91bnRlZCBjb21wb25lbnQuIFRoaXMgY2FuIG9jY3VyIGlmIEZvcm1payBpcyBpbiBhIG1vZGFsLCBhbmQgc3VibWlzc2lvblxuICAgIC8vIHRvZ2dsZXMgc2hvdy9oaWRlLCBhbmQgdmFsaWRhdGlvbiBvZiBhIGJsdXIgZmllbGQgdGFrZXMgbG9uZ2VyIHRoYW4gdmFsaWRhdGlvblxuICAgIC8vIGJlZm9yZSBhIHN1Ym1pdC5cbiAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXJlZHBhbG1lci9mb3JtaWsvaXNzdWVzLzU5N1xuICAgIC8vIEBzZWUgaHR0cHM6Ly9yZWFjdGpzLm9yZy9ibG9nLzIwMTUvMTIvMTYvaXNtb3VudGVkLWFudGlwYXR0ZXJuLmh0bWxcbiAgICB0aGlzLmRpZE1vdW50ID0gZmFsc2U7XG5cbiAgICAvLyBDYW5jZWwgdmFsaWRhdGlvbiBvbiB1bm1vdW50LlxuICAgIGlmICh0aGlzLnZhbGlkYXRvcikge1xuICAgICAgdGhpcy52YWxpZGF0b3IoKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBSZWFkb25seTxGb3JtaWtDb25maWc8VmFsdWVzPj4pIHtcbiAgICAvLyBJZiB0aGUgaW5pdGlhbFZhbHVlcyBjaGFuZ2UsIHJlc2V0IHRoZSBmb3JtXG4gICAgaWYgKFxuICAgICAgdGhpcy5wcm9wcy5lbmFibGVSZWluaXRpYWxpemUgJiZcbiAgICAgICFpc0VxdWFsKHByZXZQcm9wcy5pbml0aWFsVmFsdWVzLCB0aGlzLnByb3BzLmluaXRpYWxWYWx1ZXMpXG4gICAgKSB7XG4gICAgICB0aGlzLmluaXRpYWxWYWx1ZXMgPSB0aGlzLnByb3BzLmluaXRpYWxWYWx1ZXM7XG4gICAgICAvLyBAdG9kbyByZWZhY3RvciB0byB1c2UgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzP1xuICAgICAgdGhpcy5yZXNldEZvcm0odGhpcy5wcm9wcy5pbml0aWFsVmFsdWVzKTtcbiAgICB9XG4gIH1cblxuICBzZXRFcnJvcnMgPSAoZXJyb3JzOiBGb3JtaWtFcnJvcnM8VmFsdWVzPikgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJvcnMgfSk7XG4gIH07XG5cbiAgc2V0VG91Y2hlZCA9ICh0b3VjaGVkOiBGb3JtaWtUb3VjaGVkPFZhbHVlcz4pID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgdG91Y2hlZCB9LCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0ZU9uQmx1cikge1xuICAgICAgICB0aGlzLnJ1blZhbGlkYXRpb25zKHRoaXMuc3RhdGUudmFsdWVzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBzZXRWYWx1ZXMgPSAodmFsdWVzOiBGb3JtaWtTdGF0ZTxWYWx1ZXM+Wyd2YWx1ZXMnXSkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyB2YWx1ZXMgfSwgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGVPbkNoYW5nZSkge1xuICAgICAgICB0aGlzLnJ1blZhbGlkYXRpb25zKHZhbHVlcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgc2V0U3RhdHVzID0gKHN0YXR1cz86IGFueSkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBzdGF0dXMgfSk7XG4gIH07XG5cbiAgc2V0RXJyb3IgPSAoZXJyb3I6IGFueSkgPT4ge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBXYXJuaW5nOiBGb3JtaWtcXCdzIHNldEVycm9yKGVycm9yKSBpcyBkZXByZWNhdGVkIGFuZCBtYXkgYmUgcmVtb3ZlZCBpbiBmdXR1cmUgcmVsZWFzZXMuIFBsZWFzZSB1c2UgRm9ybWlrXFwncyBzZXRTdGF0dXMoc3RhdHVzKSBpbnN0ZWFkLiBJdCB3b3JrcyBpZGVudGljYWxseS4gRm9yIG1vcmUgaW5mbyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2phcmVkcGFsbWVyL2Zvcm1payNzZXRzdGF0dXMtc3RhdHVzLWFueS0tdm9pZGBcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJvciB9KTtcbiAgfTtcblxuICBzZXRTdWJtaXR0aW5nID0gKGlzU3VibWl0dGluZzogYm9vbGVhbikgPT4ge1xuICAgIGlmICh0aGlzLmRpZE1vdW50KSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgaXNTdWJtaXR0aW5nIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUnVuIGZpZWxkIGxldmVsIHZhbGlkYXRpb25cbiAgICovXG4gIHZhbGlkYXRlRmllbGQgPSAoZmllbGQ6IHN0cmluZyk6IFByb21pc2U8T2JqZWN0PiA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGlzVmFsaWRhdGluZzogdHJ1ZSB9KTtcbiAgICByZXR1cm4gdGhpcy5ydW5TaW5nbGVGaWVsZExldmVsVmFsaWRhdGlvbihcbiAgICAgIGZpZWxkLFxuICAgICAgZ2V0SW4odGhpcy5zdGF0ZS52YWx1ZXMsIGZpZWxkKVxuICAgICkudGhlbihlcnJvciA9PiB7XG4gICAgICBpZiAodGhpcy5kaWRNb3VudCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBlcnJvcnM6IHNldEluKHRoaXMuc3RhdGUuZXJyb3JzLCBmaWVsZCwgZXJyb3IpLFxuICAgICAgICAgIGlzVmFsaWRhdGluZzogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVycm9yO1xuICAgIH0pO1xuICB9O1xuXG4gIHJ1blNpbmdsZUZpZWxkTGV2ZWxWYWxpZGF0aW9uID0gKFxuICAgIGZpZWxkOiBzdHJpbmcsXG4gICAgdmFsdWU6IHZvaWQgfCBzdHJpbmdcbiAgKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PlxuICAgICAgcmVzb2x2ZSh0aGlzLmZpZWxkc1tmaWVsZF0ucHJvcHMudmFsaWRhdGUodmFsdWUpKVxuICAgICkudGhlbih4ID0+IHgsIGUgPT4gZSk7XG4gIH07XG5cbiAgcnVuRmllbGRMZXZlbFZhbGlkYXRpb25zKFxuICAgIHZhbHVlczogRm9ybWlrVmFsdWVzXG4gICk6IFByb21pc2U8Rm9ybWlrRXJyb3JzPFZhbHVlcz4+IHtcbiAgICBjb25zdCBmaWVsZEtleXNXaXRoVmFsaWRhdGlvbjogc3RyaW5nW10gPSBPYmplY3Qua2V5cyh0aGlzLmZpZWxkcykuZmlsdGVyKFxuICAgICAgZiA9PlxuICAgICAgICB0aGlzLmZpZWxkcyAmJlxuICAgICAgICB0aGlzLmZpZWxkc1tmXSAmJlxuICAgICAgICB0aGlzLmZpZWxkc1tmXS5wcm9wcy52YWxpZGF0ZSAmJlxuICAgICAgICBpc0Z1bmN0aW9uKHRoaXMuZmllbGRzW2ZdLnByb3BzLnZhbGlkYXRlKVxuICAgICk7XG5cbiAgICAvLyBDb25zdHJ1Y3QgYW4gYXJyYXkgd2l0aCBhbGwgb2YgdGhlIGZpZWxkIHZhbGlkYXRpb24gZnVuY3Rpb25zXG4gICAgY29uc3QgZmllbGRWYWxpZGF0aW9uczogUHJvbWlzZTxzdHJpbmc+W10gPVxuICAgICAgZmllbGRLZXlzV2l0aFZhbGlkYXRpb24ubGVuZ3RoID4gMFxuICAgICAgICA/IGZpZWxkS2V5c1dpdGhWYWxpZGF0aW9uLm1hcChmID0+XG4gICAgICAgICAgICB0aGlzLnJ1blNpbmdsZUZpZWxkTGV2ZWxWYWxpZGF0aW9uKGYsIGdldEluKHZhbHVlcywgZikpXG4gICAgICAgICAgKVxuICAgICAgICA6IFtQcm9taXNlLnJlc29sdmUoJ0RPX05PVF9ERUxFVEVfWU9VX1dJTExfQkVfRklSRUQnKV07IC8vIHVzZSBzcGVjaWFsIGNhc2UgOylcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChmaWVsZFZhbGlkYXRpb25zKS50aGVuKChmaWVsZEVycm9yc0xpc3Q6IHN0cmluZ1tdKSA9PlxuICAgICAgZmllbGRFcnJvcnNMaXN0LnJlZHVjZShcbiAgICAgICAgKHByZXYsIGN1cnIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgaWYgKGN1cnIgPT09ICdET19OT1RfREVMRVRFX1lPVV9XSUxMX0JFX0ZJUkVEJykge1xuICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghIWN1cnIpIHtcbiAgICAgICAgICAgIHByZXYgPSBzZXRJbihwcmV2LCBmaWVsZEtleXNXaXRoVmFsaWRhdGlvbltpbmRleF0sIGN1cnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgICAgfSxcbiAgICAgICAge30gYXMgRm9ybWlrRXJyb3JzPFZhbHVlcz5cbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgcnVuVmFsaWRhdGVIYW5kbGVyKHZhbHVlczogRm9ybWlrVmFsdWVzKTogUHJvbWlzZTxGb3JtaWtFcnJvcnM8VmFsdWVzPj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IG1heWJlUHJvbWlzZWRFcnJvcnMgPSAodGhpcy5wcm9wcy52YWxpZGF0ZSBhcyBhbnkpKHZhbHVlcyk7XG4gICAgICBpZiAobWF5YmVQcm9taXNlZEVycm9ycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJlc29sdmUoe30pO1xuICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UobWF5YmVQcm9taXNlZEVycm9ycykpIHtcbiAgICAgICAgKG1heWJlUHJvbWlzZWRFcnJvcnMgYXMgUHJvbWlzZTxhbnk+KS50aGVuKFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoe30pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3JzID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoZXJyb3JzKTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKG1heWJlUHJvbWlzZWRFcnJvcnMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1biB2YWxpZGF0aW9uIGFnYWluc3QgYSBZdXAgc2NoZW1hIGFuZCBvcHRpb25hbGx5IHJ1biBhIGZ1bmN0aW9uIGlmIHN1Y2Nlc3NmdWxcbiAgICovXG4gIHJ1blZhbGlkYXRpb25TY2hlbWEgPSAodmFsdWVzOiBGb3JtaWtWYWx1ZXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCB7IHZhbGlkYXRpb25TY2hlbWEgfSA9IHRoaXMucHJvcHM7XG4gICAgICBjb25zdCBzY2hlbWEgPSBpc0Z1bmN0aW9uKHZhbGlkYXRpb25TY2hlbWEpXG4gICAgICAgID8gdmFsaWRhdGlvblNjaGVtYSgpXG4gICAgICAgIDogdmFsaWRhdGlvblNjaGVtYTtcbiAgICAgIHZhbGlkYXRlWXVwU2NoZW1hKHZhbHVlcywgc2NoZW1hKS50aGVuKFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSh7fSk7XG4gICAgICAgIH0sXG4gICAgICAgIChlcnI6IGFueSkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoeXVwVG9Gb3JtRXJyb3JzKGVycikpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSdW4gYWxsIHZhbGlkYXRpb25zIG1ldGhvZHMgYW5kIHVwZGF0ZSBzdGF0ZSBhY2NvcmRpbmdseVxuICAgKi9cbiAgcnVuVmFsaWRhdGlvbnMgPSAoXG4gICAgdmFsdWVzOiBGb3JtaWtWYWx1ZXMgPSB0aGlzLnN0YXRlLnZhbHVlc1xuICApOiBQcm9taXNlPEZvcm1pa0Vycm9yczxWYWx1ZXM+PiA9PiB7XG4gICAgaWYgKHRoaXMudmFsaWRhdG9yKSB7XG4gICAgICB0aGlzLnZhbGlkYXRvcigpO1xuICAgIH1cblxuICAgIGNvbnN0IFtwcm9taXNlLCBjYW5jZWxdID0gbWFrZUNhbmNlbGFibGUoXG4gICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMucnVuRmllbGRMZXZlbFZhbGlkYXRpb25zKHZhbHVlcyksXG4gICAgICAgIHRoaXMucHJvcHMudmFsaWRhdGlvblNjaGVtYSA/IHRoaXMucnVuVmFsaWRhdGlvblNjaGVtYSh2YWx1ZXMpIDoge30sXG4gICAgICAgIHRoaXMucHJvcHMudmFsaWRhdGUgPyB0aGlzLnJ1blZhbGlkYXRlSGFuZGxlcih2YWx1ZXMpIDoge30sXG4gICAgICBdKS50aGVuKChbZmllbGRFcnJvcnMsIHNjaGVtYUVycm9ycywgaGFuZGxlckVycm9yc10pID0+IHtcbiAgICAgICAgcmV0dXJuIGRlZXBtZXJnZS5hbGw8Rm9ybWlrRXJyb3JzPFZhbHVlcz4+KFxuICAgICAgICAgIFtmaWVsZEVycm9ycywgc2NoZW1hRXJyb3JzLCBoYW5kbGVyRXJyb3JzXSxcbiAgICAgICAgICB7IGFycmF5TWVyZ2UgfVxuICAgICAgICApO1xuICAgICAgfSlcbiAgICApO1xuICAgIHRoaXMudmFsaWRhdG9yID0gY2FuY2VsO1xuICAgIHJldHVybiBwcm9taXNlXG4gICAgICAudGhlbigoZXJyb3JzOiBGb3JtaWtFcnJvcnM8VmFsdWVzPikgPT4ge1xuICAgICAgICBpZiAodGhpcy5kaWRNb3VudCkge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+IHtcbiAgICAgICAgICAgIGlmICghaXNFcXVhbChwcmV2U3RhdGUuZXJyb3JzLCBlcnJvcnMpKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7IGVycm9ycyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIGFib3J0IHRoZSB1cGRhdGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXJyb3JzO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCh4ID0+IHgpO1xuICB9O1xuXG4gIGhhbmRsZUNoYW5nZSA9IChcbiAgICBldmVudE9yUGF0aDogc3RyaW5nIHwgUmVhY3QuQ2hhbmdlRXZlbnQ8YW55PlxuICApOiB2b2lkIHwgKChldmVudE9yVmFsdWU6IHVua25vd24gfCBSZWFjdC5DaGFuZ2VFdmVudDxhbnk+KSA9PiB2b2lkKSA9PiB7XG4gICAgLy8gdGhpcyBmdW5jdGlvbiBhY3R1YWxseSBoYW5kbGVzIHRoZSBjaGFuZ2VcbiAgICBjb25zdCBleGVjdXRlQ2hhbmdlID0gKFxuICAgICAgZXZlbnRPclZhbHVlOiB1bmtub3duIHwgUmVhY3QuQ2hhbmdlRXZlbnQ8YW55PixcbiAgICAgIG1heWJlUGF0aD86IHN0cmluZ1xuICAgICkgPT4ge1xuICAgICAgLy8gVG8gYWxsb3cgdXNpbmcgaGFuZGxlQ2hhbmdlIHdpdGggUmVhY3QgTmF0aXZlIChXZWIpIG9yIG90aGVyIFVJIGxpYnJhcmllcywgd2VcbiAgICAgIC8vIGFsbG93IGZvciB0aGUgZmlyc3QgYXJndW1lbnQgdG8gYmUgZWl0aGVyIGEgdmFsdWUgb3IgdGhlIHN0YW5kYXJkIGNoYW5nZSBldmVudC5cbiAgICAgIGxldCBmaWVsZCA9IG1heWJlUGF0aDtcbiAgICAgIGxldCB2YWx1ZTogdW5rbm93bjtcbiAgICAgIGlmIChpc0lucHV0RXZlbnQoZXZlbnRPclZhbHVlKSkge1xuICAgICAgICBjb25zdCBldmVudCA9IGV2ZW50T3JWYWx1ZSBhcyBSZWFjdC5DaGFuZ2VFdmVudDxhbnk+O1xuICAgICAgICAvLyBJZiB3ZSBjYW4sIHBlcnNpc3QgdGhlIGV2ZW50LCBodHRwczovL3JlYWN0anMub3JnL2RvY3MvZXZlbnRzLmh0bWwjZXZlbnQtcG9vbGluZ1xuICAgICAgICBpZiAoZXZlbnQucGVyc2lzdCkge1xuICAgICAgICAgIGV2ZW50LnBlcnNpc3QoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHR5cGUsIG5hbWUsIGlkLCBjaGVja2VkLCBvdXRlckhUTUwgfSA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgZmllbGQgPSBtYXliZVBhdGggPyBtYXliZVBhdGggOiBuYW1lID8gbmFtZSA6IGlkO1xuICAgICAgICBpZiAoIWZpZWxkICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICB3YXJuQWJvdXRNaXNzaW5nSWRlbnRpZmllcih7XG4gICAgICAgICAgICBodG1sQ29udGVudDogb3V0ZXJIVE1MLFxuICAgICAgICAgICAgZG9jdW1lbnRhdGlvbkFuY2hvckxpbms6ICdoYW5kbGVjaGFuZ2UtZS1yZWFjdGNoYW5nZWV2ZW50YW55LS12b2lkJyxcbiAgICAgICAgICAgIGhhbmRsZXJOYW1lOiAnaGFuZGxlQ2hhbmdlJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgICAgaWYgKC9udW1iZXJ8cmFuZ2UvLnRlc3QodHlwZSkpIHtcbiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUZsb2F0KGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgdmFsdWUgPSBpc05hTihwYXJzZWQpID8gJycgOiBwYXJzZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKC9jaGVja2JveC8udGVzdCh0eXBlKSkge1xuICAgICAgICAgIHZhbHVlID0gY2hlY2tlZDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBldmVudE9yVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWVsZCkge1xuICAgICAgICAvLyBTZXQgZm9ybSBmaWVsZHMgYnkgbmFtZVxuICAgICAgICB0aGlzLnNldFN0YXRlKFxuICAgICAgICAgIHByZXZTdGF0ZSA9PiAoe1xuICAgICAgICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgICAgICAgdmFsdWVzOiBzZXRJbihwcmV2U3RhdGUudmFsdWVzLCBmaWVsZCEsIHZhbHVlKSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0ZU9uQ2hhbmdlKSB7XG4gICAgICAgICAgICAgIHRoaXMucnVuVmFsaWRhdGlvbnMoc2V0SW4odGhpcy5zdGF0ZS52YWx1ZXMsIGZpZWxkISwgdmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIEFjdHVhbGx5IGV4ZWN1dGUgbG9naWMgYWJvdmUuLi4uXG4gICAgaWYgKGlzU3RyaW5nKGV2ZW50T3JQYXRoKSkge1xuICAgICAgY29uc3QgcGF0aCA9IGV2ZW50T3JQYXRoO1xuICAgICAgLy8gY2FjaGUgdGhlc2UgaGFuZGxlcnMgYnkga2V5IGxpa2UgUHJlYWN0J3MgbGlua1N0YXRlIGRvZXMgZm9yIHBlcmYgYm9vc3RcbiAgICAgIGlmICghaXNGdW5jdGlvbih0aGlzLmhjQ2FjaGVbcGF0aF0pKSB7XG4gICAgICAgIC8vIHNldCBhIG5ldyBoYW5kbGUgZnVuY3Rpb24gaW4gY2FjaGVcbiAgICAgICAgdGhpcy5oY0NhY2hlW3BhdGhdID0gKGV2ZW50T3JWYWx1ZTogdW5rbm93biB8IFJlYWN0LkNoYW5nZUV2ZW50PGFueT4pID0+XG4gICAgICAgICAgZXhlY3V0ZUNoYW5nZShldmVudE9yVmFsdWUsIHBhdGgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuaGNDYWNoZVtwYXRoXTsgLy8gcmV0dXJuIHRoZSBjYWNoZWQgZnVuY3Rpb25cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZXZlbnQgPSBldmVudE9yUGF0aDtcbiAgICAgIGV4ZWN1dGVDaGFuZ2UoZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICBzZXRGaWVsZFZhbHVlID0gKFxuICAgIGZpZWxkOiBzdHJpbmcsXG4gICAgdmFsdWU6IGFueSxcbiAgICBzaG91bGRWYWxpZGF0ZTogYm9vbGVhbiA9IHRydWVcbiAgKSA9PiB7XG4gICAgaWYgKHRoaXMuZGlkTW91bnQpIHtcbiAgICAgIC8vIFNldCBmb3JtIGZpZWxkIGJ5IG5hbWVcbiAgICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICAgIHByZXZTdGF0ZSA9PiAoe1xuICAgICAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgICAgICB2YWx1ZXM6IHNldEluKHByZXZTdGF0ZS52YWx1ZXMsIGZpZWxkLCB2YWx1ZSksXG4gICAgICAgIH0pLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGVPbkNoYW5nZSAmJiBzaG91bGRWYWxpZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5ydW5WYWxpZGF0aW9ucyh0aGlzLnN0YXRlLnZhbHVlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICBoYW5kbGVTdWJtaXQgPSAoZTogUmVhY3QuRm9ybUV2ZW50PEhUTUxGb3JtRWxlbWVudD4gfCB1bmRlZmluZWQpID0+IHtcbiAgICBpZiAoZSAmJiBlLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgLy8gV2FybiBpZiBmb3JtIHN1Ym1pc3Npb24gaXMgdHJpZ2dlcmVkIGJ5IGEgPGJ1dHRvbj4gd2l0aG91dCBhXG4gICAgLy8gc3BlY2lmaWVkIGB0eXBlYCBhdHRyaWJ1dGUgZHVyaW5nIGRldmVsb3BtZW50LiBUaGlzIG1pdGlnYXRlc1xuICAgIC8vIGEgY29tbW9uIGdvdGNoYSBpbiBmb3JtcyB3aXRoIGJvdGggcmVzZXQgYW5kIHN1Ym1pdCBidXR0b25zLFxuICAgIC8vIHdoZXJlIHRoZSBkZXYgZm9yZ2V0cyB0byBhZGQgdHlwZT1cImJ1dHRvblwiIHRvIHRoZSByZXNldCBidXR0b24uXG4gICAgaWYgKFxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgLy8gU2FmZWx5IGdldCB0aGUgYWN0aXZlIGVsZW1lbnQgKHdvcmtzIHdpdGggSUUpXG4gICAgICBjb25zdCBhY3RpdmVFbGVtZW50ID0gZ2V0QWN0aXZlRWxlbWVudCgpO1xuICAgICAgaWYgKFxuICAgICAgICBhY3RpdmVFbGVtZW50ICE9PSBudWxsICYmXG4gICAgICAgIGFjdGl2ZUVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MQnV0dG9uRWxlbWVudFxuICAgICAgKSB7XG4gICAgICAgIHdhcm5pbmcoXG4gICAgICAgICAgISEoXG4gICAgICAgICAgICBhY3RpdmVFbGVtZW50LmF0dHJpYnV0ZXMgJiZcbiAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oJ3R5cGUnKVxuICAgICAgICAgICksXG4gICAgICAgICAgJ1lvdSBzdWJtaXR0ZWQgYSBGb3JtaWsgZm9ybSB1c2luZyBhIGJ1dHRvbiB3aXRoIGFuIHVuc3BlY2lmaWVkIGB0eXBlYCBhdHRyaWJ1dGUuICBNb3N0IGJyb3dzZXJzIGRlZmF1bHQgYnV0dG9uIGVsZW1lbnRzIHRvIGB0eXBlPVwic3VibWl0XCJgLiBJZiB0aGlzIGlzIG5vdCBhIHN1Ym1pdCBidXR0b24sIHBsZWFzZSBhZGQgYHR5cGU9XCJidXR0b25cImAuJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc3VibWl0Rm9ybSgpO1xuICB9O1xuXG4gIHN1Ym1pdEZvcm0gPSAoKSA9PiB7XG4gICAgLy8gUmVjdXJzaXZlbHkgc2V0IGFsbCB2YWx1ZXMgdG8gYHRydWVgLlxuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICB0b3VjaGVkOiBzZXROZXN0ZWRPYmplY3RWYWx1ZXM8Rm9ybWlrVG91Y2hlZDxWYWx1ZXM+PihcbiAgICAgICAgcHJldlN0YXRlLnZhbHVlcyxcbiAgICAgICAgdHJ1ZVxuICAgICAgKSxcbiAgICAgIGlzU3VibWl0dGluZzogdHJ1ZSxcbiAgICAgIGlzVmFsaWRhdGluZzogdHJ1ZSxcbiAgICAgIHN1Ym1pdENvdW50OiBwcmV2U3RhdGUuc3VibWl0Q291bnQgKyAxLFxuICAgIH0pKTtcblxuICAgIHJldHVybiB0aGlzLnJ1blZhbGlkYXRpb25zKHRoaXMuc3RhdGUudmFsdWVzKS50aGVuKGNvbWJpbmVkRXJyb3JzID0+IHtcbiAgICAgIGlmICh0aGlzLmRpZE1vdW50KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc1ZhbGlkYXRpbmc6IGZhbHNlIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgaXNWYWxpZCA9IE9iamVjdC5rZXlzKGNvbWJpbmVkRXJyb3JzKS5sZW5ndGggPT09IDA7XG4gICAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgICB0aGlzLmV4ZWN1dGVTdWJtaXQoKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kaWRNb3VudCkge1xuICAgICAgICAvLyBeXl4gTWFrZSBzdXJlIEZvcm1payBpcyBzdGlsbCBtb3VudGVkIGJlZm9yZSBjYWxsaW5nIHNldFN0YXRlXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc1N1Ym1pdHRpbmc6IGZhbHNlIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIGV4ZWN1dGVTdWJtaXQgPSAoKSA9PiB7XG4gICAgdGhpcy5wcm9wcy5vblN1Ym1pdCh0aGlzLnN0YXRlLnZhbHVlcywgdGhpcy5nZXRGb3JtaWtBY3Rpb25zKCkpO1xuICB9O1xuXG4gIGhhbmRsZUJsdXIgPSAoXG4gICAgZXZlbnRPclBhdGg6IHN0cmluZyB8IFJlYWN0LkZvY3VzRXZlbnQ8YW55PlxuICApOiB2b2lkIHwgKChlPzogUmVhY3QuRm9jdXNFdmVudDxhbnk+KSA9PiB2b2lkKSA9PiB7XG4gICAgY29uc3QgZXhlY3V0ZUJsdXIgPSAoXG4gICAgICBtYXliZUV2ZW50PzogUmVhY3QuRm9jdXNFdmVudDxhbnk+LFxuICAgICAgbWF5YmVQYXRoPzogc3RyaW5nXG4gICAgKSA9PiB7XG4gICAgICBsZXQgZmllbGQgPSBtYXliZVBhdGg7XG4gICAgICBpZiAoaXNJbnB1dEV2ZW50KG1heWJlRXZlbnQpKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbWF5YmVFdmVudCBhcyBSZWFjdC5Gb2N1c0V2ZW50PGFueT47XG4gICAgICAgIC8vIElmIHdlIGNhbiwgcGVyc2lzdCB0aGUgZXZlbnQsIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9ldmVudHMuaHRtbCNldmVudC1wb29saW5nXG4gICAgICAgIGlmIChldmVudC5wZXJzaXN0KSB7XG4gICAgICAgICAgZXZlbnQucGVyc2lzdCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgaWQsIG91dGVySFRNTCB9ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBmaWVsZCA9IG5hbWUgPyBuYW1lIDogaWQ7XG4gICAgICAgIGlmICghZmllbGQgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIHdhcm5BYm91dE1pc3NpbmdJZGVudGlmaWVyKHtcbiAgICAgICAgICAgIGh0bWxDb250ZW50OiBvdXRlckhUTUwsXG4gICAgICAgICAgICBkb2N1bWVudGF0aW9uQW5jaG9yTGluazogJ2hhbmRsZWJsdXItZS1yZWFjdGZvY3VzZXZlbnRhbnktLXZvaWQnLFxuICAgICAgICAgICAgaGFuZGxlck5hbWU6ICdoYW5kbGVCbHVyJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgICB0b3VjaGVkOiBzZXRJbihwcmV2U3RhdGUudG91Y2hlZCwgZmllbGQhLCB0cnVlKSxcbiAgICAgIH0pKTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGVPbkJsdXIpIHtcbiAgICAgICAgdGhpcy5ydW5WYWxpZGF0aW9ucyh0aGlzLnN0YXRlLnZhbHVlcyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAoaXNTdHJpbmcoZXZlbnRPclBhdGgpKSB7XG4gICAgICBjb25zdCBwYXRoID0gZXZlbnRPclBhdGg7XG4gICAgICAvLyBjYWNoZSB0aGVzZSBoYW5kbGVycyBieSBrZXkgbGlrZSBQcmVhY3QncyBsaW5rU3RhdGUgZG9lcyBmb3IgcGVyZiBib29zdFxuICAgICAgaWYgKCFpc0Z1bmN0aW9uKHRoaXMuaGJDYWNoZVtwYXRoXSkpIHtcbiAgICAgICAgLy8gc2V0IGEgbmV3IGhhbmRsZSBmdW5jdGlvbiBpbiBjYWNoZVxuICAgICAgICB0aGlzLmhiQ2FjaGVbcGF0aF0gPSAoZXZlbnQ/OiBSZWFjdC5Gb2N1c0V2ZW50PGFueT4pID0+XG4gICAgICAgICAgZXhlY3V0ZUJsdXIoZXZlbnQsIHBhdGgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuaGJDYWNoZVtwYXRoXTsgLy8gcmV0dXJuIHRoZSBjYWNoZWQgZnVuY3Rpb25cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZXZlbnQgPSBldmVudE9yUGF0aDtcbiAgICAgIGV4ZWN1dGVCbHVyKGV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RmllbGRUb3VjaGVkID0gKFxuICAgIGZpZWxkOiBzdHJpbmcsXG4gICAgdG91Y2hlZDogYm9vbGVhbiA9IHRydWUsXG4gICAgc2hvdWxkVmFsaWRhdGU6IGJvb2xlYW4gPSB0cnVlXG4gICkgPT4ge1xuICAgIC8vIFNldCB0b3VjaGVkIGZpZWxkIGJ5IG5hbWVcbiAgICB0aGlzLnNldFN0YXRlKFxuICAgICAgcHJldlN0YXRlID0+ICh7XG4gICAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgICAgdG91Y2hlZDogc2V0SW4ocHJldlN0YXRlLnRvdWNoZWQsIGZpZWxkLCB0b3VjaGVkKSxcbiAgICAgIH0pLFxuICAgICAgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0ZU9uQmx1ciAmJiBzaG91bGRWYWxpZGF0ZSkge1xuICAgICAgICAgIHRoaXMucnVuVmFsaWRhdGlvbnModGhpcy5zdGF0ZS52YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfTtcblxuICBzZXRGaWVsZEVycm9yID0gKGZpZWxkOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCkgPT4ge1xuICAgIC8vIFNldCBmb3JtIGZpZWxkIGJ5IG5hbWVcbiAgICB0aGlzLnNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgZXJyb3JzOiBzZXRJbihwcmV2U3RhdGUuZXJyb3JzLCBmaWVsZCwgbWVzc2FnZSksXG4gICAgfSkpO1xuICB9O1xuXG4gIHJlc2V0Rm9ybSA9IChuZXh0VmFsdWVzPzogVmFsdWVzKSA9PiB7XG4gICAgY29uc3QgdmFsdWVzID0gbmV4dFZhbHVlcyA/IG5leHRWYWx1ZXMgOiB0aGlzLnByb3BzLmluaXRpYWxWYWx1ZXM7XG5cbiAgICB0aGlzLmluaXRpYWxWYWx1ZXMgPSB2YWx1ZXM7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGlzU3VibWl0dGluZzogZmFsc2UsXG4gICAgICBpc1ZhbGlkYXRpbmc6IGZhbHNlLFxuICAgICAgZXJyb3JzOiB7fSxcbiAgICAgIHRvdWNoZWQ6IHt9LFxuICAgICAgZXJyb3I6IHVuZGVmaW5lZCxcbiAgICAgIHN0YXR1czogdGhpcy5wcm9wcy5pbml0aWFsU3RhdHVzLFxuICAgICAgdmFsdWVzLFxuICAgICAgc3VibWl0Q291bnQ6IDAsXG4gICAgfSk7XG4gIH07XG5cbiAgaGFuZGxlUmVzZXQgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMucHJvcHMub25SZXNldCkge1xuICAgICAgY29uc3QgbWF5YmVQcm9taXNlZE9uUmVzZXQgPSAodGhpcy5wcm9wcy5vblJlc2V0IGFzIGFueSkoXG4gICAgICAgIHRoaXMuc3RhdGUudmFsdWVzLFxuICAgICAgICB0aGlzLmdldEZvcm1pa0FjdGlvbnMoKVxuICAgICAgKTtcblxuICAgICAgaWYgKGlzUHJvbWlzZShtYXliZVByb21pc2VkT25SZXNldCkpIHtcbiAgICAgICAgKG1heWJlUHJvbWlzZWRPblJlc2V0IGFzIFByb21pc2U8YW55PikudGhlbih0aGlzLnJlc2V0Rm9ybSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlc2V0Rm9ybSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlc2V0Rm9ybSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRGb3JtaWtTdGF0ZSA9IChzOiBhbnksIGNhbGxiYWNrPzogKCgpID0+IHZvaWQpKSA9PlxuICAgIHRoaXMuc2V0U3RhdGUocywgY2FsbGJhY2spO1xuXG4gIHZhbGlkYXRlRm9ybSA9ICh2YWx1ZXM6IFZhbHVlcykgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBpc1ZhbGlkYXRpbmc6IHRydWUgfSk7XG4gICAgcmV0dXJuIHRoaXMucnVuVmFsaWRhdGlvbnModmFsdWVzKS50aGVuKGVycm9ycyA9PiB7XG4gICAgICBpZiAodGhpcy5kaWRNb3VudCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNWYWxpZGF0aW5nOiBmYWxzZSB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfSk7XG4gIH07XG5cbiAgZ2V0Rm9ybWlrQWN0aW9ucyA9ICgpOiBGb3JtaWtBY3Rpb25zPFZhbHVlcz4gPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByZXNldEZvcm06IHRoaXMucmVzZXRGb3JtLFxuICAgICAgc3VibWl0Rm9ybTogdGhpcy5zdWJtaXRGb3JtLFxuICAgICAgdmFsaWRhdGVGb3JtOiB0aGlzLnZhbGlkYXRlRm9ybSxcbiAgICAgIHZhbGlkYXRlRmllbGQ6IHRoaXMudmFsaWRhdGVGaWVsZCxcbiAgICAgIHNldEVycm9yOiB0aGlzLnNldEVycm9yLFxuICAgICAgc2V0RXJyb3JzOiB0aGlzLnNldEVycm9ycyxcbiAgICAgIHNldEZpZWxkRXJyb3I6IHRoaXMuc2V0RmllbGRFcnJvcixcbiAgICAgIHNldEZpZWxkVG91Y2hlZDogdGhpcy5zZXRGaWVsZFRvdWNoZWQsXG4gICAgICBzZXRGaWVsZFZhbHVlOiB0aGlzLnNldEZpZWxkVmFsdWUsXG4gICAgICBzZXRTdGF0dXM6IHRoaXMuc2V0U3RhdHVzLFxuICAgICAgc2V0U3VibWl0dGluZzogdGhpcy5zZXRTdWJtaXR0aW5nLFxuICAgICAgc2V0VG91Y2hlZDogdGhpcy5zZXRUb3VjaGVkLFxuICAgICAgc2V0VmFsdWVzOiB0aGlzLnNldFZhbHVlcyxcbiAgICAgIHNldEZvcm1pa1N0YXRlOiB0aGlzLnNldEZvcm1pa1N0YXRlLFxuICAgIH07XG4gIH07XG5cbiAgZ2V0Rm9ybWlrQ29tcHV0ZWRQcm9wcyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGlzSW5pdGlhbFZhbGlkIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGRpcnR5ID0gIWlzRXF1YWwodGhpcy5pbml0aWFsVmFsdWVzLCB0aGlzLnN0YXRlLnZhbHVlcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpcnR5LFxuICAgICAgaXNWYWxpZDogZGlydHlcbiAgICAgICAgPyB0aGlzLnN0YXRlLmVycm9ycyAmJiBPYmplY3Qua2V5cyh0aGlzLnN0YXRlLmVycm9ycykubGVuZ3RoID09PSAwXG4gICAgICAgIDogaXNJbml0aWFsVmFsaWQgIT09IGZhbHNlICYmIGlzRnVuY3Rpb24oaXNJbml0aWFsVmFsaWQpXG4gICAgICAgICAgPyAoaXNJbml0aWFsVmFsaWQgYXMgKHByb3BzOiB0aGlzWydwcm9wcyddKSA9PiBib29sZWFuKSh0aGlzLnByb3BzKVxuICAgICAgICAgIDogKGlzSW5pdGlhbFZhbGlkIGFzIGJvb2xlYW4pLFxuICAgICAgaW5pdGlhbFZhbHVlczogdGhpcy5pbml0aWFsVmFsdWVzLFxuICAgIH07XG4gIH07XG5cbiAgZ2V0Rm9ybWlrQmFnID0gKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLnN0YXRlLFxuICAgICAgLi4udGhpcy5nZXRGb3JtaWtBY3Rpb25zKCksXG4gICAgICAuLi50aGlzLmdldEZvcm1pa0NvbXB1dGVkUHJvcHMoKSxcbiAgICAgIC8vIEZpZWxkIG5lZWRzIHRvIGNvbW11bmljYXRlIHdpdGggRm9ybWlrIGR1cmluZyByZXNldHNcbiAgICAgIHJlZ2lzdGVyRmllbGQ6IHRoaXMucmVnaXN0ZXJGaWVsZCxcbiAgICAgIHVucmVnaXN0ZXJGaWVsZDogdGhpcy51bnJlZ2lzdGVyRmllbGQsXG4gICAgICBoYW5kbGVCbHVyOiB0aGlzLmhhbmRsZUJsdXIsXG4gICAgICBoYW5kbGVDaGFuZ2U6IHRoaXMuaGFuZGxlQ2hhbmdlLFxuICAgICAgaGFuZGxlUmVzZXQ6IHRoaXMuaGFuZGxlUmVzZXQsXG4gICAgICBoYW5kbGVTdWJtaXQ6IHRoaXMuaGFuZGxlU3VibWl0LFxuICAgICAgdmFsaWRhdGVPbkNoYW5nZTogdGhpcy5wcm9wcy52YWxpZGF0ZU9uQ2hhbmdlLFxuICAgICAgdmFsaWRhdGVPbkJsdXI6IHRoaXMucHJvcHMudmFsaWRhdGVPbkJsdXIsXG4gICAgfTtcbiAgfTtcblxuICBnZXRGb3JtaWtDb250ZXh0ID0gKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLmdldEZvcm1pa0JhZygpLFxuICAgICAgdmFsaWRhdGlvblNjaGVtYTogdGhpcy5wcm9wcy52YWxpZGF0aW9uU2NoZW1hLFxuICAgICAgdmFsaWRhdGU6IHRoaXMucHJvcHMudmFsaWRhdGUsXG4gICAgICBpbml0aWFsVmFsdWVzOiB0aGlzLmluaXRpYWxWYWx1ZXMsXG4gICAgfTtcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBjb21wb25lbnQsIHJlbmRlciwgY2hpbGRyZW4gfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLmdldEZvcm1pa0JhZygpO1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuZ2V0Rm9ybWlrQ29udGV4dCgpO1xuICAgIHJldHVybiAoXG4gICAgICA8Rm9ybWlrUHJvdmlkZXIgdmFsdWU9e2N0eH0+XG4gICAgICAgIHtjb21wb25lbnRcbiAgICAgICAgICA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50IGFzIGFueSwgcHJvcHMpXG4gICAgICAgICAgOiByZW5kZXJcbiAgICAgICAgICAgID8gcmVuZGVyKHByb3BzKVxuICAgICAgICAgICAgOiBjaGlsZHJlbiAvLyBjaGlsZHJlbiBjb21lIGxhc3QsIGFsd2F5cyBjYWxsZWRcbiAgICAgICAgICAgICAgPyBpc0Z1bmN0aW9uKGNoaWxkcmVuKVxuICAgICAgICAgICAgICAgID8gKGNoaWxkcmVuIGFzICgoXG4gICAgICAgICAgICAgICAgICAgIHByb3BzOiBGb3JtaWtQcm9wczxWYWx1ZXM+XG4gICAgICAgICAgICAgICAgICApID0+IFJlYWN0LlJlYWN0Tm9kZSkpKHByb3BzIGFzIEZvcm1pa1Byb3BzPFZhbHVlcz4pXG4gICAgICAgICAgICAgICAgOiAhaXNFbXB0eUNoaWxkcmVuKGNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgPyBSZWFjdC5DaGlsZHJlbi5vbmx5KGNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICAgIDogbnVsbH1cbiAgICAgIDwvRm9ybWlrUHJvdmlkZXI+XG4gICAgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3YXJuQWJvdXRNaXNzaW5nSWRlbnRpZmllcih7XG4gIGh0bWxDb250ZW50LFxuICBkb2N1bWVudGF0aW9uQW5jaG9yTGluayxcbiAgaGFuZGxlck5hbWUsXG59OiB7XG4gIGh0bWxDb250ZW50OiBzdHJpbmc7XG4gIGRvY3VtZW50YXRpb25BbmNob3JMaW5rOiBzdHJpbmc7XG4gIGhhbmRsZXJOYW1lOiBzdHJpbmc7XG59KSB7XG4gIGNvbnNvbGUud2FybihcbiAgICBgV2FybmluZzogRm9ybWlrIGNhbGxlZCBcXGAke2hhbmRsZXJOYW1lfVxcYCwgYnV0IHlvdSBmb3Jnb3QgdG8gcGFzcyBhbiBcXGBpZFxcYCBvciBcXGBuYW1lXFxgIGF0dHJpYnV0ZSB0byB5b3VyIGlucHV0OlxuXG4gICAgJHtodG1sQ29udGVudH1cblxuICAgIEZvcm1payBjYW5ub3QgZGV0ZXJtaW5lIHdoaWNoIHZhbHVlIHRvIHVwZGF0ZS4gRm9yIG1vcmUgaW5mbyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2phcmVkcGFsbWVyL2Zvcm1payMke2RvY3VtZW50YXRpb25BbmNob3JMaW5rfVxuICBgXG4gICk7XG59XG5cbi8qKlxuICogVHJhbnNmb3JtIFl1cCBWYWxpZGF0aW9uRXJyb3IgdG8gYSBtb3JlIHVzYWJsZSBvYmplY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHl1cFRvRm9ybUVycm9yczxWYWx1ZXM+KHl1cEVycm9yOiBhbnkpOiBGb3JtaWtFcnJvcnM8VmFsdWVzPiB7XG4gIGxldCBlcnJvcnM6IGFueSA9IHt9IGFzIEZvcm1pa0Vycm9yczxWYWx1ZXM+O1xuICBpZiAoeXVwRXJyb3IuaW5uZXIubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHNldEluKGVycm9ycywgeXVwRXJyb3IucGF0aCwgeXVwRXJyb3IubWVzc2FnZSk7XG4gIH1cbiAgZm9yIChsZXQgZXJyIG9mIHl1cEVycm9yLmlubmVyKSB7XG4gICAgaWYgKCFlcnJvcnNbZXJyLnBhdGhdKSB7XG4gICAgICBlcnJvcnMgPSBzZXRJbihlcnJvcnMsIGVyci5wYXRoLCBlcnIubWVzc2FnZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBlcnJvcnM7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgYSB5dXAgc2NoZW1hLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVZdXBTY2hlbWE8VCBleHRlbmRzIEZvcm1pa1ZhbHVlcz4oXG4gIHZhbHVlczogVCxcbiAgc2NoZW1hOiBhbnksXG4gIHN5bmM6IGJvb2xlYW4gPSBmYWxzZSxcbiAgY29udGV4dDogYW55ID0ge31cbik6IFByb21pc2U8UGFydGlhbDxUPj4ge1xuICBsZXQgdmFsaWRhdGVEYXRhOiBQYXJ0aWFsPFQ+ID0ge307XG4gIGZvciAobGV0IGsgaW4gdmFsdWVzKSB7XG4gICAgaWYgKHZhbHVlcy5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgY29uc3Qga2V5ID0gU3RyaW5nKGspO1xuICAgICAgdmFsaWRhdGVEYXRhW2tleV0gPSB2YWx1ZXNba2V5XSAhPT0gJycgPyB2YWx1ZXNba2V5XSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNjaGVtYVtzeW5jID8gJ3ZhbGlkYXRlU3luYycgOiAndmFsaWRhdGUnXSh2YWxpZGF0ZURhdGEsIHtcbiAgICBhYm9ydEVhcmx5OiBmYWxzZSxcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICB9KTtcbn1cblxuLyoqXG4gKiBkZWVwbWVyZ2UgYXJyYXkgbWVyZ2luZyBhbGdvcml0aG1cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9LeWxlQU1hdGhld3MvZGVlcG1lcmdlI2NvbWJpbmUtYXJyYXlcbiAqL1xuZnVuY3Rpb24gYXJyYXlNZXJnZSh0YXJnZXQ6IGFueVtdLCBzb3VyY2U6IGFueVtdLCBvcHRpb25zOiBhbnkpOiBhbnlbXSB7XG4gIGNvbnN0IGRlc3RpbmF0aW9uID0gdGFyZ2V0LnNsaWNlKCk7XG5cbiAgc291cmNlLmZvckVhY2goZnVuY3Rpb24oZTogYW55LCBpOiBudW1iZXIpIHtcbiAgICBpZiAodHlwZW9mIGRlc3RpbmF0aW9uW2ldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgY2xvbmVSZXF1ZXN0ZWQgPSBvcHRpb25zLmNsb25lICE9PSBmYWxzZTtcbiAgICAgIGNvbnN0IHNob3VsZENsb25lID0gY2xvbmVSZXF1ZXN0ZWQgJiYgb3B0aW9ucy5pc01lcmdlYWJsZU9iamVjdChlKTtcbiAgICAgIGRlc3RpbmF0aW9uW2ldID0gc2hvdWxkQ2xvbmVcbiAgICAgICAgPyBkZWVwbWVyZ2UoQXJyYXkuaXNBcnJheShlKSA/IFtdIDoge30sIGUsIG9wdGlvbnMpXG4gICAgICAgIDogZTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuaXNNZXJnZWFibGVPYmplY3QoZSkpIHtcbiAgICAgIGRlc3RpbmF0aW9uW2ldID0gZGVlcG1lcmdlKHRhcmdldFtpXSwgZSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIGlmICh0YXJnZXQuaW5kZXhPZihlKSA9PT0gLTEpIHtcbiAgICAgIGRlc3RpbmF0aW9uLnB1c2goZSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGRlc3RpbmF0aW9uO1xufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAnLi9jb25uZWN0JztcbmltcG9ydCB7XG4gIEZvcm1pa1Byb3BzLFxuICBHZW5lcmljRmllbGRIVE1MQXR0cmlidXRlcyxcbiAgRm9ybWlrQ29udGV4dCxcbiAgRm9ybWlrSGFuZGxlcnMsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSAndGlueS13YXJuaW5nJztcbmltcG9ydCB7IGdldEluLCBpc0VtcHR5Q2hpbGRyZW4sIGlzRnVuY3Rpb24gfSBmcm9tICcuL3V0aWxzJztcblxuLyoqXG4gKiBOb3RlOiBUaGVzZSB0eXBpbmdzIGNvdWxkIGJlIG1vcmUgcmVzdHJpY3RpdmUsIGJ1dCB0aGVuIGl0IHdvdWxkIGxpbWl0IHRoZVxuICogcmV1c2FiaWxpdHkgb2YgY3VzdG9tIDxGaWVsZC8+IGNvbXBvbmVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGludGVyZmFjZSBNeVByb3BzIHtcbiAqICAgLi4uXG4gKiB9XG4gKlxuICogZXhwb3J0IGNvbnN0IE15SW5wdXQ6IFJlYWN0LlNGQzxNeVByb3BzICYgRmllbGRQcm9wcz4gPSAoe1xuICogICBmaWVsZCxcbiAqICAgZm9ybSxcbiAqICAgLi4ucHJvcHNcbiAqIH0pID0+XG4gKiAgIDxkaXY+XG4gKiAgICAgPGlucHV0IHsuLi5maWVsZH0gey4uLnByb3BzfS8+XG4gKiAgICAge2Zvcm0udG91Y2hlZFtmaWVsZC5uYW1lXSAmJiBmb3JtLmVycm9yc1tmaWVsZC5uYW1lXX1cbiAqICAgPC9kaXY+XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmllbGRQcm9wczxWID0gYW55PiB7XG4gIGZpZWxkOiB7XG4gICAgLyoqIENsYXNzaWMgUmVhY3QgY2hhbmdlIGhhbmRsZXIsIGtleWVkIGJ5IGlucHV0IG5hbWUgKi9cbiAgICBvbkNoYW5nZTogRm9ybWlrSGFuZGxlcnNbJ2hhbmRsZUNoYW5nZSddO1xuICAgIC8qKiBNYXJrIGlucHV0IGFzIHRvdWNoZWQgKi9cbiAgICBvbkJsdXI6IEZvcm1pa0hhbmRsZXJzWydoYW5kbGVCbHVyJ107XG4gICAgLyoqIFZhbHVlIG9mIHRoZSBpbnB1dCAqL1xuICAgIHZhbHVlOiBhbnk7XG4gICAgLyogbmFtZSBvZiB0aGUgaW5wdXQgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG4gIH07XG4gIGZvcm06IEZvcm1pa1Byb3BzPFY+OyAvLyBpZiBwcGwgd2FudCB0byByZXN0cmljdCB0aGlzIGZvciBhIGdpdmVuIGZvcm0sIGxldCB0aGVtLlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkQ29uZmlnIHtcbiAgLyoqXG4gICAqIEZpZWxkIGNvbXBvbmVudCB0byByZW5kZXIuIENhbiBlaXRoZXIgYmUgYSBzdHJpbmcgbGlrZSAnc2VsZWN0JyBvciBhIGNvbXBvbmVudC5cbiAgICovXG4gIGNvbXBvbmVudD86XG4gICAgfCBzdHJpbmdcbiAgICB8IFJlYWN0LkNvbXBvbmVudFR5cGU8RmllbGRQcm9wczxhbnk+PlxuICAgIHwgUmVhY3QuQ29tcG9uZW50VHlwZTx2b2lkPjtcblxuICAvKipcbiAgICogUmVuZGVyIHByb3AgKHdvcmtzIGxpa2UgUmVhY3Qgcm91dGVyJ3MgPFJvdXRlIHJlbmRlcj17cHJvcHMgPT59IC8+KVxuICAgKi9cbiAgcmVuZGVyPzogKChwcm9wczogRmllbGRQcm9wczxhbnk+KSA9PiBSZWFjdC5SZWFjdE5vZGUpO1xuXG4gIC8qKlxuICAgKiBDaGlsZHJlbiByZW5kZXIgZnVuY3Rpb24gPEZpZWxkIG5hbWU+e3Byb3BzID0+IC4uLn08L0ZpZWxkPilcbiAgICovXG4gIGNoaWxkcmVuPzogKChwcm9wczogRmllbGRQcm9wczxhbnk+KSA9PiBSZWFjdC5SZWFjdE5vZGUpIHwgUmVhY3QuUmVhY3ROb2RlO1xuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBhIHNpbmdsZSBmaWVsZCB2YWx1ZSBpbmRlcGVuZGVudGx5XG4gICAqL1xuICB2YWxpZGF0ZT86ICgodmFsdWU6IGFueSkgPT4gc3RyaW5nIHwgUHJvbWlzZTx2b2lkPiB8IHVuZGVmaW5lZCk7XG5cbiAgLyoqXG4gICAqIEZpZWxkIG5hbWVcbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICAvKiogSFRNTCBpbnB1dCB0eXBlICovXG4gIHR5cGU/OiBzdHJpbmc7XG5cbiAgLyoqIEZpZWxkIHZhbHVlICovXG4gIHZhbHVlPzogYW55O1xuXG4gIC8qKiBJbm5lciByZWYgKi9cbiAgaW5uZXJSZWY/OiAoaW5zdGFuY2U6IGFueSkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IHR5cGUgRmllbGRBdHRyaWJ1dGVzPFQ+ID0gR2VuZXJpY0ZpZWxkSFRNTEF0dHJpYnV0ZXMgJiBGaWVsZENvbmZpZyAmIFQ7XG5cbi8qKlxuICogQ3VzdG9tIEZpZWxkIGNvbXBvbmVudCBmb3IgcXVpY2tseSBob29raW5nIGludG8gRm9ybWlrXG4gKiBjb250ZXh0IGFuZCB3aXJpbmcgdXAgZm9ybXMuXG4gKi9cbmNsYXNzIEZpZWxkSW5uZXI8VmFsdWVzID0ge30sIFByb3BzID0ge30+IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFxuICBGaWVsZEF0dHJpYnV0ZXM8UHJvcHM+ICYgeyBmb3JtaWs6IEZvcm1pa0NvbnRleHQ8VmFsdWVzPiB9LFxuICB7fVxuPiB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3BzOiBGaWVsZEF0dHJpYnV0ZXM8UHJvcHM+ICYgeyBmb3JtaWs6IEZvcm1pa0NvbnRleHQ8VmFsdWVzPiB9XG4gICkge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBjb25zdCB7IHJlbmRlciwgY2hpbGRyZW4sIGNvbXBvbmVudCB9ID0gcHJvcHM7XG4gICAgd2FybmluZyhcbiAgICAgICEoY29tcG9uZW50ICYmIHJlbmRlciksXG4gICAgICAnWW91IHNob3VsZCBub3QgdXNlIDxGaWVsZCBjb21wb25lbnQ+IGFuZCA8RmllbGQgcmVuZGVyPiBpbiB0aGUgc2FtZSA8RmllbGQ+IGNvbXBvbmVudDsgPEZpZWxkIGNvbXBvbmVudD4gd2lsbCBiZSBpZ25vcmVkJ1xuICAgICk7XG5cbiAgICB3YXJuaW5nKFxuICAgICAgIShjb21wb25lbnQgJiYgY2hpbGRyZW4gJiYgaXNGdW5jdGlvbihjaGlsZHJlbikpLFxuICAgICAgJ1lvdSBzaG91bGQgbm90IHVzZSA8RmllbGQgY29tcG9uZW50PiBhbmQgPEZpZWxkIGNoaWxkcmVuPiBhcyBhIGZ1bmN0aW9uIGluIHRoZSBzYW1lIDxGaWVsZD4gY29tcG9uZW50OyA8RmllbGQgY29tcG9uZW50PiB3aWxsIGJlIGlnbm9yZWQuJ1xuICAgICk7XG5cbiAgICB3YXJuaW5nKFxuICAgICAgIShyZW5kZXIgJiYgY2hpbGRyZW4gJiYgIWlzRW1wdHlDaGlsZHJlbihjaGlsZHJlbikpLFxuICAgICAgJ1lvdSBzaG91bGQgbm90IHVzZSA8RmllbGQgcmVuZGVyPiBhbmQgPEZpZWxkIGNoaWxkcmVuPiBpbiB0aGUgc2FtZSA8RmllbGQ+IGNvbXBvbmVudDsgPEZpZWxkIGNoaWxkcmVuPiB3aWxsIGJlIGlnbm9yZWQnXG4gICAgKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vIFJlZ2lzdGVyIHRoZSBGaWVsZCB3aXRoIHRoZSBwYXJlbnQgRm9ybWlrLiBQYXJlbnQgd2lsbCBjeWNsZSB0aHJvdWdoXG4gICAgLy8gcmVnaXN0ZXJlZCBGaWVsZCdzIHZhbGlkYXRlIGZucyByaWdodCBwcmlvciB0byBzdWJtaXRcbiAgICB0aGlzLnByb3BzLmZvcm1pay5yZWdpc3RlckZpZWxkKHRoaXMucHJvcHMubmFtZSwgdGhpcyk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUoXG4gICAgcHJldlByb3BzOiBGaWVsZEF0dHJpYnV0ZXM8UHJvcHM+ICYgeyBmb3JtaWs6IEZvcm1pa0NvbnRleHQ8VmFsdWVzPiB9XG4gICkge1xuICAgIGlmICh0aGlzLnByb3BzLm5hbWUgIT09IHByZXZQcm9wcy5uYW1lKSB7XG4gICAgICB0aGlzLnByb3BzLmZvcm1pay51bnJlZ2lzdGVyRmllbGQocHJldlByb3BzLm5hbWUpO1xuICAgICAgdGhpcy5wcm9wcy5mb3JtaWsucmVnaXN0ZXJGaWVsZCh0aGlzLnByb3BzLm5hbWUsIHRoaXMpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRlICE9PSBwcmV2UHJvcHMudmFsaWRhdGUpIHtcbiAgICAgIHRoaXMucHJvcHMuZm9ybWlrLnJlZ2lzdGVyRmllbGQodGhpcy5wcm9wcy5uYW1lLCB0aGlzKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLnByb3BzLmZvcm1pay51bnJlZ2lzdGVyRmllbGQodGhpcy5wcm9wcy5uYW1lKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICB2YWxpZGF0ZSxcbiAgICAgIG5hbWUsXG4gICAgICByZW5kZXIsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIGNvbXBvbmVudCA9ICdpbnB1dCcsXG4gICAgICBmb3JtaWssXG4gICAgICAuLi5wcm9wc1xuICAgIH0gPSAodGhpcy5wcm9wcyBhcyBGaWVsZEF0dHJpYnV0ZXM8UHJvcHM+ICYge1xuICAgICAgZm9ybWlrOiBGb3JtaWtDb250ZXh0PFZhbHVlcz47XG4gICAgfSkgYXMgYW55O1xuICAgIGNvbnN0IHtcbiAgICAgIHZhbGlkYXRlOiBfdmFsaWRhdGUsXG4gICAgICB2YWxpZGF0aW9uU2NoZW1hOiBfdmFsaWRhdGlvblNjaGVtYSxcbiAgICAgIC4uLnJlc3RPZkZvcm1pa1xuICAgIH0gPSBmb3JtaWs7XG4gICAgY29uc3QgZmllbGQgPSB7XG4gICAgICB2YWx1ZTpcbiAgICAgICAgcHJvcHMudHlwZSA9PT0gJ3JhZGlvJyB8fCBwcm9wcy50eXBlID09PSAnY2hlY2tib3gnXG4gICAgICAgICAgPyBwcm9wcy52YWx1ZSAvLyBSZWFjdCB1c2VzIGNoZWNrZWQ9e30gZm9yIHRoZXNlIGlucHV0c1xuICAgICAgICAgIDogZ2V0SW4oZm9ybWlrLnZhbHVlcywgbmFtZSksXG4gICAgICBuYW1lLFxuICAgICAgb25DaGFuZ2U6IGZvcm1pay5oYW5kbGVDaGFuZ2UsXG4gICAgICBvbkJsdXI6IGZvcm1pay5oYW5kbGVCbHVyLFxuICAgIH07XG4gICAgY29uc3QgYmFnID0geyBmaWVsZCwgZm9ybTogcmVzdE9mRm9ybWlrIH07XG5cbiAgICBpZiAocmVuZGVyKSB7XG4gICAgICByZXR1cm4gKHJlbmRlciBhcyBhbnkpKGJhZyk7XG4gICAgfVxuXG4gICAgaWYgKGlzRnVuY3Rpb24oY2hpbGRyZW4pKSB7XG4gICAgICByZXR1cm4gKGNoaWxkcmVuIGFzIChwcm9wczogRmllbGRQcm9wczxhbnk+KSA9PiBSZWFjdC5SZWFjdE5vZGUpKGJhZyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBjb21wb25lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCB7IGlubmVyUmVmLCAuLi5yZXN0IH0gPSBwcm9wcztcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudCBhcyBhbnksIHtcbiAgICAgICAgcmVmOiBpbm5lclJlZixcbiAgICAgICAgLi4uZmllbGQsXG4gICAgICAgIC4uLnJlc3QsXG4gICAgICAgIGNoaWxkcmVuLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50IGFzIGFueSwge1xuICAgICAgLi4uYmFnLFxuICAgICAgLi4ucHJvcHMsXG4gICAgICBjaGlsZHJlbixcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgRmllbGQgPSBjb25uZWN0PEZpZWxkQXR0cmlidXRlczxhbnk+LCBhbnk+KEZpZWxkSW5uZXIpO1xuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJy4vY29ubmVjdCc7XG5cbmV4cG9ydCB0eXBlIEZvcm1pa0Zvcm1Qcm9wcyA9IFBpY2s8XG4gIFJlYWN0LkZvcm1IVE1MQXR0cmlidXRlczxIVE1MRm9ybUVsZW1lbnQ+LFxuICBFeGNsdWRlPFxuICAgIGtleW9mIFJlYWN0LkZvcm1IVE1MQXR0cmlidXRlczxIVE1MRm9ybUVsZW1lbnQ+LFxuICAgICdvblJlc2V0JyB8ICdvblN1Ym1pdCdcbiAgPlxuPjtcblxuZXhwb3J0IGNvbnN0IEZvcm0gPSBjb25uZWN0PEZvcm1pa0Zvcm1Qcm9wcz4oXG4gICh7IGZvcm1pazogeyBoYW5kbGVSZXNldCwgaGFuZGxlU3VibWl0IH0sIC4uLnByb3BzIH0pID0+IChcbiAgICA8Zm9ybSBvblJlc2V0PXtoYW5kbGVSZXNldH0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0gey4uLnByb3BzfSAvPlxuICApXG4pO1xuXG5Gb3JtLmRpc3BsYXlOYW1lID0gJ0Zvcm0nO1xuIiwiaW1wb3J0IGhvaXN0Tm9uUmVhY3RTdGF0aWNzIGZyb20gJ2hvaXN0LW5vbi1yZWFjdC1zdGF0aWNzJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEZvcm1payB9IGZyb20gJy4vRm9ybWlrJztcbmltcG9ydCB7XG4gIEZvcm1pa0FjdGlvbnMsXG4gIEZvcm1pa1Byb3BzLFxuICBGb3JtaWtTaGFyZWRDb25maWcsXG4gIEZvcm1pa1ZhbHVlcyxcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlscyc7XG5cbi8qKlxuICogU3RhdGUsIGhhbmRsZXJzLCBhbmQgaGVscGVycyBpbmplY3RlZCBhcyBwcm9wcyBpbnRvIHRoZSB3cmFwcGVkIGZvcm0gY29tcG9uZW50LlxuICogVXNlZCB3aXRoIHdpdGhGb3JtaWsoKVxuICpcbiAqIEBkZXByZWNhdGVkICBVc2UgYE91dGVyUHJvcHMgJiBGb3JtaWtQcm9wczxWYWx1ZXM+YCBpbnN0ZWFkLlxuICovXG5leHBvcnQgdHlwZSBJbmplY3RlZEZvcm1pa1Byb3BzPFByb3BzLCBWYWx1ZXM+ID0gUHJvcHMgJiBGb3JtaWtQcm9wczxWYWx1ZXM+O1xuXG4vKipcbiAqIEZvcm1payBhY3Rpb25zICsgeyBwcm9wcyB9XG4gKi9cbmV4cG9ydCB0eXBlIEZvcm1pa0JhZzxQLCBWPiA9IHsgcHJvcHM6IFAgfSAmIEZvcm1pa0FjdGlvbnM8Vj47XG5cbi8qKlxuICogd2l0aEZvcm1paygpIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy4gQmFja3dhcmRzIGNvbXBhdGlibGUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgV2l0aEZvcm1pa0NvbmZpZzxcbiAgUHJvcHMsXG4gIFZhbHVlcyBleHRlbmRzIEZvcm1pa1ZhbHVlcyA9IEZvcm1pa1ZhbHVlcyxcbiAgRGVwcmVjYXRlZFBheWxvYWQgPSBWYWx1ZXNcbj4gZXh0ZW5kcyBGb3JtaWtTaGFyZWRDb25maWc8UHJvcHM+IHtcbiAgLyoqXG4gICAqIFNldCB0aGUgZGlzcGxheSBuYW1lIG9mIHRoZSBjb21wb25lbnQuIFVzZWZ1bCBmb3IgUmVhY3QgRGV2VG9vbHMuXG4gICAqL1xuICBkaXNwbGF5TmFtZT86IHN0cmluZztcblxuICAvKipcbiAgICogU3VibWlzc2lvbiBoYW5kbGVyXG4gICAqL1xuICBoYW5kbGVTdWJtaXQ6ICh2YWx1ZXM6IFZhbHVlcywgZm9ybWlrQmFnOiBGb3JtaWtCYWc8UHJvcHMsIFZhbHVlcz4pID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIE1hcCBwcm9wcyB0byB0aGUgZm9ybSB2YWx1ZXNcbiAgICovXG4gIG1hcFByb3BzVG9WYWx1ZXM/OiAocHJvcHM6IFByb3BzKSA9PiBWYWx1ZXM7XG5cbiAgLyoqXG4gICAqIE1hcCBwcm9wcyB0byB0aGUgZm9ybSB2YWx1ZXNcbiAgICovXG4gIG1hcFByb3BzVG9TdGF0dXM/OiAocHJvcHM6IFByb3BzKSA9PiBhbnk7XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIGluIDAuOS4wIChidXQgbmVlZGVkIHRvIGJyZWFrIFRTIHR5cGVzKVxuICAgKi9cbiAgbWFwVmFsdWVzVG9QYXlsb2FkPzogKHZhbHVlczogVmFsdWVzKSA9PiBEZXByZWNhdGVkUGF5bG9hZDtcblxuICAvKipcbiAgICogQSBZdXAgU2NoZW1hIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgWXVwIHNjaGVtYVxuICAgKi9cbiAgdmFsaWRhdGlvblNjaGVtYT86IGFueSB8ICgocHJvcHM6IFByb3BzKSA9PiBhbnkpO1xuXG4gIC8qKlxuICAgKiBWYWxpZGF0aW9uIGZ1bmN0aW9uLiBNdXN0IHJldHVybiBhbiBlcnJvciBvYmplY3Qgb3IgcHJvbWlzZSB0aGF0XG4gICAqIHRocm93cyBhbiBlcnJvciBvYmplY3Qgd2hlcmUgdGhhdCBvYmplY3Qga2V5cyBtYXAgdG8gY29ycmVzcG9uZGluZyB2YWx1ZS5cbiAgICovXG4gIHZhbGlkYXRlPzogKHZhbHVlczogVmFsdWVzLCBwcm9wczogUHJvcHMpID0+IHZvaWQgfCBvYmplY3QgfCBQcm9taXNlPGFueT47XG59XG5cbmV4cG9ydCB0eXBlIENvbXBvc2l0ZUNvbXBvbmVudDxQPiA9XG4gIHwgUmVhY3QuQ29tcG9uZW50Q2xhc3M8UD5cbiAgfCBSZWFjdC5TdGF0ZWxlc3NDb21wb25lbnQ8UD47XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9uZW50RGVjb3JhdG9yPFRPd25Qcm9wcywgVE1lcmdlZFByb3BzPiB7XG4gIChjb21wb25lbnQ6IENvbXBvc2l0ZUNvbXBvbmVudDxUTWVyZ2VkUHJvcHM+KTogUmVhY3QuQ29tcG9uZW50VHlwZTxUT3duUHJvcHM+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluZmVyYWJsZUNvbXBvbmVudERlY29yYXRvcjxUT3duUHJvcHM+IHtcbiAgPFQgZXh0ZW5kcyBDb21wb3NpdGVDb21wb25lbnQ8VE93blByb3BzPj4oY29tcG9uZW50OiBUKTogVDtcbn1cblxuLyoqXG4gKiBBIHB1YmxpYyBoaWdoZXItb3JkZXIgY29tcG9uZW50IHRvIGFjY2VzcyB0aGUgaW1wZXJhdGl2ZSBBUElcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhGb3JtaWs8XG4gIE91dGVyUHJvcHMsXG4gIFZhbHVlcyBleHRlbmRzIEZvcm1pa1ZhbHVlcyxcbiAgUGF5bG9hZCA9IFZhbHVlc1xuPih7XG4gIG1hcFByb3BzVG9WYWx1ZXMgPSAodmFuaWxsYVByb3BzOiBPdXRlclByb3BzKTogVmFsdWVzID0+IHtcbiAgICBsZXQgdmFsOiBWYWx1ZXMgPSB7fSBhcyBWYWx1ZXM7XG4gICAgZm9yIChsZXQgayBpbiB2YW5pbGxhUHJvcHMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdmFuaWxsYVByb3BzLmhhc093blByb3BlcnR5KGspICYmXG4gICAgICAgIHR5cGVvZiB2YW5pbGxhUHJvcHNba10gIT09ICdmdW5jdGlvbidcbiAgICAgICkge1xuICAgICAgICAodmFsIGFzIGFueSlba10gPSB2YW5pbGxhUHJvcHNba107XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWwgYXMgVmFsdWVzO1xuICB9LFxuICAuLi5jb25maWdcbn06IFdpdGhGb3JtaWtDb25maWc8T3V0ZXJQcm9wcywgVmFsdWVzLCBQYXlsb2FkPik6IENvbXBvbmVudERlY29yYXRvcjxcbiAgT3V0ZXJQcm9wcyxcbiAgT3V0ZXJQcm9wcyAmIEZvcm1pa1Byb3BzPFZhbHVlcz5cbj4ge1xuICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlRm9ybWlrKFxuICAgIENvbXBvbmVudDogQ29tcG9zaXRlQ29tcG9uZW50PE91dGVyUHJvcHMgJiBGb3JtaWtQcm9wczxWYWx1ZXM+PlxuICApOiBSZWFjdC5Db21wb25lbnRDbGFzczxPdXRlclByb3BzPiB7XG4gICAgY29uc3QgY29tcG9uZW50RGlzcGxheU5hbWUgPVxuICAgICAgQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8XG4gICAgICBDb21wb25lbnQubmFtZSB8fFxuICAgICAgKENvbXBvbmVudC5jb25zdHJ1Y3RvciAmJiBDb21wb25lbnQuY29uc3RydWN0b3IubmFtZSkgfHxcbiAgICAgICdDb21wb25lbnQnO1xuICAgIC8qKlxuICAgICAqIFdlIG5lZWQgdG8gdXNlIGNsb3N1cmVzIGhlcmUgZm9yIHRvIHByb3ZpZGUgdGhlIHdyYXBwZWQgY29tcG9uZW50J3MgcHJvcHMgdG9cbiAgICAgKiB0aGUgcmVzcGVjdGl2ZSB3aXRoRm9ybWlrIGNvbmZpZyBtZXRob2RzLlxuICAgICAqL1xuICAgIGNsYXNzIEMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8T3V0ZXJQcm9wcywge30+IHtcbiAgICAgIHN0YXRpYyBkaXNwbGF5TmFtZSA9IGBXaXRoRm9ybWlrKCR7Y29tcG9uZW50RGlzcGxheU5hbWV9KWA7XG5cbiAgICAgIHZhbGlkYXRlID0gKHZhbHVlczogVmFsdWVzKTogdm9pZCB8IG9iamVjdCB8IFByb21pc2U8YW55PiA9PiB7XG4gICAgICAgIHJldHVybiBjb25maWcudmFsaWRhdGUhKHZhbHVlcywgdGhpcy5wcm9wcyk7XG4gICAgICB9O1xuXG4gICAgICB2YWxpZGF0aW9uU2NoZW1hID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gaXNGdW5jdGlvbihjb25maWcudmFsaWRhdGlvblNjaGVtYSlcbiAgICAgICAgICA/IGNvbmZpZy52YWxpZGF0aW9uU2NoZW1hISh0aGlzLnByb3BzKVxuICAgICAgICAgIDogY29uZmlnLnZhbGlkYXRpb25TY2hlbWE7XG4gICAgICB9O1xuXG4gICAgICBoYW5kbGVTdWJtaXQgPSAodmFsdWVzOiBWYWx1ZXMsIGFjdGlvbnM6IEZvcm1pa0FjdGlvbnM8VmFsdWVzPikgPT4ge1xuICAgICAgICByZXR1cm4gY29uZmlnLmhhbmRsZVN1Ym1pdCh2YWx1ZXMsIHtcbiAgICAgICAgICAuLi5hY3Rpb25zLFxuICAgICAgICAgIHByb3BzOiB0aGlzLnByb3BzLFxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogSnVzdCBhdm9pZGluZyBhIHJlbmRlciBjYWxsYmFjayBmb3IgcGVyZiBoZXJlXG4gICAgICAgKi9cbiAgICAgIHJlbmRlckZvcm1Db21wb25lbnQgPSAoZm9ybWlrUHJvcHM6IEZvcm1pa1Byb3BzPFZhbHVlcz4pID0+IHtcbiAgICAgICAgcmV0dXJuIDxDb21wb25lbnQgey4uLnRoaXMucHJvcHN9IHsuLi5mb3JtaWtQcm9wc30gLz47XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgY2hpbGRyZW4sIC4uLnByb3BzIH0gPSB0aGlzLnByb3BzIGFzIGFueTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8Rm9ybWlrXG4gICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgICB7Li4uY29uZmlnfVxuICAgICAgICAgICAgdmFsaWRhdGU9e2NvbmZpZy52YWxpZGF0ZSAmJiB0aGlzLnZhbGlkYXRlfVxuICAgICAgICAgICAgdmFsaWRhdGlvblNjaGVtYT17Y29uZmlnLnZhbGlkYXRpb25TY2hlbWEgJiYgdGhpcy52YWxpZGF0aW9uU2NoZW1hfVxuICAgICAgICAgICAgaW5pdGlhbFZhbHVlcz17bWFwUHJvcHNUb1ZhbHVlcyh0aGlzLnByb3BzKX1cbiAgICAgICAgICAgIGluaXRpYWxTdGF0dXM9e1xuICAgICAgICAgICAgICBjb25maWcubWFwUHJvcHNUb1N0YXR1cyAmJiBjb25maWcubWFwUHJvcHNUb1N0YXR1cyh0aGlzLnByb3BzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0IGFzIGFueX1cbiAgICAgICAgICAgIHJlbmRlcj17dGhpcy5yZW5kZXJGb3JtQ29tcG9uZW50fVxuICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGhvaXN0Tm9uUmVhY3RTdGF0aWNzKFxuICAgICAgQyxcbiAgICAgIENvbXBvbmVudCBhcyBSZWFjdC5Db21wb25lbnRDbGFzczxPdXRlclByb3BzICYgRm9ybWlrUHJvcHM8VmFsdWVzPj4gLy8gY2FzdCB0eXBlIHRvIENvbXBvbmVudENsYXNzIChldmVuIGlmIFNGQylcbiAgICApIGFzIFJlYWN0LkNvbXBvbmVudENsYXNzPE91dGVyUHJvcHM+O1xuICB9O1xufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsb25lRGVlcCBmcm9tICdsb2Rhc2gvY2xvbmVEZWVwJztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICcuL2Nvbm5lY3QnO1xuaW1wb3J0IHtcbiAgRm9ybWlrQ29udGV4dCxcbiAgRm9ybWlrU3RhdGUsXG4gIFNoYXJlZFJlbmRlclByb3BzLFxuICBGb3JtaWtQcm9wcyxcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBnZXRJbiwgaXNFbXB0eUNoaWxkcmVuLCBpc0Z1bmN0aW9uLCBzZXRJbiB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgdHlwZSBGaWVsZEFycmF5UmVuZGVyUHJvcHMgPSBBcnJheUhlbHBlcnMgJiB7XG4gIGZvcm06IEZvcm1pa1Byb3BzPGFueT47XG4gIG5hbWU6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIEZpZWxkQXJyYXlDb25maWcgPSB7XG4gIC8qKiBSZWFsbHkgdGhlIHBhdGggdG8gdGhlIGFycmF5IGZpZWxkIHRvIGJlIHVwZGF0ZWQgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKiogU2hvdWxkIGZpZWxkIGFycmF5IHZhbGlkYXRlIHRoZSBmb3JtIEFGVEVSIGFycmF5IHVwZGF0ZXMvY2hhbmdlcz8gKi9cbiAgdmFsaWRhdGVPbkNoYW5nZT86IGJvb2xlYW47XG59ICYgU2hhcmVkUmVuZGVyUHJvcHM8RmllbGRBcnJheVJlbmRlclByb3BzPjtcbmV4cG9ydCBpbnRlcmZhY2UgQXJyYXlIZWxwZXJzIHtcbiAgLyoqIEltcGVyYXRpdmVseSBhZGQgYSB2YWx1ZSB0byB0aGUgZW5kIG9mIGFuIGFycmF5ICovXG4gIHB1c2g6IChvYmo6IGFueSkgPT4gdm9pZDtcbiAgLyoqIEN1cnJpZWQgZm4gdG8gYWRkIGEgdmFsdWUgdG8gdGhlIGVuZCBvZiBhbiBhcnJheSAqL1xuICBoYW5kbGVQdXNoOiAob2JqOiBhbnkpID0+ICgpID0+IHZvaWQ7XG4gIC8qKiBJbXBlcmF0aXZlbHkgc3dhcCB0d28gdmFsdWVzIGluIGFuIGFycmF5ICovXG4gIHN3YXA6IChpbmRleEE6IG51bWJlciwgaW5kZXhCOiBudW1iZXIpID0+IHZvaWQ7XG4gIC8qKiBDdXJyaWVkIGZuIHRvIHN3YXAgdHdvIHZhbHVlcyBpbiBhbiBhcnJheSAqL1xuICBoYW5kbGVTd2FwOiAoaW5kZXhBOiBudW1iZXIsIGluZGV4QjogbnVtYmVyKSA9PiAoKSA9PiB2b2lkO1xuICAvKiogSW1wZXJhdGl2ZWx5IG1vdmUgYW4gZWxlbWVudCBpbiBhbiBhcnJheSB0byBhbm90aGVyIGluZGV4ICovXG4gIG1vdmU6IChmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpID0+IHZvaWQ7XG4gIC8qKiBJbXBlcmF0aXZlbHkgbW92ZSBhbiBlbGVtZW50IGluIGFuIGFycmF5IHRvIGFub3RoZXIgaW5kZXggKi9cbiAgaGFuZGxlTW92ZTogKGZyb206IG51bWJlciwgdG86IG51bWJlcikgPT4gKCkgPT4gdm9pZDtcbiAgLyoqIEltcGVyYXRpdmVseSBpbnNlcnQgYW4gZWxlbWVudCBhdCBhIGdpdmVuIGluZGV4IGludG8gdGhlIGFycmF5ICovXG4gIGluc2VydDogKGluZGV4OiBudW1iZXIsIHZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gIC8qKiBDdXJyaWVkIGZuIHRvIGluc2VydCBhbiBlbGVtZW50IGF0IGEgZ2l2ZW4gaW5kZXggaW50byB0aGUgYXJyYXkgKi9cbiAgaGFuZGxlSW5zZXJ0OiAoaW5kZXg6IG51bWJlciwgdmFsdWU6IGFueSkgPT4gKCkgPT4gdm9pZDtcbiAgLyoqIEltcGVyYXRpdmVseSByZXBsYWNlIGEgdmFsdWUgYXQgYW4gaW5kZXggb2YgYW4gYXJyYXkgICovXG4gIHJlcGxhY2U6IChpbmRleDogbnVtYmVyLCB2YWx1ZTogYW55KSA9PiB2b2lkO1xuICAvKiogQ3VycmllZCBmbiB0byByZXBsYWNlIGFuIGVsZW1lbnQgYXQgYSBnaXZlbiBpbmRleCBpbnRvIHRoZSBhcnJheSAqL1xuICBoYW5kbGVSZXBsYWNlOiAoaW5kZXg6IG51bWJlciwgdmFsdWU6IGFueSkgPT4gKCkgPT4gdm9pZDtcbiAgLyoqIEltcGVyYXRpdmVseSBhZGQgYW4gZWxlbWVudCB0byB0aGUgYmVnaW5uaW5nIG9mIGFuIGFycmF5IGFuZCByZXR1cm4gaXRzIGxlbmd0aCAqL1xuICB1bnNoaWZ0OiAodmFsdWU6IGFueSkgPT4gbnVtYmVyO1xuICAvKiogQ3VycmllZCBmbiB0byBhZGQgYW4gZWxlbWVudCB0byB0aGUgYmVnaW5uaW5nIG9mIGFuIGFycmF5ICovXG4gIGhhbmRsZVVuc2hpZnQ6ICh2YWx1ZTogYW55KSA9PiAoKSA9PiB2b2lkO1xuICAvKiogQ3VycmllZCBmbiB0byByZW1vdmUgYW4gZWxlbWVudCBhdCBhbiBpbmRleCBvZiBhbiBhcnJheSAqL1xuICBoYW5kbGVSZW1vdmU6IChpbmRleDogbnVtYmVyKSA9PiAoKSA9PiB2b2lkO1xuICAvKiogQ3VycmllZCBmbiB0byByZW1vdmUgYSB2YWx1ZSBmcm9tIHRoZSBlbmQgb2YgdGhlIGFycmF5ICovXG4gIGhhbmRsZVBvcDogKCkgPT4gKCkgPT4gdm9pZDtcbiAgLyoqIEltcGVyYXRpdmVseSByZW1vdmUgYW5kIGVsZW1lbnQgYXQgYW4gaW5kZXggb2YgYW4gYXJyYXkgKi9cbiAgcmVtb3ZlPFQ+KGluZGV4OiBudW1iZXIpOiBUIHwgdW5kZWZpbmVkO1xuICAvKiogSW1wZXJhdGl2ZWx5IHJlbW92ZSBhbmQgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGVuZCBvZiB0aGUgYXJyYXkgKi9cbiAgcG9wPFQ+KCk6IFQgfCB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogU29tZSBhcnJheSBoZWxwZXJzIVxuICovXG5leHBvcnQgY29uc3QgbW92ZSA9IChhcnJheTogYW55W10sIGZyb206IG51bWJlciwgdG86IG51bWJlcikgPT4ge1xuICBjb25zdCBjb3B5ID0gWy4uLihhcnJheSB8fCBbXSldO1xuICBjb25zdCB2YWx1ZSA9IGNvcHlbZnJvbV07XG4gIGNvcHkuc3BsaWNlKGZyb20sIDEpO1xuICBjb3B5LnNwbGljZSh0bywgMCwgdmFsdWUpO1xuICByZXR1cm4gY29weTtcbn07XG5cbmV4cG9ydCBjb25zdCBzd2FwID0gKGFycmF5OiBhbnlbXSwgaW5kZXhBOiBudW1iZXIsIGluZGV4QjogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IGNvcHkgPSBbLi4uKGFycmF5IHx8IFtdKV07XG4gIGNvbnN0IGEgPSBjb3B5W2luZGV4QV07XG4gIGNvcHlbaW5kZXhBXSA9IGNvcHlbaW5kZXhCXTtcbiAgY29weVtpbmRleEJdID0gYTtcbiAgcmV0dXJuIGNvcHk7XG59O1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0ID0gKGFycmF5OiBhbnlbXSwgaW5kZXg6IG51bWJlciwgdmFsdWU6IGFueSkgPT4ge1xuICBjb25zdCBjb3B5ID0gWy4uLihhcnJheSB8fCBbXSldO1xuICBjb3B5LnNwbGljZShpbmRleCwgMCwgdmFsdWUpO1xuICByZXR1cm4gY29weTtcbn07XG5cbmV4cG9ydCBjb25zdCByZXBsYWNlID0gKGFycmF5OiBhbnlbXSwgaW5kZXg6IG51bWJlciwgdmFsdWU6IGFueSkgPT4ge1xuICBjb25zdCBjb3B5ID0gWy4uLihhcnJheSB8fCBbXSldO1xuICBjb3B5W2luZGV4XSA9IHZhbHVlO1xuICByZXR1cm4gY29weTtcbn07XG5jbGFzcyBGaWVsZEFycmF5SW5uZXI8VmFsdWVzID0ge30+IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFxuICBGaWVsZEFycmF5Q29uZmlnICYgeyBmb3JtaWs6IEZvcm1pa0NvbnRleHQ8VmFsdWVzPiB9LFxuICB7fVxuPiB7XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgdmFsaWRhdGVPbkNoYW5nZTogdHJ1ZSxcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogRmllbGRBcnJheUNvbmZpZyAmIHsgZm9ybWlrOiBGb3JtaWtDb250ZXh0PFZhbHVlcz4gfSkge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICAvLyBXZSBuZWVkIFR5cGVTY3JpcHQgZ2VuZXJpY3Mgb24gdGhlc2UsIHNvIHdlJ2xsIGJpbmQgdGhlbSBpbiB0aGUgY29uc3RydWN0b3JcbiAgICB0aGlzLnJlbW92ZSA9IHRoaXMucmVtb3ZlLmJpbmQodGhpcykgYXMgYW55O1xuICAgIHRoaXMucG9wID0gdGhpcy5wb3AuYmluZCh0aGlzKSBhcyBhbnk7XG4gIH1cblxuICB1cGRhdGVBcnJheUZpZWxkID0gKFxuICAgIGZuOiBGdW5jdGlvbixcbiAgICBhbHRlclRvdWNoZWQ6IGJvb2xlYW4gfCBGdW5jdGlvbixcbiAgICBhbHRlckVycm9yczogYm9vbGVhbiB8IEZ1bmN0aW9uXG4gICkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIG5hbWUsXG4gICAgICB2YWxpZGF0ZU9uQ2hhbmdlLFxuICAgICAgZm9ybWlrOiB7IHNldEZvcm1pa1N0YXRlLCB2YWxpZGF0ZUZvcm0gfSxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBzZXRGb3JtaWtTdGF0ZShcbiAgICAgIChwcmV2U3RhdGU6IEZvcm1pa1N0YXRlPGFueT4pID0+IHtcbiAgICAgICAgbGV0IHVwZGF0ZUVycm9ycyA9IHR5cGVvZiBhbHRlckVycm9ycyA9PT0gJ2Z1bmN0aW9uJyA/IGFsdGVyRXJyb3JzIDogZm47XG4gICAgICAgIGxldCB1cGRhdGVUb3VjaGVkID1cbiAgICAgICAgICB0eXBlb2YgYWx0ZXJUb3VjaGVkID09PSAnZnVuY3Rpb24nID8gYWx0ZXJUb3VjaGVkIDogZm47XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICAgICAgdmFsdWVzOiBzZXRJbihcbiAgICAgICAgICAgIHByZXZTdGF0ZS52YWx1ZXMsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgZm4oZ2V0SW4ocHJldlN0YXRlLnZhbHVlcywgbmFtZSkpXG4gICAgICAgICAgKSxcbiAgICAgICAgICBlcnJvcnM6IGFsdGVyRXJyb3JzXG4gICAgICAgICAgICA/IHNldEluKFxuICAgICAgICAgICAgICAgIHByZXZTdGF0ZS5lcnJvcnMsXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICB1cGRhdGVFcnJvcnMoZ2V0SW4ocHJldlN0YXRlLmVycm9ycywgbmFtZSkpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogcHJldlN0YXRlLmVycm9ycyxcbiAgICAgICAgICB0b3VjaGVkOiBhbHRlclRvdWNoZWRcbiAgICAgICAgICAgID8gc2V0SW4oXG4gICAgICAgICAgICAgICAgcHJldlN0YXRlLnRvdWNoZWQsXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICB1cGRhdGVUb3VjaGVkKGdldEluKHByZXZTdGF0ZS50b3VjaGVkLCBuYW1lKSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgOiBwcmV2U3RhdGUudG91Y2hlZCxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGlmICh2YWxpZGF0ZU9uQ2hhbmdlKSB7XG4gICAgICAgICAgdmFsaWRhdGVGb3JtKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xuXG4gIHB1c2ggPSAodmFsdWU6IGFueSkgPT5cbiAgICB0aGlzLnVwZGF0ZUFycmF5RmllbGQoXG4gICAgICAoYXJyYXk6IGFueVtdKSA9PiBbLi4uKGFycmF5IHx8IFtdKSwgY2xvbmVEZWVwKHZhbHVlKV0sXG4gICAgICBmYWxzZSxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICBoYW5kbGVQdXNoID0gKHZhbHVlOiBhbnkpID0+ICgpID0+IHRoaXMucHVzaCh2YWx1ZSk7XG5cbiAgc3dhcCA9IChpbmRleEE6IG51bWJlciwgaW5kZXhCOiBudW1iZXIpID0+XG4gICAgdGhpcy51cGRhdGVBcnJheUZpZWxkKFxuICAgICAgKGFycmF5OiBhbnlbXSkgPT4gc3dhcChhcnJheSwgaW5kZXhBLCBpbmRleEIpLFxuICAgICAgdHJ1ZSxcbiAgICAgIHRydWVcbiAgICApO1xuXG4gIGhhbmRsZVN3YXAgPSAoaW5kZXhBOiBudW1iZXIsIGluZGV4QjogbnVtYmVyKSA9PiAoKSA9PlxuICAgIHRoaXMuc3dhcChpbmRleEEsIGluZGV4Qik7XG5cbiAgbW92ZSA9IChmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpID0+XG4gICAgdGhpcy51cGRhdGVBcnJheUZpZWxkKChhcnJheTogYW55W10pID0+IG1vdmUoYXJyYXksIGZyb20sIHRvKSwgdHJ1ZSwgdHJ1ZSk7XG5cbiAgaGFuZGxlTW92ZSA9IChmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpID0+ICgpID0+IHRoaXMubW92ZShmcm9tLCB0byk7XG5cbiAgaW5zZXJ0ID0gKGluZGV4OiBudW1iZXIsIHZhbHVlOiBhbnkpID0+XG4gICAgdGhpcy51cGRhdGVBcnJheUZpZWxkKFxuICAgICAgKGFycmF5OiBhbnlbXSkgPT4gaW5zZXJ0KGFycmF5LCBpbmRleCwgdmFsdWUpLFxuICAgICAgKGFycmF5OiBhbnlbXSkgPT4gaW5zZXJ0KGFycmF5LCBpbmRleCwgbnVsbCksXG4gICAgICAoYXJyYXk6IGFueVtdKSA9PiBpbnNlcnQoYXJyYXksIGluZGV4LCBudWxsKVxuICAgICk7XG5cbiAgaGFuZGxlSW5zZXJ0ID0gKGluZGV4OiBudW1iZXIsIHZhbHVlOiBhbnkpID0+ICgpID0+IHRoaXMuaW5zZXJ0KGluZGV4LCB2YWx1ZSk7XG5cbiAgcmVwbGFjZSA9IChpbmRleDogbnVtYmVyLCB2YWx1ZTogYW55KSA9PlxuICAgIHRoaXMudXBkYXRlQXJyYXlGaWVsZChcbiAgICAgIChhcnJheTogYW55W10pID0+IHJlcGxhY2UoYXJyYXksIGluZGV4LCB2YWx1ZSksXG4gICAgICBmYWxzZSxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICBoYW5kbGVSZXBsYWNlID0gKGluZGV4OiBudW1iZXIsIHZhbHVlOiBhbnkpID0+ICgpID0+XG4gICAgdGhpcy5yZXBsYWNlKGluZGV4LCB2YWx1ZSk7XG5cbiAgdW5zaGlmdCA9ICh2YWx1ZTogYW55KSA9PiB7XG4gICAgbGV0IGxlbmd0aCA9IC0xO1xuICAgIHRoaXMudXBkYXRlQXJyYXlGaWVsZChcbiAgICAgIChhcnJheTogYW55W10pID0+IHtcbiAgICAgICAgY29uc3QgYXJyID0gYXJyYXkgPyBbdmFsdWUsIC4uLmFycmF5XSA6IFt2YWx1ZV07XG4gICAgICAgIGlmIChsZW5ndGggPCAwKSB7XG4gICAgICAgICAgbGVuZ3RoID0gYXJyLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgfSxcbiAgICAgIChhcnJheTogYW55W10pID0+IHtcbiAgICAgICAgY29uc3QgYXJyID0gYXJyYXkgPyBbbnVsbCwgLi4uYXJyYXldIDogW251bGxdO1xuICAgICAgICBpZiAobGVuZ3RoIDwgMCkgbGVuZ3RoID0gYXJyLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICAgIH0sXG4gICAgICAoYXJyYXk6IGFueVtdKSA9PiB7XG4gICAgICAgIGNvbnN0IGFyciA9IGFycmF5ID8gW251bGwsIC4uLmFycmF5XSA6IFtudWxsXTtcbiAgICAgICAgaWYgKGxlbmd0aCA8IDApIGxlbmd0aCA9IGFyci5sZW5ndGg7XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gbGVuZ3RoO1xuICB9O1xuXG4gIGhhbmRsZVVuc2hpZnQgPSAodmFsdWU6IGFueSkgPT4gKCkgPT4gdGhpcy51bnNoaWZ0KHZhbHVlKTtcblxuICByZW1vdmU8VD4oaW5kZXg6IG51bWJlcik6IFQge1xuICAgIC8vIFdlIG5lZWQgdG8gbWFrZSBzdXJlIHdlIGFsc28gcmVtb3ZlIHJlbGV2YW50IHBpZWNlcyBvZiBgdG91Y2hlZGAgYW5kIGBlcnJvcnNgXG4gICAgbGV0IHJlc3VsdDogYW55O1xuICAgIHRoaXMudXBkYXRlQXJyYXlGaWVsZChcbiAgICAgIC8vIHNvIHRoaXMgZ2V0cyBjYWxsIDMgdGltZXNcbiAgICAgIChhcnJheT86IGFueVtdKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvcHkgPSBhcnJheSA/IFsuLi5hcnJheV0gOiBbXTtcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSBjb3B5W2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNGdW5jdGlvbihjb3B5LnNwbGljZSkpIHtcbiAgICAgICAgICBjb3B5LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgICB9LFxuICAgICAgdHJ1ZSxcbiAgICAgIHRydWVcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGhhbmRsZVJlbW92ZSA9IChpbmRleDogbnVtYmVyKSA9PiAoKSA9PiB0aGlzLnJlbW92ZTxhbnk+KGluZGV4KTtcblxuICBwb3A8VD4oKTogVCB7XG4gICAgLy8gUmVtb3ZlIHJlbGV2YW50IHBpZWNlcyBvZiBgdG91Y2hlZGAgYW5kIGBlcnJvcnNgIHRvbyFcbiAgICBsZXQgcmVzdWx0OiBhbnk7XG4gICAgdGhpcy51cGRhdGVBcnJheUZpZWxkKFxuICAgICAgLy8gc28gdGhpcyBnZXRzIGNhbGwgMyB0aW1lc1xuICAgICAgKGFycmF5OiBhbnlbXSkgPT4ge1xuICAgICAgICBjb25zdCB0bXAgPSBhcnJheTtcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSB0bXAgJiYgdG1wLnBvcCAmJiB0bXAucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRtcDtcbiAgICAgIH0sXG4gICAgICB0cnVlLFxuICAgICAgdHJ1ZVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaGFuZGxlUG9wID0gKCkgPT4gKCkgPT4gdGhpcy5wb3A8YW55PigpO1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBhcnJheUhlbHBlcnM6IEFycmF5SGVscGVycyA9IHtcbiAgICAgIHB1c2g6IHRoaXMucHVzaCxcbiAgICAgIHBvcDogdGhpcy5wb3AsXG4gICAgICBzd2FwOiB0aGlzLnN3YXAsXG4gICAgICBtb3ZlOiB0aGlzLm1vdmUsXG4gICAgICBpbnNlcnQ6IHRoaXMuaW5zZXJ0LFxuICAgICAgcmVwbGFjZTogdGhpcy5yZXBsYWNlLFxuICAgICAgdW5zaGlmdDogdGhpcy51bnNoaWZ0LFxuICAgICAgcmVtb3ZlOiB0aGlzLnJlbW92ZSxcbiAgICAgIGhhbmRsZVB1c2g6IHRoaXMuaGFuZGxlUHVzaCxcbiAgICAgIGhhbmRsZVBvcDogdGhpcy5oYW5kbGVQb3AsXG4gICAgICBoYW5kbGVTd2FwOiB0aGlzLmhhbmRsZVN3YXAsXG4gICAgICBoYW5kbGVNb3ZlOiB0aGlzLmhhbmRsZU1vdmUsXG4gICAgICBoYW5kbGVJbnNlcnQ6IHRoaXMuaGFuZGxlSW5zZXJ0LFxuICAgICAgaGFuZGxlUmVwbGFjZTogdGhpcy5oYW5kbGVSZXBsYWNlLFxuICAgICAgaGFuZGxlVW5zaGlmdDogdGhpcy5oYW5kbGVVbnNoaWZ0LFxuICAgICAgaGFuZGxlUmVtb3ZlOiB0aGlzLmhhbmRsZVJlbW92ZSxcbiAgICB9O1xuXG4gICAgY29uc3Qge1xuICAgICAgY29tcG9uZW50LFxuICAgICAgcmVuZGVyLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICBuYW1lLFxuICAgICAgZm9ybWlrOiB7XG4gICAgICAgIHZhbGlkYXRlOiBfdmFsaWRhdGUsXG4gICAgICAgIHZhbGlkYXRpb25TY2hlbWE6IF92YWxpZGF0aW9uU2NoZW1hLFxuICAgICAgICAuLi5yZXN0T2ZGb3JtaWtcbiAgICAgIH0sXG4gICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCBwcm9wczogRmllbGRBcnJheVJlbmRlclByb3BzID0ge1xuICAgICAgLi4uYXJyYXlIZWxwZXJzLFxuICAgICAgZm9ybTogcmVzdE9mRm9ybWlrLFxuICAgICAgbmFtZSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGNvbXBvbmVudFxuICAgICAgPyBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudCBhcyBhbnksIHByb3BzKVxuICAgICAgOiByZW5kZXJcbiAgICAgICAgPyAocmVuZGVyIGFzIGFueSkocHJvcHMpXG4gICAgICAgIDogY2hpbGRyZW4gLy8gY2hpbGRyZW4gY29tZSBsYXN0LCBhbHdheXMgY2FsbGVkXG4gICAgICAgICAgPyB0eXBlb2YgY2hpbGRyZW4gPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgID8gKGNoaWxkcmVuIGFzIGFueSkocHJvcHMpXG4gICAgICAgICAgICA6ICFpc0VtcHR5Q2hpbGRyZW4oY2hpbGRyZW4pID8gUmVhY3QuQ2hpbGRyZW4ub25seShjaGlsZHJlbikgOiBudWxsXG4gICAgICAgICAgOiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBGaWVsZEFycmF5ID0gY29ubmVjdDxGaWVsZEFycmF5Q29uZmlnLCBhbnk+KEZpZWxkQXJyYXlJbm5lcik7XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICcuL2Nvbm5lY3QnO1xuaW1wb3J0IHtcbiAgRm9ybWlrUHJvcHMsXG4gIEdlbmVyaWNGaWVsZEhUTUxBdHRyaWJ1dGVzLFxuICBGb3JtaWtDb250ZXh0LFxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB3YXJuaW5nIGZyb20gJ3Rpbnktd2FybmluZyc7XG5pbXBvcnQgeyBnZXRJbiwgaXNFbXB0eUNoaWxkcmVuLCBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmFzdEZpZWxkUHJvcHM8ViA9IGFueT4ge1xuICBmaWVsZDoge1xuICAgIC8qKiBDbGFzc2ljIFJlYWN0IGNoYW5nZSBoYW5kbGVyLCBrZXllZCBieSBpbnB1dCBuYW1lICovXG4gICAgb25DaGFuZ2U6IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxhbnk+KSA9PiB2b2lkO1xuICAgIC8qKiBNYXJrIGlucHV0IGFzIHRvdWNoZWQgKi9cbiAgICBvbkJsdXI6IChlOiBhbnkpID0+IHZvaWQ7XG4gICAgLyoqIFZhbHVlIG9mIHRoZSBpbnB1dCAqL1xuICAgIHZhbHVlOiBhbnk7XG4gICAgLyogbmFtZSBvZiB0aGUgaW5wdXQgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG4gIH07XG4gIGZvcm06IEZvcm1pa1Byb3BzPFY+OyAvLyBpZiBwcGwgd2FudCB0byByZXN0cmljdCB0aGlzIGZvciBhIGdpdmVuIGZvcm0sIGxldCB0aGVtLlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZhc3RGaWVsZENvbmZpZzxUPiB7XG4gIC8qKlxuICAgKiBGaWVsZCBjb21wb25lbnQgdG8gcmVuZGVyLiBDYW4gZWl0aGVyIGJlIGEgc3RyaW5nIGxpa2UgJ3NlbGVjdCcgb3IgYSBjb21wb25lbnQuXG4gICAqL1xuICBjb21wb25lbnQ/OlxuICAgIHwgc3RyaW5nXG4gICAgfCBSZWFjdC5Db21wb25lbnRUeXBlPEZhc3RGaWVsZFByb3BzPGFueT4+XG4gICAgfCBSZWFjdC5Db21wb25lbnRUeXBlPHZvaWQ+O1xuXG4gIC8qKlxuICAgKiBSZW5kZXIgcHJvcCAod29ya3MgbGlrZSBSZWFjdCByb3V0ZXIncyA8Um91dGUgcmVuZGVyPXtwcm9wcyA9Pn0gLz4pXG4gICAqL1xuICByZW5kZXI/OiAoKHByb3BzOiBGYXN0RmllbGRQcm9wczxhbnk+KSA9PiBSZWFjdC5SZWFjdE5vZGUpO1xuXG4gIC8qKlxuICAgKiBDaGlsZHJlbiByZW5kZXIgZnVuY3Rpb24gPEZpZWxkIG5hbWU+e3Byb3BzID0+IC4uLn08L0ZpZWxkPilcbiAgICovXG4gIGNoaWxkcmVuPzpcbiAgICB8ICgocHJvcHM6IEZhc3RGaWVsZFByb3BzPGFueT4pID0+IFJlYWN0LlJlYWN0Tm9kZSlcbiAgICB8IFJlYWN0LlJlYWN0Tm9kZTtcblxuICAvKipcbiAgICogVmFsaWRhdGUgYSBzaW5nbGUgZmllbGQgdmFsdWUgaW5kZXBlbmRlbnRseVxuICAgKi9cbiAgdmFsaWRhdGU/OiAoKHZhbHVlOiBhbnkpID0+IHN0cmluZyB8IFByb21pc2U8dm9pZD4gfCB1bmRlZmluZWQpO1xuXG4gIC8qKiBPdmVycmlkZSBGYXN0RmllbGQncyBkZWZhdWx0IHNob3VsZENvbXBvbmVudFVwZGF0ZSAqL1xuICBzaG91bGRVcGRhdGU/OiAoXG4gICAgbmV4dFByb3BzOiBUICYgR2VuZXJpY0ZpZWxkSFRNTEF0dHJpYnV0ZXMgJiB7IGZvcm1pazogRm9ybWlrQ29udGV4dDxhbnk+IH0sXG4gICAgcHJvcHM6IHt9XG4gICkgPT4gYm9vbGVhbjtcblxuICAvKipcbiAgICogRmllbGQgbmFtZVxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuXG4gIC8qKiBIVE1MIGNsYXNzICovXG4gIGNsYXNzTmFtZT86IHN0cmluZztcblxuICAvKiogSFRNTCBpbnB1dCB0eXBlICovXG4gIHR5cGU/OiBzdHJpbmc7XG5cbiAgLyoqIEZpZWxkIHZhbHVlICovXG4gIHZhbHVlPzogYW55O1xuXG4gIC8qKiBJbm5lciByZWYgKi9cbiAgaW5uZXJSZWY/OiAoaW5zdGFuY2U6IGFueSkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IHR5cGUgRmFzdEZpZWxkQXR0cmlidXRlczxUPiA9IEdlbmVyaWNGaWVsZEhUTUxBdHRyaWJ1dGVzICZcbiAgRmFzdEZpZWxkQ29uZmlnPFQ+ICZcbiAgVDtcblxuLyoqXG4gKiBDdXN0b20gRmllbGQgY29tcG9uZW50IGZvciBxdWlja2x5IGhvb2tpbmcgaW50byBGb3JtaWtcbiAqIGNvbnRleHQgYW5kIHdpcmluZyB1cCBmb3Jtcy5cbiAqL1xuY2xhc3MgRmFzdEZpZWxkSW5uZXI8VmFsdWVzID0ge30sIFByb3BzID0ge30+IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFxuICBGYXN0RmllbGRBdHRyaWJ1dGVzPFByb3BzPiAmIHsgZm9ybWlrOiBGb3JtaWtDb250ZXh0PFZhbHVlcz4gfSxcbiAge31cbj4ge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcm9wczogRmFzdEZpZWxkQXR0cmlidXRlczxQcm9wcz4gJiB7IGZvcm1pazogRm9ybWlrQ29udGV4dDxWYWx1ZXM+IH1cbiAgKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIGNvbnN0IHsgcmVuZGVyLCBjaGlsZHJlbiwgY29tcG9uZW50IH0gPSBwcm9wcztcbiAgICB3YXJuaW5nKFxuICAgICAgIShjb21wb25lbnQgJiYgcmVuZGVyKSxcbiAgICAgICdZb3Ugc2hvdWxkIG5vdCB1c2UgPEZhc3RGaWVsZCBjb21wb25lbnQ+IGFuZCA8RmFzdEZpZWxkIHJlbmRlcj4gaW4gdGhlIHNhbWUgPEZhc3RGaWVsZD4gY29tcG9uZW50OyA8RmFzdEZpZWxkIGNvbXBvbmVudD4gd2lsbCBiZSBpZ25vcmVkJ1xuICAgICk7XG5cbiAgICB3YXJuaW5nKFxuICAgICAgIShjb21wb25lbnQgJiYgY2hpbGRyZW4gJiYgaXNGdW5jdGlvbihjaGlsZHJlbikpLFxuICAgICAgJ1lvdSBzaG91bGQgbm90IHVzZSA8RmFzdEZpZWxkIGNvbXBvbmVudD4gYW5kIDxGYXN0RmllbGQgY2hpbGRyZW4+IGFzIGEgZnVuY3Rpb24gaW4gdGhlIHNhbWUgPEZhc3RGaWVsZD4gY29tcG9uZW50OyA8RmFzdEZpZWxkIGNvbXBvbmVudD4gd2lsbCBiZSBpZ25vcmVkLidcbiAgICApO1xuXG4gICAgd2FybmluZyhcbiAgICAgICEocmVuZGVyICYmIGNoaWxkcmVuICYmICFpc0VtcHR5Q2hpbGRyZW4oY2hpbGRyZW4pKSxcbiAgICAgICdZb3Ugc2hvdWxkIG5vdCB1c2UgPEZhc3RGaWVsZCByZW5kZXI+IGFuZCA8RmFzdEZpZWxkIGNoaWxkcmVuPiBpbiB0aGUgc2FtZSA8RmFzdEZpZWxkPiBjb21wb25lbnQ7IDxGYXN0RmllbGQgY2hpbGRyZW4+IHdpbGwgYmUgaWdub3JlZCdcbiAgICApO1xuICB9XG5cbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKFxuICAgIHByb3BzOiBGYXN0RmllbGRBdHRyaWJ1dGVzPFByb3BzPiAmIHsgZm9ybWlrOiBGb3JtaWtDb250ZXh0PFZhbHVlcz4gfVxuICApIHtcbiAgICBpZiAodGhpcy5wcm9wcy5zaG91bGRVcGRhdGUpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLnNob3VsZFVwZGF0ZShwcm9wcywgdGhpcy5wcm9wcyk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGdldEluKHRoaXMucHJvcHMuZm9ybWlrLnZhbHVlcywgdGhpcy5wcm9wcy5uYW1lKSAhPT1cbiAgICAgICAgZ2V0SW4ocHJvcHMuZm9ybWlrLnZhbHVlcywgdGhpcy5wcm9wcy5uYW1lKSB8fFxuICAgICAgZ2V0SW4odGhpcy5wcm9wcy5mb3JtaWsuZXJyb3JzLCB0aGlzLnByb3BzLm5hbWUpICE9PVxuICAgICAgICBnZXRJbihwcm9wcy5mb3JtaWsuZXJyb3JzLCB0aGlzLnByb3BzLm5hbWUpIHx8XG4gICAgICBnZXRJbih0aGlzLnByb3BzLmZvcm1pay50b3VjaGVkLCB0aGlzLnByb3BzLm5hbWUpICE9PVxuICAgICAgICBnZXRJbihwcm9wcy5mb3JtaWsudG91Y2hlZCwgdGhpcy5wcm9wcy5uYW1lKSB8fFxuICAgICAgT2JqZWN0LmtleXModGhpcy5wcm9wcykubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhwcm9wcykubGVuZ3RoIHx8XG4gICAgICB0aGlzLnByb3BzLmZvcm1pay5pc1N1Ym1pdHRpbmcgIT09IHByb3BzLmZvcm1pay5pc1N1Ym1pdHRpbmdcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLy8gUmVnaXN0ZXIgdGhlIEZpZWxkIHdpdGggdGhlIHBhcmVudCBGb3JtaWsuIFBhcmVudCB3aWxsIGN5Y2xlIHRocm91Z2hcbiAgICAvLyByZWdpc3RlcmVkIEZpZWxkJ3MgdmFsaWRhdGUgZm5zIHJpZ2h0IHByaW9yIHRvIHN1Ym1pdFxuICAgIHRoaXMucHJvcHMuZm9ybWlrLnJlZ2lzdGVyRmllbGQodGhpcy5wcm9wcy5uYW1lLCB0aGlzKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShcbiAgICBwcmV2UHJvcHM6IEZhc3RGaWVsZEF0dHJpYnV0ZXM8UHJvcHM+ICYgeyBmb3JtaWs6IEZvcm1pa0NvbnRleHQ8VmFsdWVzPiB9XG4gICkge1xuICAgIGlmICh0aGlzLnByb3BzLm5hbWUgIT09IHByZXZQcm9wcy5uYW1lKSB7XG4gICAgICB0aGlzLnByb3BzLmZvcm1pay51bnJlZ2lzdGVyRmllbGQocHJldlByb3BzLm5hbWUpO1xuICAgICAgdGhpcy5wcm9wcy5mb3JtaWsucmVnaXN0ZXJGaWVsZCh0aGlzLnByb3BzLm5hbWUsIHRoaXMpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRlICE9PSBwcmV2UHJvcHMudmFsaWRhdGUpIHtcbiAgICAgIHRoaXMucHJvcHMuZm9ybWlrLnJlZ2lzdGVyRmllbGQodGhpcy5wcm9wcy5uYW1lLCB0aGlzKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLnByb3BzLmZvcm1pay51bnJlZ2lzdGVyRmllbGQodGhpcy5wcm9wcy5uYW1lKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICB2YWxpZGF0ZSxcbiAgICAgIG5hbWUsXG4gICAgICByZW5kZXIsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIGNvbXBvbmVudCA9ICdpbnB1dCcsXG4gICAgICBmb3JtaWssXG4gICAgICBzaG91bGRVcGRhdGUsXG4gICAgICAuLi5wcm9wc1xuICAgIH0gPSAodGhpcy5wcm9wcyBhcyBGYXN0RmllbGRBdHRyaWJ1dGVzPFByb3BzPiAmIHtcbiAgICAgIGZvcm1pazogRm9ybWlrQ29udGV4dDxWYWx1ZXM+O1xuICAgIH0pIGFzIGFueTtcbiAgICBjb25zdCB7XG4gICAgICB2YWxpZGF0ZTogX3ZhbGlkYXRlLFxuICAgICAgdmFsaWRhdGlvblNjaGVtYTogX3ZhbGlkYXRpb25TY2hlbWEsXG4gICAgICAuLi5yZXN0T2ZGb3JtaWtcbiAgICB9ID0gZm9ybWlrO1xuICAgIGNvbnN0IGZpZWxkID0ge1xuICAgICAgdmFsdWU6XG4gICAgICAgIHByb3BzLnR5cGUgPT09ICdyYWRpbycgfHwgcHJvcHMudHlwZSA9PT0gJ2NoZWNrYm94J1xuICAgICAgICAgID8gcHJvcHMudmFsdWUgLy8gUmVhY3QgdXNlcyBjaGVja2VkPXt9IGZvciB0aGVzZSBpbnB1dHNcbiAgICAgICAgICA6IGdldEluKGZvcm1pay52YWx1ZXMsIG5hbWUpLFxuICAgICAgbmFtZSxcbiAgICAgIG9uQ2hhbmdlOiBmb3JtaWsuaGFuZGxlQ2hhbmdlLFxuICAgICAgb25CbHVyOiBmb3JtaWsuaGFuZGxlQmx1cixcbiAgICB9O1xuICAgIGNvbnN0IGJhZyA9IHsgZmllbGQsIGZvcm06IHJlc3RPZkZvcm1payB9O1xuXG4gICAgaWYgKHJlbmRlcikge1xuICAgICAgcmV0dXJuIChyZW5kZXIgYXMgYW55KShiYWcpO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKGNoaWxkcmVuKSkge1xuICAgICAgcmV0dXJuIChjaGlsZHJlbiBhcyAocHJvcHM6IEZhc3RGaWVsZFByb3BzPGFueT4pID0+IFJlYWN0LlJlYWN0Tm9kZSkoYmFnKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGNvbXBvbmVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IHsgaW5uZXJSZWYsIC4uLnJlc3QgfSA9IHByb3BzO1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50IGFzIGFueSwge1xuICAgICAgICByZWY6IGlubmVyUmVmLFxuICAgICAgICAuLi5maWVsZCxcbiAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgY2hpbGRyZW4sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChjb21wb25lbnQgYXMgYW55LCB7XG4gICAgICAuLi5iYWcsXG4gICAgICAuLi5wcm9wcyxcbiAgICAgIGNoaWxkcmVuLFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBGYXN0RmllbGQgPSBjb25uZWN0PEZhc3RGaWVsZEF0dHJpYnV0ZXM8YW55PiwgYW55PihGYXN0RmllbGRJbm5lcik7XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBGb3JtaWtDb250ZXh0IH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBnZXRJbiwgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJy4vY29ubmVjdCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JNZXNzYWdlUHJvcHMge1xuICBuYW1lOiBzdHJpbmc7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgY29tcG9uZW50Pzogc3RyaW5nIHwgUmVhY3QuQ29tcG9uZW50VHlwZTtcbiAgY2hpbGRyZW4/OiAoKGVycm9yTWVzc2FnZTogc3RyaW5nKSA9PiBSZWFjdC5SZWFjdE5vZGUpO1xuICByZW5kZXI/OiAoKGVycm9yTWVzc2FnZTogc3RyaW5nKSA9PiBSZWFjdC5SZWFjdE5vZGUpO1xufVxuXG5jbGFzcyBFcnJvck1lc3NhZ2VJbXBsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFxuICBFcnJvck1lc3NhZ2VQcm9wcyAmIHsgZm9ybWlrOiBGb3JtaWtDb250ZXh0PGFueT4gfVxuPiB7XG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShcbiAgICBwcm9wczogRXJyb3JNZXNzYWdlUHJvcHMgJiB7IGZvcm1pazogRm9ybWlrQ29udGV4dDxhbnk+IH1cbiAgKSB7XG4gICAgaWYgKFxuICAgICAgZ2V0SW4odGhpcy5wcm9wcy5mb3JtaWsuZXJyb3JzLCB0aGlzLnByb3BzLm5hbWUpICE9PVxuICAgICAgICBnZXRJbihwcm9wcy5mb3JtaWsuZXJyb3JzLCB0aGlzLnByb3BzLm5hbWUpIHx8XG4gICAgICBnZXRJbih0aGlzLnByb3BzLmZvcm1pay50b3VjaGVkLCB0aGlzLnByb3BzLm5hbWUpICE9PVxuICAgICAgICBnZXRJbihwcm9wcy5mb3JtaWsudG91Y2hlZCwgdGhpcy5wcm9wcy5uYW1lKSB8fFxuICAgICAgT2JqZWN0LmtleXModGhpcy5wcm9wcykubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhwcm9wcykubGVuZ3RoXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQgeyBjb21wb25lbnQsIGZvcm1paywgcmVuZGVyLCBjaGlsZHJlbiwgbmFtZSwgLi4ucmVzdCB9ID0gdGhpcy5wcm9wcztcblxuICAgIGNvbnN0IHRvdWNoID0gZ2V0SW4oZm9ybWlrLnRvdWNoZWQsIG5hbWUpO1xuICAgIGNvbnN0IGVycm9yID0gZ2V0SW4oZm9ybWlrLmVycm9ycywgbmFtZSk7XG5cbiAgICByZXR1cm4gISF0b3VjaCAmJiAhIWVycm9yXG4gICAgICA/IHJlbmRlclxuICAgICAgICA/IGlzRnVuY3Rpb24ocmVuZGVyKSA/IHJlbmRlcihlcnJvcikgOiBudWxsXG4gICAgICAgIDogY2hpbGRyZW5cbiAgICAgICAgICA/IGlzRnVuY3Rpb24oY2hpbGRyZW4pID8gY2hpbGRyZW4oZXJyb3IpIDogbnVsbFxuICAgICAgICAgIDogY29tcG9uZW50XG4gICAgICAgICAgICA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50LCByZXN0IGFzIGFueSwgZXJyb3IpXG4gICAgICAgICAgICA6IGVycm9yXG4gICAgICA6IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IEVycm9yTWVzc2FnZSA9IGNvbm5lY3Q8XG4gIEVycm9yTWVzc2FnZVByb3BzLFxuICBFcnJvck1lc3NhZ2VQcm9wcyAmIHsgZm9ybWlrOiBGb3JtaWtDb250ZXh0PGFueT4gfVxuPihFcnJvck1lc3NhZ2VJbXBsKTtcbiJdfQ==