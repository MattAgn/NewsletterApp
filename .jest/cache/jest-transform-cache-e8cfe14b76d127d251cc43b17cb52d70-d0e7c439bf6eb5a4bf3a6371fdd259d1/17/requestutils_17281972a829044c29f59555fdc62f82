eebff790a56f5e53235b374bf9c63967
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _extends3 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var URL = require('whatwg-url');

var absoluteUrlRX = new RegExp('^(?:[a-z]+:)?//', 'i');

var headersToArray = function headersToArray(headers) {
  if (typeof headers.raw === 'function') {
    return Object.entries(headers.raw());
  } else if (headers[typeof Symbol === "function" ? Symbol.iterator : "@@iterator"]) {
    return (0, _toConsumableArray2.default)(headers);
  } else {
    return Object.entries(headers);
  }
};

var zipObject = function zipObject(entries) {
  return entries.reduce(function (obj, _ref) {
    var _ref2 = (0, _slicedToArray2.default)(_ref, 2),
        key = _ref2[0],
        val = _ref2[1];

    return (0, _extends3.default)(obj, (0, _defineProperty2.default)({}, key, val));
  }, {});
};

var normalizeUrl = function normalizeUrl(url) {
  if (typeof url === 'function' || url instanceof RegExp || /^(begin|end|glob|express|path)\:/.test(url)) {
    return url;
  }

  if (absoluteUrlRX.test(url)) {
    var u = new URL.URL(url);
    return u.href;
  } else {
    var _u = new URL.URL(url, 'http://dummy');

    return _u.pathname + _u.search;
  }
};

module.exports = {
  normalizeRequest: function normalizeRequest(url, options, Request) {
    if (Request.prototype.isPrototypeOf(url)) {
      var obj = {
        url: normalizeUrl(url.url),
        options: (0, _extends3.default)({
          method: url.method
        }, options),
        request: url
      };
      var headers = headersToArray(url.headers);

      if (headers.length) {
        obj.options.headers = zipObject(headers);
      }

      return obj;
    } else if (typeof url === 'string' || typeof url === 'object' && 'href' in url) {
      return {
        url: normalizeUrl(url),
        options: options
      };
    } else if (typeof url === 'object') {
      throw new TypeError('fetch-mock: Unrecognised Request object. Read the Config and Installation sections of the docs');
    } else {
      throw new TypeError('fetch-mock: Invalid arguments passed to fetch');
    }
  },
  normalizeUrl: normalizeUrl,
  getPath: function getPath(url) {
    var u = absoluteUrlRX.test(url) ? new URL.URL(url) : new URL.URL(url, 'http://dummy');
    return u.pathname;
  },
  getQuery: function getQuery(url) {
    var u = absoluteUrlRX.test(url) ? new URL.URL(url) : new URL.URL(url, 'http://dummy');
    return u.search ? u.search.substr(1) : '';
  },
  headers: {
    normalize: function normalize(headers) {
      return zipObject(headersToArray(headers));
    },
    toLowerCase: function toLowerCase(headers) {
      return Object.keys(headers).reduce(function (obj, k) {
        obj[k.toLowerCase()] = headers[k];
        return obj;
      }, {});
    },
    equal: function equal(actualHeader, expectedHeader) {
      actualHeader = Array.isArray(actualHeader) ? actualHeader : [actualHeader];
      expectedHeader = Array.isArray(expectedHeader) ? expectedHeader : [expectedHeader];

      if (actualHeader.length !== expectedHeader.length) {
        return false;
      }

      return actualHeader.every(function (val, i) {
        return val === expectedHeader[i];
      });
    }
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcXVlc3QtdXRpbHMuanMiXSwibmFtZXMiOlsiVVJMIiwicmVxdWlyZSIsImFic29sdXRlVXJsUlgiLCJSZWdFeHAiLCJoZWFkZXJzVG9BcnJheSIsImhlYWRlcnMiLCJyYXciLCJPYmplY3QiLCJlbnRyaWVzIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJ6aXBPYmplY3QiLCJyZWR1Y2UiLCJvYmoiLCJrZXkiLCJ2YWwiLCJub3JtYWxpemVVcmwiLCJ1cmwiLCJ0ZXN0IiwidSIsImhyZWYiLCJwYXRobmFtZSIsInNlYXJjaCIsIm1vZHVsZSIsImV4cG9ydHMiLCJub3JtYWxpemVSZXF1ZXN0Iiwib3B0aW9ucyIsIlJlcXVlc3QiLCJwcm90b3R5cGUiLCJpc1Byb3RvdHlwZU9mIiwibWV0aG9kIiwicmVxdWVzdCIsImxlbmd0aCIsIlR5cGVFcnJvciIsImdldFBhdGgiLCJnZXRRdWVyeSIsInN1YnN0ciIsIm5vcm1hbGl6ZSIsInRvTG93ZXJDYXNlIiwia2V5cyIsImsiLCJlcXVhbCIsImFjdHVhbEhlYWRlciIsImV4cGVjdGVkSGVhZGVyIiwiQXJyYXkiLCJpc0FycmF5IiwiZXZlcnkiLCJpIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsSUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsWUFBRCxDQUFuQjs7QUFFQSxJQUFNQyxhQUFhLEdBQUcsSUFBSUMsTUFBSixDQUFXLGlCQUFYLEVBQThCLEdBQTlCLENBQXRCOztBQUVBLElBQU1DLGNBQWMsR0FBRyxTQUFqQkEsY0FBaUIsQ0FBQUMsT0FBTyxFQUFJO0FBRWpDLE1BQUksT0FBT0EsT0FBTyxDQUFDQyxHQUFmLEtBQXVCLFVBQTNCLEVBQXVDO0FBQ3RDLFdBQU9DLE1BQU0sQ0FBQ0MsT0FBUCxDQUFlSCxPQUFPLENBQUNDLEdBQVIsRUFBZixDQUFQO0FBQ0EsR0FGRCxNQUVPLElBQUlELE9BQU8sZ0NBQUNJLE1BQU0sQ0FBQ0MsUUFBUixnQkFBWCxFQUE4QjtBQUNwQyw0Q0FBV0wsT0FBWDtBQUNB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RCxDQUZIO0FBR0FDLE1BQUFBLGNBQWMsR0FBR0MsS0FBSyxDQUFDQyxPQUFOLENBQWNGLGNBQWQsSUFDZEEsY0FEYyxHQUVkLENBQUNBLGNBQUQsQ0FGSDs7QUFJQSxVQUFJRCxZQUFZLENBQUNWLE1BQWIsS0FBd0JXLGNBQWMsQ0FBQ1gsTUFBM0MsRUFBbUQ7QUFDbEQsZUFBTyxLQUFQO0FBQ0E7O0FBRUQsYUFBT1UsWUFBWSxDQUFDSSxLQUFiLENBQW1CLFVBQUMvQixHQUFELEVBQU1nQyxDQUFOO0FBQUEsZUFBWWhDLEdBQUcsS0FBSzRCLGNBQWMsQ0FBQ0ksQ0FBRCxDQUFsQztBQUFBLE9BQW5CLENBQVA7QUFDQTtBQXBCTztBQW5ETyxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFVSTCA9IHJlcXVpcmUoJ3doYXR3Zy11cmwnKTtcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xOTcwOTg0Ni8zMDgyMzdcbmNvbnN0IGFic29sdXRlVXJsUlggPSBuZXcgUmVnRXhwKCdeKD86W2Etel0rOik/Ly8nLCAnaScpO1xuXG5jb25zdCBoZWFkZXJzVG9BcnJheSA9IGhlYWRlcnMgPT4ge1xuXHQvLyBub2RlLWZldGNoIDEgSGVhZGVyc1xuXHRpZiAodHlwZW9mIGhlYWRlcnMucmF3ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmV0dXJuIE9iamVjdC5lbnRyaWVzKGhlYWRlcnMucmF3KCkpO1xuXHR9IGVsc2UgaWYgKGhlYWRlcnNbU3ltYm9sLml0ZXJhdG9yXSkge1xuXHRcdHJldHVybiBbLi4uaGVhZGVyc107XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIE9iamVjdC5lbnRyaWVzKGhlYWRlcnMpO1xuXHR9XG59O1xuXG5jb25zdCB6aXBPYmplY3QgPSBlbnRyaWVzID0+XG5cdGVudHJpZXMucmVkdWNlKChvYmosIFtrZXksIHZhbF0pID0+IE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWwgfSksIHt9KTtcblxuY29uc3Qgbm9ybWFsaXplVXJsID0gdXJsID0+IHtcblx0aWYgKFxuXHRcdHR5cGVvZiB1cmwgPT09ICdmdW5jdGlvbicgfHxcblx0XHR1cmwgaW5zdGFuY2VvZiBSZWdFeHAgfHxcblx0XHQvXihiZWdpbnxlbmR8Z2xvYnxleHByZXNzfHBhdGgpXFw6Ly50ZXN0KHVybClcblx0KSB7XG5cdFx0cmV0dXJuIHVybDtcblx0fVxuXHRpZiAoYWJzb2x1dGVVcmxSWC50ZXN0KHVybCkpIHtcblx0XHRjb25zdCB1ID0gbmV3IFVSTC5VUkwodXJsKTtcblx0XHRyZXR1cm4gdS5ocmVmO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IHUgPSBuZXcgVVJMLlVSTCh1cmwsICdodHRwOi8vZHVtbXknKTtcblx0XHRyZXR1cm4gdS5wYXRobmFtZSArIHUuc2VhcmNoO1xuXHR9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0bm9ybWFsaXplUmVxdWVzdDogKHVybCwgb3B0aW9ucywgUmVxdWVzdCkgPT4ge1xuXHRcdGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHVybCkpIHtcblx0XHRcdGNvbnN0IG9iaiA9IHtcblx0XHRcdFx0dXJsOiBub3JtYWxpemVVcmwodXJsLnVybCksXG5cdFx0XHRcdG9wdGlvbnM6IE9iamVjdC5hc3NpZ24oXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bWV0aG9kOiB1cmwubWV0aG9kXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRvcHRpb25zXG5cdFx0XHRcdCksXG5cdFx0XHRcdHJlcXVlc3Q6IHVybFxuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgaGVhZGVycyA9IGhlYWRlcnNUb0FycmF5KHVybC5oZWFkZXJzKTtcblxuXHRcdFx0aWYgKGhlYWRlcnMubGVuZ3RoKSB7XG5cdFx0XHRcdG9iai5vcHRpb25zLmhlYWRlcnMgPSB6aXBPYmplY3QoaGVhZGVycyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb2JqO1xuXHRcdH0gZWxzZSBpZiAoXG5cdFx0XHR0eXBlb2YgdXJsID09PSAnc3RyaW5nJyB8fFxuXHRcdFx0Ly8gaG9ycmlibGUgVVJMIG9iamVjdCBkdWNrLXR5cGluZ1xuXHRcdFx0KHR5cGVvZiB1cmwgPT09ICdvYmplY3QnICYmICdocmVmJyBpbiB1cmwpXG5cdFx0KSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1cmw6IG5vcm1hbGl6ZVVybCh1cmwpLFxuXHRcdFx0XHRvcHRpb25zOiBvcHRpb25zXG5cdFx0XHR9O1xuXHRcdH0gZWxzZSBpZiAodHlwZW9mIHVybCA9PT0gJ29iamVjdCcpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoXG5cdFx0XHRcdCdmZXRjaC1tb2NrOiBVbnJlY29nbmlzZWQgUmVxdWVzdCBvYmplY3QuIFJlYWQgdGhlIENvbmZpZyBhbmQgSW5zdGFsbGF0aW9uIHNlY3Rpb25zIG9mIHRoZSBkb2NzJ1xuXHRcdFx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignZmV0Y2gtbW9jazogSW52YWxpZCBhcmd1bWVudHMgcGFzc2VkIHRvIGZldGNoJyk7XG5cdFx0fVxuXHR9LFxuXHRub3JtYWxpemVVcmwsXG5cdGdldFBhdGg6IHVybCA9PiB7XG5cdFx0Y29uc3QgdSA9IGFic29sdXRlVXJsUlgudGVzdCh1cmwpXG5cdFx0XHQ/IG5ldyBVUkwuVVJMKHVybClcblx0XHRcdDogbmV3IFVSTC5VUkwodXJsLCAnaHR0cDovL2R1bW15Jyk7XG5cdFx0cmV0dXJuIHUucGF0aG5hbWU7XG5cdH0sXG5cblx0Z2V0UXVlcnk6IHVybCA9PiB7XG5cdFx0Y29uc3QgdSA9IGFic29sdXRlVXJsUlgudGVzdCh1cmwpXG5cdFx0XHQ/IG5ldyBVUkwuVVJMKHVybClcblx0XHRcdDogbmV3IFVSTC5VUkwodXJsLCAnaHR0cDovL2R1bW15Jyk7XG5cdFx0cmV0dXJuIHUuc2VhcmNoID8gdS5zZWFyY2guc3Vic3RyKDEpIDogJyc7XG5cdH0sXG5cdGhlYWRlcnM6IHtcblx0XHRub3JtYWxpemU6IGhlYWRlcnMgPT4gemlwT2JqZWN0KGhlYWRlcnNUb0FycmF5KGhlYWRlcnMpKSxcblx0XHR0b0xvd2VyQ2FzZTogaGVhZGVycyA9PlxuXHRcdFx0T2JqZWN0LmtleXMoaGVhZGVycykucmVkdWNlKChvYmosIGspID0+IHtcblx0XHRcdFx0b2JqW2sudG9Mb3dlckNhc2UoKV0gPSBoZWFkZXJzW2tdO1xuXHRcdFx0XHRyZXR1cm4gb2JqO1xuXHRcdFx0fSwge30pLFxuXHRcdGVxdWFsOiAoYWN0dWFsSGVhZGVyLCBleHBlY3RlZEhlYWRlcikgPT4ge1xuXHRcdFx0YWN0dWFsSGVhZGVyID0gQXJyYXkuaXNBcnJheShhY3R1YWxIZWFkZXIpXG5cdFx0XHRcdD8gYWN0dWFsSGVhZGVyXG5cdFx0XHRcdDogW2FjdHVhbEhlYWRlcl07XG5cdFx0XHRleHBlY3RlZEhlYWRlciA9IEFycmF5LmlzQXJyYXkoZXhwZWN0ZWRIZWFkZXIpXG5cdFx0XHRcdD8gZXhwZWN0ZWRIZWFkZXJcblx0XHRcdFx0OiBbZXhwZWN0ZWRIZWFkZXJdO1xuXG5cdFx0XHRpZiAoYWN0dWFsSGVhZGVyLmxlbmd0aCAhPT0gZXhwZWN0ZWRIZWFkZXIubGVuZ3RoKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGFjdHVhbEhlYWRlci5ldmVyeSgodmFsLCBpKSA9PiB2YWwgPT09IGV4cGVjdGVkSGVhZGVyW2ldKTtcblx0XHR9XG5cdH1cbn07XG4iXX0=