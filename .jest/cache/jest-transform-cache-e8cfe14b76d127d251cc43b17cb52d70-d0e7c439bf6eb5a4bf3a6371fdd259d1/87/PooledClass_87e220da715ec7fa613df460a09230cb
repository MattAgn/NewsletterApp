dbb4943de35e7f6504817b93019282f3
'use strict';

var invariant = require('invariant');

var oneArgumentPooler = function oneArgumentPooler(copyFieldsFrom) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var _instance = Klass.instancePool.pop();

    Klass.call(_instance, copyFieldsFrom);
    return _instance;
  } else {
    return new Klass(copyFieldsFrom);
  }
};

var twoArgumentPooler = function twoArgumentPooler(a1, a2) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var _instance2 = Klass.instancePool.pop();

    Klass.call(_instance2, a1, a2);
    return _instance2;
  } else {
    return new Klass(a1, a2);
  }
};

var threeArgumentPooler = function threeArgumentPooler(a1, a2, a3) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var _instance3 = Klass.instancePool.pop();

    Klass.call(_instance3, a1, a2, a3);
    return _instance3;
  } else {
    return new Klass(a1, a2, a3);
  }
};

var fourArgumentPooler = function fourArgumentPooler(a1, a2, a3, a4) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var _instance4 = Klass.instancePool.pop();

    Klass.call(_instance4, a1, a2, a3, a4);
    return _instance4;
  } else {
    return new Klass(a1, a2, a3, a4);
  }
};

var standardReleaser = function standardReleaser(instance) {
  var Klass = this;
  invariant(instance instanceof Klass, 'Trying to release an instance into a pool of a different type.');
  instance.destructor();

  if (Klass.instancePool.length < Klass.poolSize) {
    Klass.instancePool.push(instance);
  }
};

var DEFAULT_POOL_SIZE = 10;
var DEFAULT_POOLER = oneArgumentPooler;

var addPoolingTo = function addPoolingTo(CopyConstructor, pooler) {
  var NewKlass = CopyConstructor;
  NewKlass.instancePool = [];
  NewKlass.getPooled = pooler || DEFAULT_POOLER;

  if (!NewKlass.poolSize) {
    NewKlass.poolSize = DEFAULT_POOL_SIZE;
  }

  NewKlass.release = standardReleaser;
  return NewKlass;
};

var PooledClass = {
  addPoolingTo: addPoolingTo,
  oneArgumentPooler: oneArgumentPooler,
  twoArgumentPooler: twoArgumentPooler,
  threeArgumentPooler: threeArgumentPooler,
  fourArgumentPooler: fourArgumentPooler
};
module.exports = PooledClass;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBvb2xlZENsYXNzLmpzIl0sIm5hbWVzIjpbImludmFyaWFudCIsInJlcXVpcmUiLCJvbmVBcmd1bWVudFBvb2xlciIsImNvcHlGaWVsZHNGcm9tIiwiS2xhc3MiLCJpbnN0YW5jZVBvb2wiLCJsZW5ndGgiLCJpbnN0YW5jZSIsInBvcCIsImNhbGwiLCJ0d29Bcmd1bWVudFBvb2xlciIsImExIiwiYTIiLCJ0aHJlZUFyZ3VtZW50UG9vbGVyIiwiYTMiLCJmb3VyQXJndW1lbnRQb29sZXIiLCJhNCIsInN0YW5kYXJkUmVsZWFzZXIiLCJkZXN0cnVjdG9yIiwicG9vbFNpemUiLCJwdXNoIiwiREVGQVVMVF9QT09MX1NJWkUiLCJERUZBVUxUX1BPT0xFUiIsImFkZFBvb2xpbmdUbyIsIkNvcHlDb25zdHJ1Y3RvciIsInBvb2xlciIsIk5ld0tsYXNzIiwiZ2V0UG9vbGVkIiwicmVsZWFzZSIsIlBvb2xlZENsYXNzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBVUE7O0FBRUEsSUFBTUEsU0FBUyxHQUFHQyxPQUFPLENBQUMsV0FBRCxDQUF6Qjs7QUFTQSxJQUFNQyxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQW9CLENBQVNDLGNBQVQsRUFBeUI7QUFDakQsTUFBTUMsS0FBSyxHQUFHLElBQWQ7O0FBQ0EsTUFBSUEsS0FBSyxDQUFDQyxZQUFOLENBQW1CQyxNQUF2QixFQUErQjtBQUM3QixRQUFNQyxTQUFRLEdBQUdILEtBQUssQ0FBQ0MsWUFBTixDQUFtQkcsR0FBbkIsRUFBakI7O0FBQ0FKLElBQUFBLEtBQUssQ0FBQ0ssSUFBTixDQUFXRixTQUFYLEVBQXFCSixjQUFyQjtBQUNBLFdBQU9JLFNBQVA7QUFDRCxHQUpELE1BSU87QUFDTCxXQUFPLElBQUlILEtBQUosQ0FBVUQsY0FBVixDQUFQO0FBQ0Q7QUFDRixDQVREOztBQVdBLElBQU1PLGlCQUFpQixHQUFHLFNBQXBCQSxpQkFBb0IsQ0FBU0MsRUFBVCxFQUFhQyxFQUFiLEVBQWlCO0FBQ3pD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QW5CO0FBQ0EsU0FBT1MsUUFBUDtBQUNELENBbkJEOztBQXFCQSxJQUFNRyxXQUFXLEdBQUc7QUFDbEJOLEVBQUFBLFlBQVksRUFBRUEsWUFESTtBQUVsQnJCLEVBQUFBLGlCQUFpQixFQUFHQSxpQkFGRjtBQUdsQlEsRUFBQUEsaUJBQWlCLEVBQUdBLGlCQUhGO0FBSWxCRyxFQUFBQSxtQkFBbUIsRUFBR0EsbUJBSko7QUFLbEJFLEVBQUFBLGtCQUFrQixFQUFHQTtBQUxILENBQXBCO0FBUUFlLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkYsV0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBTdGF0aWMgcG9vbGVycy4gU2V2ZXJhbCBjdXN0b20gdmVyc2lvbnMgZm9yIGVhY2ggcG90ZW50aWFsIG51bWJlciBvZlxuICogYXJndW1lbnRzLiBBIGNvbXBsZXRlbHkgZ2VuZXJpYyBwb29sZXIgaXMgZWFzeSB0byBpbXBsZW1lbnQsIGJ1dCB3b3VsZFxuICogcmVxdWlyZSBhY2Nlc3NpbmcgdGhlIGBhcmd1bWVudHNgIG9iamVjdC4gSW4gZWFjaCBvZiB0aGVzZSwgYHRoaXNgIHJlZmVycyB0b1xuICogdGhlIENsYXNzIGl0c2VsZiwgbm90IGFuIGluc3RhbmNlLiBJZiBhbnkgb3RoZXJzIGFyZSBuZWVkZWQsIHNpbXBseSBhZGQgdGhlbVxuICogaGVyZSwgb3IgaW4gdGhlaXIgb3duIGZpbGVzLlxuICovXG5jb25zdCBvbmVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uKGNvcHlGaWVsZHNGcm9tKSB7XG4gIGNvbnN0IEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IEtsYXNzLmluc3RhbmNlUG9vbC5wb3AoKTtcbiAgICBLbGFzcy5jYWxsKGluc3RhbmNlLCBjb3B5RmllbGRzRnJvbSk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoY29weUZpZWxkc0Zyb20pO1xuICB9XG59O1xuXG5jb25zdCB0d29Bcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uKGExLCBhMikge1xuICBjb25zdCBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyKTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIpO1xuICB9XG59O1xuXG5jb25zdCB0aHJlZUFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24oYTEsIGEyLCBhMykge1xuICBjb25zdCBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMyk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyLCBhMyk7XG4gIH1cbn07XG5cbmNvbnN0IGZvdXJBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uKGExLCBhMiwgYTMsIGE0KSB7XG4gIGNvbnN0IEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IEtsYXNzLmluc3RhbmNlUG9vbC5wb3AoKTtcbiAgICBLbGFzcy5jYWxsKGluc3RhbmNlLCBhMSwgYTIsIGEzLCBhNCk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyLCBhMywgYTQpO1xuICB9XG59O1xuXG5jb25zdCBzdGFuZGFyZFJlbGVhc2VyID0gZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgY29uc3QgS2xhc3MgPSB0aGlzO1xuICBpbnZhcmlhbnQoXG4gICAgaW5zdGFuY2UgaW5zdGFuY2VvZiBLbGFzcyxcbiAgICAnVHJ5aW5nIHRvIHJlbGVhc2UgYW4gaW5zdGFuY2UgaW50byBhIHBvb2wgb2YgYSBkaWZmZXJlbnQgdHlwZS4nLFxuICApO1xuICBpbnN0YW5jZS5kZXN0cnVjdG9yKCk7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoIDwgS2xhc3MucG9vbFNpemUpIHtcbiAgICBLbGFzcy5pbnN0YW5jZVBvb2wucHVzaChpbnN0YW5jZSk7XG4gIH1cbn07XG5cbmNvbnN0IERFRkFVTFRfUE9PTF9TSVpFID0gMTA7XG5jb25zdCBERUZBVUxUX1BPT0xFUiA9IG9uZUFyZ3VtZW50UG9vbGVyO1xuXG50eXBlIFBvb2xlciA9IGFueTtcblxuLyoqXG4gKiBBdWdtZW50cyBgQ29weUNvbnN0cnVjdG9yYCB0byBiZSBhIHBvb2xhYmxlIGNsYXNzLCBhdWdtZW50aW5nIG9ubHkgdGhlIGNsYXNzXG4gKiBpdHNlbGYgKHN0YXRpY2FsbHkpIG5vdCBhZGRpbmcgYW55IHByb3RvdHlwaWNhbCBmaWVsZHMuIEFueSBDb3B5Q29uc3RydWN0b3JcbiAqIHlvdSBnaXZlIHRoaXMgbWF5IGhhdmUgYSBgcG9vbFNpemVgIHByb3BlcnR5LCBhbmQgd2lsbCBsb29rIGZvciBhXG4gKiBwcm90b3R5cGljYWwgYGRlc3RydWN0b3JgIG9uIGluc3RhbmNlcy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBDb3B5Q29uc3RydWN0b3IgQ29uc3RydWN0b3IgdGhhdCBjYW4gYmUgdXNlZCB0byByZXNldC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBvb2xlciBDdXN0b21pemFibGUgcG9vbGVyLlxuICovXG5jb25zdCBhZGRQb29saW5nVG8gPSBmdW5jdGlvbjxUPihcbiAgQ29weUNvbnN0cnVjdG9yOiBDbGFzczxUPixcbiAgcG9vbGVyOiBQb29sZXIsXG4pOiBDbGFzczxUPiAmIHtcbiAgZ2V0UG9vbGVkKFxuICAgIC4uLmFyZ3M6ICRSZWFkT25seUFycmF5PG1peGVkPlxuICApOiAvKiBhcmd1bWVudHMgb2YgdGhlIGNvbnN0cnVjdG9yICovIFQsXG4gIHJlbGVhc2UoaW5zdGFuY2U6IG1peGVkKTogdm9pZCxcbn0ge1xuICAvLyBDYXN0aW5nIGFzIGFueSBzbyB0aGF0IGZsb3cgaWdub3JlcyB0aGUgYWN0dWFsIGltcGxlbWVudGF0aW9uIGFuZCB0cnVzdHNcbiAgLy8gaXQgdG8gbWF0Y2ggdGhlIHR5cGUgd2UgZGVjbGFyZWRcbiAgY29uc3QgTmV3S2xhc3MgPSAoQ29weUNvbnN0cnVjdG9yOiBhbnkpO1xuICBOZXdLbGFzcy5pbnN0YW5jZVBvb2wgPSBbXTtcbiAgTmV3S2xhc3MuZ2V0UG9vbGVkID0gcG9vbGVyIHx8IERFRkFVTFRfUE9PTEVSO1xuICBpZiAoIU5ld0tsYXNzLnBvb2xTaXplKSB7XG4gICAgTmV3S2xhc3MucG9vbFNpemUgPSBERUZBVUxUX1BPT0xfU0laRTtcbiAgfVxuICBOZXdLbGFzcy5yZWxlYXNlID0gc3RhbmRhcmRSZWxlYXNlcjtcbiAgcmV0dXJuIE5ld0tsYXNzO1xufTtcblxuY29uc3QgUG9vbGVkQ2xhc3MgPSB7XG4gIGFkZFBvb2xpbmdUbzogYWRkUG9vbGluZ1RvLFxuICBvbmVBcmd1bWVudFBvb2xlcjogKG9uZUFyZ3VtZW50UG9vbGVyOiBQb29sZXIpLFxuICB0d29Bcmd1bWVudFBvb2xlcjogKHR3b0FyZ3VtZW50UG9vbGVyOiBQb29sZXIpLFxuICB0aHJlZUFyZ3VtZW50UG9vbGVyOiAodGhyZWVBcmd1bWVudFBvb2xlcjogUG9vbGVyKSxcbiAgZm91ckFyZ3VtZW50UG9vbGVyOiAoZm91ckFyZ3VtZW50UG9vbGVyOiBQb29sZXIpLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQb29sZWRDbGFzcztcbiJdfQ==