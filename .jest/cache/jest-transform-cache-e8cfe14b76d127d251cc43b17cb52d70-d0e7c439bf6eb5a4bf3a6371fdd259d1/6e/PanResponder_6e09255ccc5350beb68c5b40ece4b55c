c7187ded803d8d8ebd231b4518055b93
'use strict';

var InteractionManager = require('./InteractionManager');

var TouchHistoryMath = require('./TouchHistoryMath');

var currentCentroidXOfTouchesChangedAfter = TouchHistoryMath.currentCentroidXOfTouchesChangedAfter;
var currentCentroidYOfTouchesChangedAfter = TouchHistoryMath.currentCentroidYOfTouchesChangedAfter;
var previousCentroidXOfTouchesChangedAfter = TouchHistoryMath.previousCentroidXOfTouchesChangedAfter;
var previousCentroidYOfTouchesChangedAfter = TouchHistoryMath.previousCentroidYOfTouchesChangedAfter;
var currentCentroidX = TouchHistoryMath.currentCentroidX;
var currentCentroidY = TouchHistoryMath.currentCentroidY;
var PanResponder = {
  _initializeGestureState: function _initializeGestureState(gestureState) {
    gestureState.moveX = 0;
    gestureState.moveY = 0;
    gestureState.x0 = 0;
    gestureState.y0 = 0;
    gestureState.dx = 0;
    gestureState.dy = 0;
    gestureState.vx = 0;
    gestureState.vy = 0;
    gestureState.numberActiveTouches = 0;
    gestureState._accountsForMovesUpTo = 0;
  },
  _updateGestureStateOnMove: function _updateGestureStateOnMove(gestureState, touchHistory) {
    gestureState.numberActiveTouches = touchHistory.numberActiveTouches;
    gestureState.moveX = currentCentroidXOfTouchesChangedAfter(touchHistory, gestureState._accountsForMovesUpTo);
    gestureState.moveY = currentCentroidYOfTouchesChangedAfter(touchHistory, gestureState._accountsForMovesUpTo);
    var movedAfter = gestureState._accountsForMovesUpTo;
    var prevX = previousCentroidXOfTouchesChangedAfter(touchHistory, movedAfter);
    var x = currentCentroidXOfTouchesChangedAfter(touchHistory, movedAfter);
    var prevY = previousCentroidYOfTouchesChangedAfter(touchHistory, movedAfter);
    var y = currentCentroidYOfTouchesChangedAfter(touchHistory, movedAfter);
    var nextDX = gestureState.dx + (x - prevX);
    var nextDY = gestureState.dy + (y - prevY);
    var dt = touchHistory.mostRecentTimeStamp - gestureState._accountsForMovesUpTo;
    gestureState.vx = (nextDX - gestureState.dx) / dt;
    gestureState.vy = (nextDY - gestureState.dy) / dt;
    gestureState.dx = nextDX;
    gestureState.dy = nextDY;
    gestureState._accountsForMovesUpTo = touchHistory.mostRecentTimeStamp;
  },
  create: function create(config) {
    var interactionState = {
      handle: null
    };
    var gestureState = {
      stateID: Math.random(),
      moveX: 0,
      moveY: 0,
      x0: 0,
      y0: 0,
      dx: 0,
      dy: 0,
      vx: 0,
      vy: 0,
      numberActiveTouches: 0,
      _accountsForMovesUpTo: 0
    };
    var panHandlers = {
      onStartShouldSetResponder: function onStartShouldSetResponder(event) {
        return config.onStartShouldSetPanResponder == null ? false : config.onStartShouldSetPanResponder(event, gestureState);
      },
      onMoveShouldSetResponder: function onMoveShouldSetResponder(event) {
        return config.onMoveShouldSetPanResponder == null ? false : config.onMoveShouldSetPanResponder(event, gestureState);
      },
      onStartShouldSetResponderCapture: function onStartShouldSetResponderCapture(event) {
        if (event.nativeEvent.touches.length === 1) {
          PanResponder._initializeGestureState(gestureState);
        }

        gestureState.numberActiveTouches = event.touchHistory.numberActiveTouches;
        return config.onStartShouldSetPanResponderCapture != null ? config.onStartShouldSetPanResponderCapture(event, gestureState) : false;
      },
      onMoveShouldSetResponderCapture: function onMoveShouldSetResponderCapture(event) {
        var touchHistory = event.touchHistory;

        if (gestureState._accountsForMovesUpTo === touchHistory.mostRecentTimeStamp) {
          return false;
        }

        PanResponder._updateGestureStateOnMove(gestureState, touchHistory);

        return config.onMoveShouldSetPanResponderCapture ? config.onMoveShouldSetPanResponderCapture(event, gestureState) : false;
      },
      onResponderGrant: function onResponderGrant(event) {
        if (!interactionState.handle) {
          interactionState.handle = InteractionManager.createInteractionHandle();
        }

        gestureState.x0 = currentCentroidX(event.touchHistory);
        gestureState.y0 = currentCentroidY(event.touchHistory);
        gestureState.dx = 0;
        gestureState.dy = 0;

        if (config.onPanResponderGrant) {
          config.onPanResponderGrant(event, gestureState);
        }

        return config.onShouldBlockNativeResponder == null ? true : config.onShouldBlockNativeResponder(event, gestureState);
      },
      onResponderReject: function onResponderReject(event) {
        clearInteractionHandle(interactionState, config.onPanResponderReject, event, gestureState);
      },
      onResponderRelease: function onResponderRelease(event) {
        clearInteractionHandle(interactionState, config.onPanResponderRelease, event, gestureState);

        PanResponder._initializeGestureState(gestureState);
      },
      onResponderStart: function onResponderStart(event) {
        var touchHistory = event.touchHistory;
        gestureState.numberActiveTouches = touchHistory.numberActiveTouches;

        if (config.onPanResponderStart) {
          config.onPanResponderStart(event, gestureState);
        }
      },
      onResponderMove: function onResponderMove(event) {
        var touchHistory = event.touchHistory;

        if (gestureState._accountsForMovesUpTo === touchHistory.mostRecentTimeStamp) {
          return;
        }

        PanResponder._updateGestureStateOnMove(gestureState, touchHistory);

        if (config.onPanResponderMove) {
          config.onPanResponderMove(event, gestureState);
        }
      },
      onResponderEnd: function onResponderEnd(event) {
        var touchHistory = event.touchHistory;
        gestureState.numberActiveTouches = touchHistory.numberActiveTouches;
        clearInteractionHandle(interactionState, config.onPanResponderEnd, event, gestureState);
      },
      onResponderTerminate: function onResponderTerminate(event) {
        clearInteractionHandle(interactionState, config.onPanResponderTerminate, event, gestureState);

        PanResponder._initializeGestureState(gestureState);
      },
      onResponderTerminationRequest: function onResponderTerminationRequest(event) {
        return config.onPanResponderTerminationRequest == null ? true : config.onPanResponderTerminationRequest(event, gestureState);
      }
    };
    return {
      panHandlers: panHandlers,
      getInteractionHandle: function getInteractionHandle() {
        return interactionState.handle;
      }
    };
  }
};

function clearInteractionHandle(interactionState, callback, event, gestureState) {
  if (interactionState.handle) {
    InteractionManager.clearInteractionHandle(interactionState.handle);
    interactionState.handle = null;
  }

  if (callback) {
    callback(event, gestureState);
  }
}

module.exports = PanResponder;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBhblJlc3BvbmRlci5qcyJdLCJuYW1lcyI6WyJJbnRlcmFjdGlvbk1hbmFnZXIiLCJyZXF1aXJlIiwiVG91Y2hIaXN0b3J5TWF0aCIsImN1cnJlbnRDZW50cm9pZFhPZlRvdWNoZXNDaGFuZ2VkQWZ0ZXIiLCJjdXJyZW50Q2VudHJvaWRZT2ZUb3VjaGVzQ2hhbmdlZEFmdGVyIiwicHJldmlvdXNDZW50cm9pZFhPZlRvdWNoZXNDaGFuZ2VkQWZ0ZXIiLCJwcmV2aW91c0NlbnRyb2lkWU9mVG91Y2hlc0NoYW5nZWRBZnRlciIsImN1cnJlbnRDZW50cm9pZFgiLCJjdXJyZW50Q2VudHJvaWRZIiwiUGFuUmVzcG9uZGVyIiwiX2luaXRpYWxpemVHZXN0dXJlU3RhdGUiLCJnZXN0dXJlU3RhdGUiLCJtb3ZlWCIsIm1vdmVZIiwieDAiLCJ5MCIsImR4IiwiZHkiLCJ2eCIsInZ5IiwibnVtYmVyQWN0aXZlVG91Y2hlcyIsIl9hY2NvdW50c0Zvck1vdmVzVXBUbyIsIl91cGRhdGVHZXN0dXJlU3RhdGVPbk1vdmUiLCJ0b3VjaEhpc3RvcnkiLCJtb3ZlZEFmdGVyIiwicHJldlgiLCJ4IiwicHJldlkiLCJ5IiwibmV4dERYIiwibmV4dERZIiwiZHQiLCJtb3N0UmVjZW50VGltZVN0YW1wIiwiY3JlYXRlIiwiY29uZmlnIiwiaW50ZXJhY3Rpb25TdGF0ZSIsImhhbmRsZSIsInN0YXRlSUQiLCJNYXRoIiwicmFuZG9tIiwicGFuSGFuZGxlcnMiLCJvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwiZXZlbnQiLCJvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyIiwib25Nb3ZlU2hvdWxkU2V0UmVzcG9uZGVyIiwib25Nb3ZlU2hvdWxkU2V0UGFuUmVzcG9uZGVyIiwib25TdGFydFNob3VsZFNldFJlc3BvbmRlckNhcHR1cmUiLCJuYXRpdmVFdmVudCIsInRvdWNoZXMiLCJsZW5ndGgiLCJvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZSIsIm9uTW92ZVNob3VsZFNldFJlc3BvbmRlckNhcHR1cmUiLCJvbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXJDYXB0dXJlIiwib25SZXNwb25kZXJHcmFudCIsImNyZWF0ZUludGVyYWN0aW9uSGFuZGxlIiwib25QYW5SZXNwb25kZXJHcmFudCIsIm9uU2hvdWxkQmxvY2tOYXRpdmVSZXNwb25kZXIiLCJvblJlc3BvbmRlclJlamVjdCIsImNsZWFySW50ZXJhY3Rpb25IYW5kbGUiLCJvblBhblJlc3BvbmRlclJlamVjdCIsIm9uUmVzcG9uZGVyUmVsZWFzZSIsIm9uUGFuUmVzcG9uZGVyUmVsZWFzZSIsIm9uUmVzcG9uZGVyU3RhcnQiLCJvblBhblJlc3BvbmRlclN0YXJ0Iiwib25SZXNwb25kZXJNb3ZlIiwib25QYW5SZXNwb25kZXJNb3ZlIiwib25SZXNwb25kZXJFbmQiLCJvblBhblJlc3BvbmRlckVuZCIsIm9uUmVzcG9uZGVyVGVybWluYXRlIiwib25QYW5SZXNwb25kZXJUZXJtaW5hdGUiLCJvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCIsIm9uUGFuUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0IiwiZ2V0SW50ZXJhY3Rpb25IYW5kbGUiLCJjYWxsYmFjayIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVBOztBQUVBLElBQU1BLGtCQUFrQixHQUFHQyxPQUFPLENBQUMsc0JBQUQsQ0FBbEM7O0FBQ0EsSUFBTUMsZ0JBQWdCLEdBQUdELE9BQU8sQ0FBQyxvQkFBRCxDQUFoQzs7QUFJQSxJQUFNRSxxQ0FBcUMsR0FDekNELGdCQUFnQixDQUFDQyxxQ0FEbkI7QUFFQSxJQUFNQyxxQ0FBcUMsR0FDekNGLGdCQUFnQixDQUFDRSxxQ0FEbkI7QUFFQSxJQUFNQyxzQ0FBc0MsR0FDMUNILGdCQUFnQixDQUFDRyxzQ0FEbkI7QUFFQSxJQUFNQyxzQ0FBc0MsR0FDMUNKLGdCQUFnQixDQUFDSSxzQ0FEbkI7QUFFQSxJQUFNQyxnQkFBZ0IsR0FBR0wsZ0JBQWdCLENBQUNLLGdCQUExQztBQUNB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LEVBRUVzQyxRQUZGLEVBR0UvQixLQUhGLEVBSUUvQixZQUpGLEVBS0U7QUFDQSxNQUFJd0IsZ0JBQWdCLENBQUNDLE1BQXJCLEVBQTZCO0FBQzNCcEMsSUFBQUEsa0JBQWtCLENBQUMwRCxzQkFBbkIsQ0FBMEN2QixnQkFBZ0IsQ0FBQ0MsTUFBM0Q7QUFDQUQsSUFBQUEsZ0JBQWdCLENBQUNDLE1BQWpCLEdBQTBCLElBQTFCO0FBQ0Q7O0FBQ0QsTUFBSXFDLFFBQUosRUFBYztBQUNaQSxJQUFBQSxRQUFRLENBQUMvQixLQUFELEVBQVEvQixZQUFSLENBQVI7QUFDRDtBQUNGOztBQU9EK0QsTUFBTSxDQUFDQyxPQUFQLEdBQWlCbEUsWUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBJbnRlcmFjdGlvbk1hbmFnZXIgPSByZXF1aXJlKCcuL0ludGVyYWN0aW9uTWFuYWdlcicpO1xuY29uc3QgVG91Y2hIaXN0b3J5TWF0aCA9IHJlcXVpcmUoJy4vVG91Y2hIaXN0b3J5TWF0aCcpO1xuXG5pbXBvcnQgdHlwZSB7UHJlc3NFdmVudH0gZnJvbSAnLi4vVHlwZXMvQ29yZUV2ZW50VHlwZXMnO1xuXG5jb25zdCBjdXJyZW50Q2VudHJvaWRYT2ZUb3VjaGVzQ2hhbmdlZEFmdGVyID1cbiAgVG91Y2hIaXN0b3J5TWF0aC5jdXJyZW50Q2VudHJvaWRYT2ZUb3VjaGVzQ2hhbmdlZEFmdGVyO1xuY29uc3QgY3VycmVudENlbnRyb2lkWU9mVG91Y2hlc0NoYW5nZWRBZnRlciA9XG4gIFRvdWNoSGlzdG9yeU1hdGguY3VycmVudENlbnRyb2lkWU9mVG91Y2hlc0NoYW5nZWRBZnRlcjtcbmNvbnN0IHByZXZpb3VzQ2VudHJvaWRYT2ZUb3VjaGVzQ2hhbmdlZEFmdGVyID1cbiAgVG91Y2hIaXN0b3J5TWF0aC5wcmV2aW91c0NlbnRyb2lkWE9mVG91Y2hlc0NoYW5nZWRBZnRlcjtcbmNvbnN0IHByZXZpb3VzQ2VudHJvaWRZT2ZUb3VjaGVzQ2hhbmdlZEFmdGVyID1cbiAgVG91Y2hIaXN0b3J5TWF0aC5wcmV2aW91c0NlbnRyb2lkWU9mVG91Y2hlc0NoYW5nZWRBZnRlcjtcbmNvbnN0IGN1cnJlbnRDZW50cm9pZFggPSBUb3VjaEhpc3RvcnlNYXRoLmN1cnJlbnRDZW50cm9pZFg7XG5jb25zdCBjdXJyZW50Q2VudHJvaWRZID0gVG91Y2hIaXN0b3J5TWF0aC5jdXJyZW50Q2VudHJvaWRZO1xuXG4vKipcbiAqIGBQYW5SZXNwb25kZXJgIHJlY29uY2lsZXMgc2V2ZXJhbCB0b3VjaGVzIGludG8gYSBzaW5nbGUgZ2VzdHVyZS4gSXQgbWFrZXNcbiAqIHNpbmdsZS10b3VjaCBnZXN0dXJlcyByZXNpbGllbnQgdG8gZXh0cmEgdG91Y2hlcywgYW5kIGNhbiBiZSB1c2VkIHRvXG4gKiByZWNvZ25pemUgc2ltcGxlIG11bHRpLXRvdWNoIGdlc3R1cmVzLlxuICpcbiAqIEJ5IGRlZmF1bHQsIGBQYW5SZXNwb25kZXJgIGhvbGRzIGFuIGBJbnRlcmFjdGlvbk1hbmFnZXJgIGhhbmRsZSB0byBibG9ja1xuICogbG9uZy1ydW5uaW5nIEpTIGV2ZW50cyBmcm9tIGludGVycnVwdGluZyBhY3RpdmUgZ2VzdHVyZXMuXG4gKlxuICogSXQgcHJvdmlkZXMgYSBwcmVkaWN0YWJsZSB3cmFwcGVyIG9mIHRoZSByZXNwb25kZXIgaGFuZGxlcnMgcHJvdmlkZWQgYnkgdGhlXG4gKiBbZ2VzdHVyZSByZXNwb25kZXIgc3lzdGVtXShkb2NzL2dlc3R1cmUtcmVzcG9uZGVyLXN5c3RlbS5odG1sKS5cbiAqIEZvciBlYWNoIGhhbmRsZXIsIGl0IHByb3ZpZGVzIGEgbmV3IGBnZXN0dXJlU3RhdGVgIG9iamVjdCBhbG9uZ3NpZGUgdGhlXG4gKiBuYXRpdmUgZXZlbnQgb2JqZWN0OlxuICpcbiAqIGBgYFxuICogb25QYW5SZXNwb25kZXJNb3ZlOiAoZXZlbnQsIGdlc3R1cmVTdGF0ZSkgPT4ge31cbiAqIGBgYFxuICpcbiAqIEEgbmF0aXZlIGV2ZW50IGlzIGEgc3ludGhldGljIHRvdWNoIGV2ZW50IHdpdGggdGhlIGZvbGxvd2luZyBmb3JtOlxuICpcbiAqICAtIGBuYXRpdmVFdmVudGBcbiAqICAgICAgKyBgY2hhbmdlZFRvdWNoZXNgIC0gQXJyYXkgb2YgYWxsIHRvdWNoIGV2ZW50cyB0aGF0IGhhdmUgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdCBldmVudFxuICogICAgICArIGBpZGVudGlmaWVyYCAtIFRoZSBJRCBvZiB0aGUgdG91Y2hcbiAqICAgICAgKyBgbG9jYXRpb25YYCAtIFRoZSBYIHBvc2l0aW9uIG9mIHRoZSB0b3VjaCwgcmVsYXRpdmUgdG8gdGhlIGVsZW1lbnRcbiAqICAgICAgKyBgbG9jYXRpb25ZYCAtIFRoZSBZIHBvc2l0aW9uIG9mIHRoZSB0b3VjaCwgcmVsYXRpdmUgdG8gdGhlIGVsZW1lbnRcbiAqICAgICAgKyBgcGFnZVhgIC0gVGhlIFggcG9zaXRpb24gb2YgdGhlIHRvdWNoLCByZWxhdGl2ZSB0byB0aGUgcm9vdCBlbGVtZW50XG4gKiAgICAgICsgYHBhZ2VZYCAtIFRoZSBZIHBvc2l0aW9uIG9mIHRoZSB0b3VjaCwgcmVsYXRpdmUgdG8gdGhlIHJvb3QgZWxlbWVudFxuICogICAgICArIGB0YXJnZXRgIC0gVGhlIG5vZGUgaWQgb2YgdGhlIGVsZW1lbnQgcmVjZWl2aW5nIHRoZSB0b3VjaCBldmVudFxuICogICAgICArIGB0aW1lc3RhbXBgIC0gQSB0aW1lIGlkZW50aWZpZXIgZm9yIHRoZSB0b3VjaCwgdXNlZnVsIGZvciB2ZWxvY2l0eSBjYWxjdWxhdGlvblxuICogICAgICArIGB0b3VjaGVzYCAtIEFycmF5IG9mIGFsbCBjdXJyZW50IHRvdWNoZXMgb24gdGhlIHNjcmVlblxuICpcbiAqIEEgYGdlc3R1cmVTdGF0ZWAgb2JqZWN0IGhhcyB0aGUgZm9sbG93aW5nOlxuICpcbiAqICAtIGBzdGF0ZUlEYCAtIElEIG9mIHRoZSBnZXN0dXJlU3RhdGUtIHBlcnNpc3RlZCBhcyBsb25nIGFzIHRoZXJlIGF0IGxlYXN0XG4gKiAgICAgb25lIHRvdWNoIG9uIHNjcmVlblxuICogIC0gYG1vdmVYYCAtIHRoZSBsYXRlc3Qgc2NyZWVuIGNvb3JkaW5hdGVzIG9mIHRoZSByZWNlbnRseS1tb3ZlZCB0b3VjaFxuICogIC0gYG1vdmVZYCAtIHRoZSBsYXRlc3Qgc2NyZWVuIGNvb3JkaW5hdGVzIG9mIHRoZSByZWNlbnRseS1tb3ZlZCB0b3VjaFxuICogIC0gYHgwYCAtIHRoZSBzY3JlZW4gY29vcmRpbmF0ZXMgb2YgdGhlIHJlc3BvbmRlciBncmFudFxuICogIC0gYHkwYCAtIHRoZSBzY3JlZW4gY29vcmRpbmF0ZXMgb2YgdGhlIHJlc3BvbmRlciBncmFudFxuICogIC0gYGR4YCAtIGFjY3VtdWxhdGVkIGRpc3RhbmNlIG9mIHRoZSBnZXN0dXJlIHNpbmNlIHRoZSB0b3VjaCBzdGFydGVkXG4gKiAgLSBgZHlgIC0gYWNjdW11bGF0ZWQgZGlzdGFuY2Ugb2YgdGhlIGdlc3R1cmUgc2luY2UgdGhlIHRvdWNoIHN0YXJ0ZWRcbiAqICAtIGB2eGAgLSBjdXJyZW50IHZlbG9jaXR5IG9mIHRoZSBnZXN0dXJlXG4gKiAgLSBgdnlgIC0gY3VycmVudCB2ZWxvY2l0eSBvZiB0aGUgZ2VzdHVyZVxuICogIC0gYG51bWJlckFjdGl2ZVRvdWNoZXNgIC0gTnVtYmVyIG9mIHRvdWNoZXMgY3VycmVudGx5IG9uIHNjcmVlblxuICpcbiAqICMjIyBCYXNpYyBVc2FnZVxuICpcbiAqIGBgYFxuICogICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uKCkge1xuICogICAgIHRoaXMuX3BhblJlc3BvbmRlciA9IFBhblJlc3BvbmRlci5jcmVhdGUoe1xuICogICAgICAgLy8gQXNrIHRvIGJlIHRoZSByZXNwb25kZXI6XG4gKiAgICAgICBvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyOiAoZXZ0LCBnZXN0dXJlU3RhdGUpID0+IHRydWUsXG4gKiAgICAgICBvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZTogKGV2dCwgZ2VzdHVyZVN0YXRlKSA9PiB0cnVlLFxuICogICAgICAgb25Nb3ZlU2hvdWxkU2V0UGFuUmVzcG9uZGVyOiAoZXZ0LCBnZXN0dXJlU3RhdGUpID0+IHRydWUsXG4gKiAgICAgICBvbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXJDYXB0dXJlOiAoZXZ0LCBnZXN0dXJlU3RhdGUpID0+IHRydWUsXG4gKlxuICogICAgICAgb25QYW5SZXNwb25kZXJHcmFudDogKGV2dCwgZ2VzdHVyZVN0YXRlKSA9PiB7XG4gKiAgICAgICAgIC8vIFRoZSBnZXN0dXJlIGhhcyBzdGFydGVkLiBTaG93IHZpc3VhbCBmZWVkYmFjayBzbyB0aGUgdXNlciBrbm93c1xuICogICAgICAgICAvLyB3aGF0IGlzIGhhcHBlbmluZyFcbiAqXG4gKiAgICAgICAgIC8vIGdlc3R1cmVTdGF0ZS5ke3gseX0gd2lsbCBiZSBzZXQgdG8gemVybyBub3dcbiAqICAgICAgIH0sXG4gKiAgICAgICBvblBhblJlc3BvbmRlck1vdmU6IChldnQsIGdlc3R1cmVTdGF0ZSkgPT4ge1xuICogICAgICAgICAvLyBUaGUgbW9zdCByZWNlbnQgbW92ZSBkaXN0YW5jZSBpcyBnZXN0dXJlU3RhdGUubW92ZXtYLFl9XG4gKlxuICogICAgICAgICAvLyBUaGUgYWNjdW11bGF0ZWQgZ2VzdHVyZSBkaXN0YW5jZSBzaW5jZSBiZWNvbWluZyByZXNwb25kZXIgaXNcbiAqICAgICAgICAgLy8gZ2VzdHVyZVN0YXRlLmR7eCx5fVxuICogICAgICAgfSxcbiAqICAgICAgIG9uUGFuUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0OiAoZXZ0LCBnZXN0dXJlU3RhdGUpID0+IHRydWUsXG4gKiAgICAgICBvblBhblJlc3BvbmRlclJlbGVhc2U6IChldnQsIGdlc3R1cmVTdGF0ZSkgPT4ge1xuICogICAgICAgICAvLyBUaGUgdXNlciBoYXMgcmVsZWFzZWQgYWxsIHRvdWNoZXMgd2hpbGUgdGhpcyB2aWV3IGlzIHRoZVxuICogICAgICAgICAvLyByZXNwb25kZXIuIFRoaXMgdHlwaWNhbGx5IG1lYW5zIGEgZ2VzdHVyZSBoYXMgc3VjY2VlZGVkXG4gKiAgICAgICB9LFxuICogICAgICAgb25QYW5SZXNwb25kZXJUZXJtaW5hdGU6IChldnQsIGdlc3R1cmVTdGF0ZSkgPT4ge1xuICogICAgICAgICAvLyBBbm90aGVyIGNvbXBvbmVudCBoYXMgYmVjb21lIHRoZSByZXNwb25kZXIsIHNvIHRoaXMgZ2VzdHVyZVxuICogICAgICAgICAvLyBzaG91bGQgYmUgY2FuY2VsbGVkXG4gKiAgICAgICB9LFxuICogICAgICAgb25TaG91bGRCbG9ja05hdGl2ZVJlc3BvbmRlcjogKGV2dCwgZ2VzdHVyZVN0YXRlKSA9PiB7XG4gKiAgICAgICAgIC8vIFJldHVybnMgd2hldGhlciB0aGlzIGNvbXBvbmVudCBzaG91bGQgYmxvY2sgbmF0aXZlIGNvbXBvbmVudHMgZnJvbSBiZWNvbWluZyB0aGUgSlNcbiAqICAgICAgICAgLy8gcmVzcG9uZGVyLiBSZXR1cm5zIHRydWUgYnkgZGVmYXVsdC4gSXMgY3VycmVudGx5IG9ubHkgc3VwcG9ydGVkIG9uIGFuZHJvaWQuXG4gKiAgICAgICAgIHJldHVybiB0cnVlO1xuICogICAgICAgfSxcbiAqICAgICB9KTtcbiAqICAgfSxcbiAqXG4gKiAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIChcbiAqICAgICAgIDxWaWV3IHsuLi50aGlzLl9wYW5SZXNwb25kZXIucGFuSGFuZGxlcnN9IC8+XG4gKiAgICAgKTtcbiAqICAgfSxcbiAqXG4gKiBgYGBcbiAqXG4gKiAjIyMgV29ya2luZyBFeGFtcGxlXG4gKlxuICogVG8gc2VlIGl0IGluIGFjdGlvbiwgdHJ5IHRoZVxuICogW1BhblJlc3BvbmRlciBleGFtcGxlIGluIFJOVGVzdGVyXShodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL2Jsb2IvbWFzdGVyL1JOVGVzdGVyL2pzL1BhblJlc3BvbmRlckV4YW1wbGUuanMpXG4gKi9cblxuZXhwb3J0IHR5cGUgR2VzdHVyZVN0YXRlID0ge3xcbiAgLyoqXG4gICAqIElEIG9mIHRoZSBnZXN0dXJlU3RhdGUgLSBwZXJzaXN0ZWQgYXMgbG9uZyBhcyB0aGVyZSBhdCBsZWFzdCBvbmUgdG91Y2ggb24gc2NyZWVuXG4gICAqL1xuICBzdGF0ZUlEOiBudW1iZXIsXG5cbiAgLyoqXG4gICAqIFRoZSBsYXRlc3Qgc2NyZWVuIGNvb3JkaW5hdGVzIG9mIHRoZSByZWNlbnRseS1tb3ZlZCB0b3VjaFxuICAgKi9cbiAgbW92ZVg6IG51bWJlcixcblxuICAvKipcbiAgICogVGhlIGxhdGVzdCBzY3JlZW4gY29vcmRpbmF0ZXMgb2YgdGhlIHJlY2VudGx5LW1vdmVkIHRvdWNoXG4gICAqL1xuICBtb3ZlWTogbnVtYmVyLFxuXG4gIC8qKlxuICAgKiBUaGUgc2NyZWVuIGNvb3JkaW5hdGVzIG9mIHRoZSByZXNwb25kZXIgZ3JhbnRcbiAgICovXG4gIHgwOiBudW1iZXIsXG5cbiAgLyoqXG4gICAqIFRoZSBzY3JlZW4gY29vcmRpbmF0ZXMgb2YgdGhlIHJlc3BvbmRlciBncmFudFxuICAgKi9cbiAgeTA6IG51bWJlcixcblxuICAvKipcbiAgICogQWNjdW11bGF0ZWQgZGlzdGFuY2Ugb2YgdGhlIGdlc3R1cmUgc2luY2UgdGhlIHRvdWNoIHN0YXJ0ZWRcbiAgICovXG4gIGR4OiBudW1iZXIsXG5cbiAgLyoqXG4gICAqIEFjY3VtdWxhdGVkIGRpc3RhbmNlIG9mIHRoZSBnZXN0dXJlIHNpbmNlIHRoZSB0b3VjaCBzdGFydGVkXG4gICAqL1xuICBkeTogbnVtYmVyLFxuXG4gIC8qKlxuICAgKiBDdXJyZW50IHZlbG9jaXR5IG9mIHRoZSBnZXN0dXJlXG4gICAqL1xuICB2eDogbnVtYmVyLFxuXG4gIC8qKlxuICAgKiBDdXJyZW50IHZlbG9jaXR5IG9mIHRoZSBnZXN0dXJlXG4gICAqL1xuICB2eTogbnVtYmVyLFxuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgdG91Y2hlcyBjdXJyZW50bHkgb24gc2NyZWVuXG4gICAqL1xuICBudW1iZXJBY3RpdmVUb3VjaGVzOiBudW1iZXIsXG5cbiAgLyoqXG4gICAqIEFsbCBgZ2VzdHVyZVN0YXRlYCBhY2NvdW50cyBmb3IgdGltZVN0YW1wcyB1cCB1bnRpbCB0aGlzIHZhbHVlXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfYWNjb3VudHNGb3JNb3Zlc1VwVG86IG51bWJlcixcbnx9O1xuXG50eXBlIEFjdGl2ZUNhbGxiYWNrID0gKFxuICBldmVudDogUHJlc3NFdmVudCxcbiAgZ2VzdHVyZVN0YXRlOiBHZXN0dXJlU3RhdGUsXG4pID0+IGJvb2xlYW47XG5cbnR5cGUgUGFzc2l2ZUNhbGxiYWNrID0gKGV2ZW50OiBQcmVzc0V2ZW50LCBnZXN0dXJlU3RhdGU6IEdlc3R1cmVTdGF0ZSkgPT4gbWl4ZWQ7XG5cbnR5cGUgUGFuUmVzcG9uZGVyQ29uZmlnID0gJFJlYWRPbmx5PHt8XG4gIG9uTW92ZVNob3VsZFNldFBhblJlc3BvbmRlcj86ID9BY3RpdmVDYWxsYmFjayxcbiAgb25Nb3ZlU2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZT86ID9BY3RpdmVDYWxsYmFjayxcbiAgb25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlcj86ID9BY3RpdmVDYWxsYmFjayxcbiAgb25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlckNhcHR1cmU/OiA/QWN0aXZlQ2FsbGJhY2ssXG4gIC8qKlxuICAgKiBUaGUgYm9keSBvZiBgb25SZXNwb25kZXJHcmFudGAgcmV0dXJucyBhIGJvb2wsIGJ1dCB0aGUgdmFzdCBtYWpvcml0eSBvZlxuICAgKiBjYWxsc2l0ZXMgcmV0dXJuIHZvaWQgYW5kIHRoaXMgVE9ETyBub3RpY2UgaXMgZm91bmQgaW4gaXQ6XG4gICAqICAgVE9ETzogdDc0NjcxMjQgaW52ZXN0aWdhdGUgaWYgdGhpcyBjYW4gYmUgcmVtb3ZlZFxuICAgKi9cbiAgb25QYW5SZXNwb25kZXJHcmFudD86ID8oUGFzc2l2ZUNhbGxiYWNrIHwgQWN0aXZlQ2FsbGJhY2spLFxuICBvblBhblJlc3BvbmRlclJlamVjdD86ID9QYXNzaXZlQ2FsbGJhY2ssXG4gIG9uUGFuUmVzcG9uZGVyU3RhcnQ/OiA/UGFzc2l2ZUNhbGxiYWNrLFxuICBvblBhblJlc3BvbmRlckVuZD86ID9QYXNzaXZlQ2FsbGJhY2ssXG4gIG9uUGFuUmVzcG9uZGVyUmVsZWFzZT86ID9QYXNzaXZlQ2FsbGJhY2ssXG4gIG9uUGFuUmVzcG9uZGVyTW92ZT86ID9QYXNzaXZlQ2FsbGJhY2ssXG4gIG9uUGFuUmVzcG9uZGVyVGVybWluYXRlPzogP1Bhc3NpdmVDYWxsYmFjayxcbiAgb25QYW5SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3Q/OiA/QWN0aXZlQ2FsbGJhY2ssXG4gIG9uU2hvdWxkQmxvY2tOYXRpdmVSZXNwb25kZXI/OiA/QWN0aXZlQ2FsbGJhY2ssXG58fT47XG5cbmNvbnN0IFBhblJlc3BvbmRlciA9IHtcbiAgLyoqXG4gICAqXG4gICAqIEEgZ3JhcGhpY2FsIGV4cGxhbmF0aW9uIG9mIHRoZSB0b3VjaCBkYXRhIGZsb3c6XG4gICAqXG4gICAqICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gICAqIHwgUmVzcG9uZGVyVG91Y2hIaXN0b3J5U3RvcmUgfCAgICAgICAgICAgICB8VG91Y2hIaXN0b3J5TWF0aCAgICAgICAgICAgICAgICB8XG4gICAqICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICAgICArLS0tLS0tLS0tLSstLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gICAqIHxHbG9iYWwgc3RvcmUgb2YgdG91Y2hIaXN0b3J5fCAgICAgICAgICAgICB8QWxsb2NhdGlvbi1sZXNzIG1hdGggdXRpbCAgICAgICB8XG4gICAqIHxpbmNsdWRpbmcgYWN0aXZlbmVzcywgc3RhcnQgfCAgICAgICAgICAgICB8b24gdG91Y2ggaGlzdG9yeSAoY2VudHJvaWRzICAgICB8XG4gICAqIHxwb3NpdGlvbiwgcHJldi9jdXIgcG9zaXRpb24ufCAgICAgICAgICAgICB8YW5kIG11bHRpdG91Y2ggbW92ZW1lbnQgZXRjKSAgICB8XG4gICAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAqICstLS0tXi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICAgICArLS0tLV4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gICAqICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICogICAgICB8IChyZWNvcmRzIHJlbGV2YW50IGhpc3RvcnkgICAgICAgICAgICAgICAgfFxuICAgKiAgICAgIHwgIG9mIHRvdWNoZXMgcmVsZXZhbnQgZm9yICAgICAgICAgICAgICAgICB8XG4gICAqICAgICAgfCAgaW1wbGVtZW50aW5nIGhpZ2hlciBsZXZlbCAgICAgICAgICAgICAgIHxcbiAgICogICAgICB8ICBnZXN0dXJlcykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgKiAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAqICstLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICAgICArLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gICAqIHwgUmVzcG9uZGVyRXZlbnRQbHVnaW4gICAgICAgfCAgICAgICAgICAgICB8ICAgIHwgICBZb3VyIEFwcC9Db21wb25lbnQgICAgICB8XG4gICAqICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICAgICArLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gICAqIHxOZWdvdGlhdGVzIHdoaWNoIHZpZXcgZ2V0cyAgfCBMb3cgbGV2ZWwgICB8ICAgIHwgICAgICAgICAgICAgSGlnaCBsZXZlbCAgICB8XG4gICAqIHxvblJlc3BvbmRlck1vdmUgZXZlbnRzLiAgICAgfCBldmVudHMgdy8gICB8ICArLSstLS0tLS0tKyAgICAgZXZlbnRzIHcvICAgICB8XG4gICAqIHxBbHNvIHJlY29yZHMgaGlzdG9yeSBpbnRvICAgfCB0b3VjaEhpc3Rvcnl8ICB8ICAgUGFuICAgfCAgICAgbXVsdGl0b3VjaCArICB8XG4gICAqIHxSZXNwb25kZXJUb3VjaEhpc3RvcnlTdG9yZS4gKy0tLS0tLS0tLS0tLS0tLS0+UmVzcG9uZGVyKy0tLS0tPiBhY2N1bXVsYXRpdmV8XG4gICAqICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyBhdHRhY2hlZCB0byB8ICB8ICAgICAgICAgfCAgICAgZGlzdGFuY2UgYW5kICB8XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFjaCBldmVudCB8ICArLS0tLS0tLS0tKyAgICAgdmVsb2NpdHkuICAgICB8XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gICAqXG4gICAqXG4gICAqXG4gICAqIEdlc3R1cmUgdGhhdCBjYWxjdWxhdGVzIGN1bXVsYXRpdmUgbW92ZW1lbnQgb3ZlciB0aW1lIGluIGEgd2F5IHRoYXQganVzdFxuICAgKiBcImRvZXMgdGhlIHJpZ2h0IHRoaW5nXCIgZm9yIG11bHRpcGxlIHRvdWNoZXMuIFRoZSBcInJpZ2h0IHRoaW5nXCIgaXMgdmVyeVxuICAgKiBudWFuY2VkLiBXaGVuIG1vdmluZyB0d28gdG91Y2hlcyBpbiBvcHBvc2l0ZSBkaXJlY3Rpb25zLCB0aGUgY3VtdWxhdGl2ZVxuICAgKiBkaXN0YW5jZSBpcyB6ZXJvIGluIGVhY2ggZGltZW5zaW9uLiBXaGVuIHR3byB0b3VjaGVzIG1vdmUgaW4gcGFyYWxsZWwgZml2ZVxuICAgKiBwaXhlbHMgaW4gdGhlIHNhbWUgZGlyZWN0aW9uLCB0aGUgY3VtdWxhdGl2ZSBkaXN0YW5jZSBpcyBmaXZlLCBub3QgdGVuLiBJZlxuICAgKiB0d28gdG91Y2hlcyBzdGFydCwgb25lIG1vdmVzIGZpdmUgaW4gYSBkaXJlY3Rpb24sIHRoZW4gc3RvcHMgYW5kIHRoZSBvdGhlclxuICAgKiB0b3VjaCBtb3ZlcyBmaXZlcyBpbiB0aGUgc2FtZSBkaXJlY3Rpb24sIHRoZSBjdW11bGF0aXZlIGRpc3RhbmNlIGlzIHRlbi5cbiAgICpcbiAgICogVGhpcyBsb2dpYyByZXF1aXJlcyBhIGtpbmQgb2YgcHJvY2Vzc2luZyBvZiB0aW1lIFwiY2x1c3RlcnNcIiBvZiB0b3VjaCBldmVudHNcbiAgICogc28gdGhhdCB0d28gdG91Y2ggbW92ZXMgdGhhdCBlc3NlbnRpYWxseSBvY2N1ciBpbiBwYXJhbGxlbCBidXQgbW92ZSBldmVyeVxuICAgKiBvdGhlciBmcmFtZSByZXNwZWN0aXZlbHksIGFyZSBjb25zaWRlcmVkIHBhcnQgb2YgdGhlIHNhbWUgbW92ZW1lbnQuXG4gICAqXG4gICAqIEV4cGxhbmF0aW9uIG9mIHNvbWUgb2YgdGhlIG5vbi1vYnZpb3VzIGZpZWxkczpcbiAgICpcbiAgICogLSBtb3ZlWC9tb3ZlWTogSWYgbm8gbW92ZSBldmVudCBoYXMgYmVlbiBvYnNlcnZlZCwgdGhlbiBgKG1vdmVYLCBtb3ZlWSlgIGlzXG4gICAqICAgaW52YWxpZC4gSWYgYSBtb3ZlIGV2ZW50IGhhcyBiZWVuIG9ic2VydmVkLCBgKG1vdmVYLCBtb3ZlWSlgIGlzIHRoZVxuICAgKiAgIGNlbnRyb2lkIG9mIHRoZSBtb3N0IHJlY2VudGx5IG1vdmVkIFwiY2x1c3RlclwiIG9mIGFjdGl2ZSB0b3VjaGVzLlxuICAgKiAgIChDdXJyZW50bHkgYWxsIG1vdmUgaGF2ZSB0aGUgc2FtZSB0aW1lU3RhbXAsIGJ1dCBsYXRlciB3ZSBzaG91bGQgYWRkIHNvbWVcbiAgICogICB0aHJlc2hvbGQgZm9yIHdoYXQgaXMgY29uc2lkZXJlZCB0byBiZSBcIm1vdmluZ1wiKS4gSWYgYSBwYWxtIGlzXG4gICAqICAgYWNjaWRlbnRhbGx5IGNvdW50ZWQgYXMgYSB0b3VjaCwgYnV0IGEgZmluZ2VyIGlzIG1vdmluZyBncmVhdGx5LCB0aGUgcGFsbVxuICAgKiAgIHdpbGwgbW92ZSBzbGlnaHRseSwgYnV0IHdlIG9ubHkgd2FudCB0byBjb3VudCB0aGUgc2luZ2xlIG1vdmluZyB0b3VjaC5cbiAgICogLSB4MC95MDogQ2VudHJvaWQgbG9jYXRpb24gKG5vbi1jdW11bGF0aXZlKSBhdCB0aGUgdGltZSBvZiBiZWNvbWluZ1xuICAgKiAgIHJlc3BvbmRlci5cbiAgICogLSBkeC9keTogQ3VtdWxhdGl2ZSB0b3VjaCBkaXN0YW5jZSAtIG5vdCB0aGUgc2FtZSB0aGluZyBhcyBzdW0gb2YgZWFjaCB0b3VjaFxuICAgKiAgIGRpc3RhbmNlLiBBY2NvdW50cyBmb3IgdG91Y2ggbW92ZXMgdGhhdCBhcmUgY2x1c3RlcmVkIHRvZ2V0aGVyIGluIHRpbWUsXG4gICAqICAgbW92aW5nIHRoZSBzYW1lIGRpcmVjdGlvbi4gT25seSB2YWxpZCB3aGVuIGN1cnJlbnRseSByZXNwb25kZXIgKG90aGVyd2lzZSxcbiAgICogICBpdCBvbmx5IHJlcHJlc2VudHMgdGhlIGRyYWcgZGlzdGFuY2UgYmVsb3cgdGhlIHRocmVzaG9sZCkuXG4gICAqIC0gdngvdnk6IFZlbG9jaXR5LlxuICAgKi9cblxuICBfaW5pdGlhbGl6ZUdlc3R1cmVTdGF0ZShnZXN0dXJlU3RhdGU6IEdlc3R1cmVTdGF0ZSkge1xuICAgIGdlc3R1cmVTdGF0ZS5tb3ZlWCA9IDA7XG4gICAgZ2VzdHVyZVN0YXRlLm1vdmVZID0gMDtcbiAgICBnZXN0dXJlU3RhdGUueDAgPSAwO1xuICAgIGdlc3R1cmVTdGF0ZS55MCA9IDA7XG4gICAgZ2VzdHVyZVN0YXRlLmR4ID0gMDtcbiAgICBnZXN0dXJlU3RhdGUuZHkgPSAwO1xuICAgIGdlc3R1cmVTdGF0ZS52eCA9IDA7XG4gICAgZ2VzdHVyZVN0YXRlLnZ5ID0gMDtcbiAgICBnZXN0dXJlU3RhdGUubnVtYmVyQWN0aXZlVG91Y2hlcyA9IDA7XG4gICAgLy8gQWxsIGBnZXN0dXJlU3RhdGVgIGFjY291bnRzIGZvciB0aW1lU3RhbXBzIHVwIHVudGlsOlxuICAgIGdlc3R1cmVTdGF0ZS5fYWNjb3VudHNGb3JNb3Zlc1VwVG8gPSAwO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIG51YW5jZWQgYW5kIGlzIG5lY2Vzc2FyeS4gSXQgaXMgaW5jb3JyZWN0IHRvIGNvbnRpbnVvdXNseSB0YWtlIGFsbFxuICAgKiBhY3RpdmUgKmFuZCogcmVjZW50bHkgbW92ZWQgdG91Y2hlcywgZmluZCB0aGUgY2VudHJvaWQsIGFuZCB0cmFjayBob3cgdGhhdFxuICAgKiByZXN1bHQgY2hhbmdlcyBvdmVyIHRpbWUuIEluc3RlYWQsIHdlIG11c3QgdGFrZSBhbGwgcmVjZW50bHkgbW92ZWRcbiAgICogdG91Y2hlcywgYW5kIGNhbGN1bGF0ZSBob3cgdGhlIGNlbnRyb2lkIGhhcyBjaGFuZ2VkIGp1c3QgZm9yIHRob3NlXG4gICAqIHJlY2VudGx5IG1vdmVkIHRvdWNoZXMsIGFuZCBhcHBlbmQgdGhhdCBjaGFuZ2UgdG8gYW4gYWNjdW11bGF0b3IuIFRoaXMgaXNcbiAgICogdG8gKGF0IGxlYXN0KSBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbW92aW5nIHRocmVlIGZpbmdlcnMsIGFuZFxuICAgKiB0aGVuIG9uZSBvZiB0aGUgZmluZ2VycyBzdG9wcyBidXQgdGhlIG90aGVyIHR3byBjb250aW51ZS5cbiAgICpcbiAgICogVGhpcyBpcyB2ZXJ5IGRpZmZlcmVudCB0aGFuIHRha2luZyBhbGwgb2YgdGhlIHJlY2VudGx5IG1vdmVkIHRvdWNoZXMgYW5kXG4gICAqIHN0b3JpbmcgdGhlaXIgY2VudHJvaWQgYXMgYGR4L2R5YC4gRm9yIGNvcnJlY3RuZXNzLCB3ZSBtdXN0ICphY2N1bXVsYXRlXG4gICAqIGNoYW5nZXMqIGluIHRoZSBjZW50cm9pZCBvZiByZWNlbnRseSBtb3ZlZCB0b3VjaGVzLlxuICAgKlxuICAgKiBUaGVyZSBpcyBhbHNvIHNvbWUgbnVhbmNlIHdpdGggaG93IHdlIGhhbmRsZSBtdWx0aXBsZSBtb3ZlZCB0b3VjaGVzIGluIGFcbiAgICogc2luZ2xlIGV2ZW50LiBXaXRoIHRoZSB3YXkgYFJlYWN0TmF0aXZlRXZlbnRFbWl0dGVyYCBkaXNwYXRjaGVzIHRvdWNoZXMgYXNcbiAgICogaW5kaXZpZHVhbCBldmVudHMsIG11bHRpcGxlIHRvdWNoZXMgZ2VuZXJhdGUgdHdvICdtb3ZlJyBldmVudHMsIGVhY2ggb2ZcbiAgICogdGhlbSB0cmlnZ2VyaW5nIGBvblJlc3BvbmRlck1vdmVgLiBCdXQgd2l0aCB0aGUgd2F5IGBQYW5SZXNwb25kZXJgIHdvcmtzLFxuICAgKiBhbGwgb2YgdGhlIGdlc3R1cmUgaW5mZXJlbmNlIGlzIHBlcmZvcm1lZCBvbiB0aGUgZmlyc3QgZGlzcGF0Y2gsIHNpbmNlIGl0XG4gICAqIGxvb2tzIGF0IGFsbCBvZiB0aGUgdG91Y2hlcyAoZXZlbiB0aGUgb25lcyBmb3Igd2hpY2ggdGhlcmUgaGFzbid0IGJlZW4gYVxuICAgKiBuYXRpdmUgZGlzcGF0Y2ggeWV0KS4gVGhlcmVmb3JlLCBgUGFuUmVzcG9uZGVyYCBkb2VzIG5vdCBjYWxsXG4gICAqIGBvblJlc3BvbmRlck1vdmVgIHBhc3NlZCB0aGUgZmlyc3QgZGlzcGF0Y2guIFRoaXMgZGl2ZXJnZXMgZnJvbSB0aGVcbiAgICogdHlwaWNhbCByZXNwb25kZXIgY2FsbGJhY2sgcGF0dGVybiAod2l0aG91dCB1c2luZyBgUGFuUmVzcG9uZGVyYCksIGJ1dFxuICAgKiBhdm9pZHMgbW9yZSBkaXNwYXRjaGVzIHRoYW4gbmVjZXNzYXJ5LlxuICAgKi9cbiAgX3VwZGF0ZUdlc3R1cmVTdGF0ZU9uTW92ZShcbiAgICBnZXN0dXJlU3RhdGU6IEdlc3R1cmVTdGF0ZSxcbiAgICB0b3VjaEhpc3Rvcnk6ICRQcm9wZXJ0eVR5cGU8UHJlc3NFdmVudCwgJ3RvdWNoSGlzdG9yeSc+LFxuICApIHtcbiAgICBnZXN0dXJlU3RhdGUubnVtYmVyQWN0aXZlVG91Y2hlcyA9IHRvdWNoSGlzdG9yeS5udW1iZXJBY3RpdmVUb3VjaGVzO1xuICAgIGdlc3R1cmVTdGF0ZS5tb3ZlWCA9IGN1cnJlbnRDZW50cm9pZFhPZlRvdWNoZXNDaGFuZ2VkQWZ0ZXIoXG4gICAgICB0b3VjaEhpc3RvcnksXG4gICAgICBnZXN0dXJlU3RhdGUuX2FjY291bnRzRm9yTW92ZXNVcFRvLFxuICAgICk7XG4gICAgZ2VzdHVyZVN0YXRlLm1vdmVZID0gY3VycmVudENlbnRyb2lkWU9mVG91Y2hlc0NoYW5nZWRBZnRlcihcbiAgICAgIHRvdWNoSGlzdG9yeSxcbiAgICAgIGdlc3R1cmVTdGF0ZS5fYWNjb3VudHNGb3JNb3Zlc1VwVG8sXG4gICAgKTtcbiAgICBjb25zdCBtb3ZlZEFmdGVyID0gZ2VzdHVyZVN0YXRlLl9hY2NvdW50c0Zvck1vdmVzVXBUbztcbiAgICBjb25zdCBwcmV2WCA9IHByZXZpb3VzQ2VudHJvaWRYT2ZUb3VjaGVzQ2hhbmdlZEFmdGVyKFxuICAgICAgdG91Y2hIaXN0b3J5LFxuICAgICAgbW92ZWRBZnRlcixcbiAgICApO1xuICAgIGNvbnN0IHggPSBjdXJyZW50Q2VudHJvaWRYT2ZUb3VjaGVzQ2hhbmdlZEFmdGVyKHRvdWNoSGlzdG9yeSwgbW92ZWRBZnRlcik7XG4gICAgY29uc3QgcHJldlkgPSBwcmV2aW91c0NlbnRyb2lkWU9mVG91Y2hlc0NoYW5nZWRBZnRlcihcbiAgICAgIHRvdWNoSGlzdG9yeSxcbiAgICAgIG1vdmVkQWZ0ZXIsXG4gICAgKTtcbiAgICBjb25zdCB5ID0gY3VycmVudENlbnRyb2lkWU9mVG91Y2hlc0NoYW5nZWRBZnRlcih0b3VjaEhpc3RvcnksIG1vdmVkQWZ0ZXIpO1xuICAgIGNvbnN0IG5leHREWCA9IGdlc3R1cmVTdGF0ZS5keCArICh4IC0gcHJldlgpO1xuICAgIGNvbnN0IG5leHREWSA9IGdlc3R1cmVTdGF0ZS5keSArICh5IC0gcHJldlkpO1xuXG4gICAgLy8gVE9ETzogVGhpcyBtdXN0IGJlIGZpbHRlcmVkIGludGVsbGlnZW50bHkuXG4gICAgY29uc3QgZHQgPVxuICAgICAgdG91Y2hIaXN0b3J5Lm1vc3RSZWNlbnRUaW1lU3RhbXAgLSBnZXN0dXJlU3RhdGUuX2FjY291bnRzRm9yTW92ZXNVcFRvO1xuICAgIGdlc3R1cmVTdGF0ZS52eCA9IChuZXh0RFggLSBnZXN0dXJlU3RhdGUuZHgpIC8gZHQ7XG4gICAgZ2VzdHVyZVN0YXRlLnZ5ID0gKG5leHREWSAtIGdlc3R1cmVTdGF0ZS5keSkgLyBkdDtcblxuICAgIGdlc3R1cmVTdGF0ZS5keCA9IG5leHREWDtcbiAgICBnZXN0dXJlU3RhdGUuZHkgPSBuZXh0RFk7XG4gICAgZ2VzdHVyZVN0YXRlLl9hY2NvdW50c0Zvck1vdmVzVXBUbyA9IHRvdWNoSGlzdG9yeS5tb3N0UmVjZW50VGltZVN0YW1wO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIEVuaGFuY2VkIHZlcnNpb25zIG9mIGFsbCBvZiB0aGUgcmVzcG9uZGVyIGNhbGxiYWNrc1xuICAgKiB0aGF0IHByb3ZpZGUgbm90IG9ubHkgdGhlIHR5cGljYWwgYFJlc3BvbmRlclN5bnRoZXRpY0V2ZW50YCwgYnV0IGFsc28gdGhlXG4gICAqIGBQYW5SZXNwb25kZXJgIGdlc3R1cmUgc3RhdGUuICBTaW1wbHkgcmVwbGFjZSB0aGUgd29yZCBgUmVzcG9uZGVyYCB3aXRoXG4gICAqIGBQYW5SZXNwb25kZXJgIGluIGVhY2ggb2YgdGhlIHR5cGljYWwgYG9uUmVzcG9uZGVyKmAgY2FsbGJhY2tzLiBGb3JcbiAgICogZXhhbXBsZSwgdGhlIGBjb25maWdgIG9iamVjdCB3b3VsZCBsb29rIGxpa2U6XG4gICAqXG4gICAqICAtIGBvbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXI6IChlLCBnZXN0dXJlU3RhdGUpID0+IHsuLi59YFxuICAgKiAgLSBgb25Nb3ZlU2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZTogKGUsIGdlc3R1cmVTdGF0ZSkgPT4gey4uLn1gXG4gICAqICAtIGBvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyOiAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7Li4ufWBcbiAgICogIC0gYG9uU3RhcnRTaG91bGRTZXRQYW5SZXNwb25kZXJDYXB0dXJlOiAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7Li4ufWBcbiAgICogIC0gYG9uUGFuUmVzcG9uZGVyUmVqZWN0OiAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7Li4ufWBcbiAgICogIC0gYG9uUGFuUmVzcG9uZGVyR3JhbnQ6IChlLCBnZXN0dXJlU3RhdGUpID0+IHsuLi59YFxuICAgKiAgLSBgb25QYW5SZXNwb25kZXJTdGFydDogKGUsIGdlc3R1cmVTdGF0ZSkgPT4gey4uLn1gXG4gICAqICAtIGBvblBhblJlc3BvbmRlckVuZDogKGUsIGdlc3R1cmVTdGF0ZSkgPT4gey4uLn1gXG4gICAqICAtIGBvblBhblJlc3BvbmRlclJlbGVhc2U6IChlLCBnZXN0dXJlU3RhdGUpID0+IHsuLi59YFxuICAgKiAgLSBgb25QYW5SZXNwb25kZXJNb3ZlOiAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7Li4ufWBcbiAgICogIC0gYG9uUGFuUmVzcG9uZGVyVGVybWluYXRlOiAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7Li4ufWBcbiAgICogIC0gYG9uUGFuUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0OiAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7Li4ufWBcbiAgICogIC0gYG9uU2hvdWxkQmxvY2tOYXRpdmVSZXNwb25kZXI6IChlLCBnZXN0dXJlU3RhdGUpID0+IHsuLi59YFxuICAgKlxuICAgKiAgSW4gZ2VuZXJhbCwgZm9yIGV2ZW50cyB0aGF0IGhhdmUgY2FwdHVyZSBlcXVpdmFsZW50cywgd2UgdXBkYXRlIHRoZVxuICAgKiAgZ2VzdHVyZVN0YXRlIG9uY2UgaW4gdGhlIGNhcHR1cmUgcGhhc2UgYW5kIGNhbiB1c2UgaXQgaW4gdGhlIGJ1YmJsZSBwaGFzZVxuICAgKiAgYXMgd2VsbC5cbiAgICpcbiAgICogIEJlIGNhcmVmdWwgd2l0aCBvblN0YXJ0U2hvdWxkKiBjYWxsYmFja3MuIFRoZXkgb25seSByZWZsZWN0IHVwZGF0ZWRcbiAgICogIGBnZXN0dXJlU3RhdGVgIGZvciBzdGFydC9lbmQgZXZlbnRzIHRoYXQgYnViYmxlL2NhcHR1cmUgdG8gdGhlIE5vZGUuXG4gICAqICBPbmNlIHRoZSBub2RlIGlzIHRoZSByZXNwb25kZXIsIHlvdSBjYW4gcmVseSBvbiBldmVyeSBzdGFydC9lbmQgZXZlbnRcbiAgICogIGJlaW5nIHByb2Nlc3NlZCBieSB0aGUgZ2VzdHVyZSBhbmQgYGdlc3R1cmVTdGF0ZWAgYmVpbmcgdXBkYXRlZFxuICAgKiAgYWNjb3JkaW5nbHkuIChudW1iZXJBY3RpdmVUb3VjaGVzKSBtYXkgbm90IGJlIHRvdGFsbHkgYWNjdXJhdGUgdW5sZXNzIHlvdVxuICAgKiAgYXJlIHRoZSByZXNwb25kZXIuXG4gICAqL1xuICBjcmVhdGUoY29uZmlnOiBQYW5SZXNwb25kZXJDb25maWcpIHtcbiAgICBjb25zdCBpbnRlcmFjdGlvblN0YXRlID0ge1xuICAgICAgaGFuZGxlOiAobnVsbDogP251bWJlciksXG4gICAgfTtcbiAgICBjb25zdCBnZXN0dXJlU3RhdGU6IEdlc3R1cmVTdGF0ZSA9IHtcbiAgICAgIC8vIFVzZWZ1bCBmb3IgZGVidWdnaW5nXG4gICAgICBzdGF0ZUlEOiBNYXRoLnJhbmRvbSgpLFxuICAgICAgbW92ZVg6IDAsXG4gICAgICBtb3ZlWTogMCxcbiAgICAgIHgwOiAwLFxuICAgICAgeTA6IDAsXG4gICAgICBkeDogMCxcbiAgICAgIGR5OiAwLFxuICAgICAgdng6IDAsXG4gICAgICB2eTogMCxcbiAgICAgIG51bWJlckFjdGl2ZVRvdWNoZXM6IDAsXG4gICAgICBfYWNjb3VudHNGb3JNb3Zlc1VwVG86IDAsXG4gICAgfTtcbiAgICBjb25zdCBwYW5IYW5kbGVycyA9IHtcbiAgICAgIG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXIoZXZlbnQ6IFByZXNzRXZlbnQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5vblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyID09IG51bGxcbiAgICAgICAgICA/IGZhbHNlXG4gICAgICAgICAgOiBjb25maWcub25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlcihldmVudCwgZ2VzdHVyZVN0YXRlKTtcbiAgICAgIH0sXG4gICAgICBvbk1vdmVTaG91bGRTZXRSZXNwb25kZXIoZXZlbnQ6IFByZXNzRXZlbnQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5vbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXIgPT0gbnVsbFxuICAgICAgICAgID8gZmFsc2VcbiAgICAgICAgICA6IGNvbmZpZy5vbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXIoZXZlbnQsIGdlc3R1cmVTdGF0ZSk7XG4gICAgICB9LFxuICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlckNhcHR1cmUoZXZlbnQ6IFByZXNzRXZlbnQpOiBib29sZWFuIHtcbiAgICAgICAgLy8gVE9ETzogQWN0dWFsbHksIHdlIHNob3VsZCByZWluaXRpYWxpemUgdGhlIHN0YXRlIGFueSB0aW1lXG4gICAgICAgIC8vIHRvdWNoZXMubGVuZ3RoIGluY3JlYXNlcyBmcm9tIDAgYWN0aXZlIHRvID4gMCBhY3RpdmUuXG4gICAgICAgIGlmIChldmVudC5uYXRpdmVFdmVudC50b3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIFBhblJlc3BvbmRlci5faW5pdGlhbGl6ZUdlc3R1cmVTdGF0ZShnZXN0dXJlU3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGdlc3R1cmVTdGF0ZS5udW1iZXJBY3RpdmVUb3VjaGVzID1cbiAgICAgICAgICBldmVudC50b3VjaEhpc3RvcnkubnVtYmVyQWN0aXZlVG91Y2hlcztcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5vblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZSAhPSBudWxsXG4gICAgICAgICAgPyBjb25maWcub25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlckNhcHR1cmUoZXZlbnQsIGdlc3R1cmVTdGF0ZSlcbiAgICAgICAgICA6IGZhbHNlO1xuICAgICAgfSxcblxuICAgICAgb25Nb3ZlU2hvdWxkU2V0UmVzcG9uZGVyQ2FwdHVyZShldmVudDogUHJlc3NFdmVudCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCB0b3VjaEhpc3RvcnkgPSBldmVudC50b3VjaEhpc3Rvcnk7XG4gICAgICAgIC8vIFJlc3BvbmRlciBzeXN0ZW0gaW5jb3JyZWN0bHkgZGlzcGF0Y2hlcyBzaG91bGQqIHRvIGN1cnJlbnQgcmVzcG9uZGVyXG4gICAgICAgIC8vIEZpbHRlciBvdXQgYW55IHRvdWNoIG1vdmVzIHBhc3QgdGhlIGZpcnN0IG9uZSAtIHdlIHdvdWxkIGhhdmVcbiAgICAgICAgLy8gYWxyZWFkeSBwcm9jZXNzZWQgbXVsdGktdG91Y2ggZ2VvbWV0cnkgZHVyaW5nIHRoZSBmaXJzdCBldmVudC5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdlc3R1cmVTdGF0ZS5fYWNjb3VudHNGb3JNb3Zlc1VwVG8gPT09XG4gICAgICAgICAgdG91Y2hIaXN0b3J5Lm1vc3RSZWNlbnRUaW1lU3RhbXBcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFBhblJlc3BvbmRlci5fdXBkYXRlR2VzdHVyZVN0YXRlT25Nb3ZlKGdlc3R1cmVTdGF0ZSwgdG91Y2hIaXN0b3J5KTtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5vbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXJDYXB0dXJlXG4gICAgICAgICAgPyBjb25maWcub25Nb3ZlU2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZShldmVudCwgZ2VzdHVyZVN0YXRlKVxuICAgICAgICAgIDogZmFsc2U7XG4gICAgICB9LFxuXG4gICAgICBvblJlc3BvbmRlckdyYW50KGV2ZW50OiBQcmVzc0V2ZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghaW50ZXJhY3Rpb25TdGF0ZS5oYW5kbGUpIHtcbiAgICAgICAgICBpbnRlcmFjdGlvblN0YXRlLmhhbmRsZSA9IEludGVyYWN0aW9uTWFuYWdlci5jcmVhdGVJbnRlcmFjdGlvbkhhbmRsZSgpO1xuICAgICAgICB9XG4gICAgICAgIGdlc3R1cmVTdGF0ZS54MCA9IGN1cnJlbnRDZW50cm9pZFgoZXZlbnQudG91Y2hIaXN0b3J5KTtcbiAgICAgICAgZ2VzdHVyZVN0YXRlLnkwID0gY3VycmVudENlbnRyb2lkWShldmVudC50b3VjaEhpc3RvcnkpO1xuICAgICAgICBnZXN0dXJlU3RhdGUuZHggPSAwO1xuICAgICAgICBnZXN0dXJlU3RhdGUuZHkgPSAwO1xuICAgICAgICBpZiAoY29uZmlnLm9uUGFuUmVzcG9uZGVyR3JhbnQpIHtcbiAgICAgICAgICBjb25maWcub25QYW5SZXNwb25kZXJHcmFudChldmVudCwgZ2VzdHVyZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiB0NzQ2NzEyNCBpbnZlc3RpZ2F0ZSBpZiB0aGlzIGNhbiBiZSByZW1vdmVkXG4gICAgICAgIHJldHVybiBjb25maWcub25TaG91bGRCbG9ja05hdGl2ZVJlc3BvbmRlciA9PSBudWxsXG4gICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgOiBjb25maWcub25TaG91bGRCbG9ja05hdGl2ZVJlc3BvbmRlcihldmVudCwgZ2VzdHVyZVN0YXRlKTtcbiAgICAgIH0sXG5cbiAgICAgIG9uUmVzcG9uZGVyUmVqZWN0KGV2ZW50OiBQcmVzc0V2ZW50KTogdm9pZCB7XG4gICAgICAgIGNsZWFySW50ZXJhY3Rpb25IYW5kbGUoXG4gICAgICAgICAgaW50ZXJhY3Rpb25TdGF0ZSxcbiAgICAgICAgICBjb25maWcub25QYW5SZXNwb25kZXJSZWplY3QsXG4gICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgZ2VzdHVyZVN0YXRlLFxuICAgICAgICApO1xuICAgICAgfSxcblxuICAgICAgb25SZXNwb25kZXJSZWxlYXNlKGV2ZW50OiBQcmVzc0V2ZW50KTogdm9pZCB7XG4gICAgICAgIGNsZWFySW50ZXJhY3Rpb25IYW5kbGUoXG4gICAgICAgICAgaW50ZXJhY3Rpb25TdGF0ZSxcbiAgICAgICAgICBjb25maWcub25QYW5SZXNwb25kZXJSZWxlYXNlLFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIGdlc3R1cmVTdGF0ZSxcbiAgICAgICAgKTtcbiAgICAgICAgUGFuUmVzcG9uZGVyLl9pbml0aWFsaXplR2VzdHVyZVN0YXRlKGdlc3R1cmVTdGF0ZSk7XG4gICAgICB9LFxuXG4gICAgICBvblJlc3BvbmRlclN0YXJ0KGV2ZW50OiBQcmVzc0V2ZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRvdWNoSGlzdG9yeSA9IGV2ZW50LnRvdWNoSGlzdG9yeTtcbiAgICAgICAgZ2VzdHVyZVN0YXRlLm51bWJlckFjdGl2ZVRvdWNoZXMgPSB0b3VjaEhpc3RvcnkubnVtYmVyQWN0aXZlVG91Y2hlcztcbiAgICAgICAgaWYgKGNvbmZpZy5vblBhblJlc3BvbmRlclN0YXJ0KSB7XG4gICAgICAgICAgY29uZmlnLm9uUGFuUmVzcG9uZGVyU3RhcnQoZXZlbnQsIGdlc3R1cmVTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIG9uUmVzcG9uZGVyTW92ZShldmVudDogUHJlc3NFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCB0b3VjaEhpc3RvcnkgPSBldmVudC50b3VjaEhpc3Rvcnk7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgdGhlIGRpc3BhdGNoIG9mIHR3byB0b3VjaCBtb3ZlcyB3aGVuIHRoZXJlIGFyZSB0d29cbiAgICAgICAgLy8gc2ltdWx0YW5lb3VzbHkgY2hhbmdlZCB0b3VjaGVzLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2VzdHVyZVN0YXRlLl9hY2NvdW50c0Zvck1vdmVzVXBUbyA9PT1cbiAgICAgICAgICB0b3VjaEhpc3RvcnkubW9zdFJlY2VudFRpbWVTdGFtcFxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRmlsdGVyIG91dCBhbnkgdG91Y2ggbW92ZXMgcGFzdCB0aGUgZmlyc3Qgb25lIC0gd2Ugd291bGQgaGF2ZVxuICAgICAgICAvLyBhbHJlYWR5IHByb2Nlc3NlZCBtdWx0aS10b3VjaCBnZW9tZXRyeSBkdXJpbmcgdGhlIGZpcnN0IGV2ZW50LlxuICAgICAgICBQYW5SZXNwb25kZXIuX3VwZGF0ZUdlc3R1cmVTdGF0ZU9uTW92ZShnZXN0dXJlU3RhdGUsIHRvdWNoSGlzdG9yeSk7XG4gICAgICAgIGlmIChjb25maWcub25QYW5SZXNwb25kZXJNb3ZlKSB7XG4gICAgICAgICAgY29uZmlnLm9uUGFuUmVzcG9uZGVyTW92ZShldmVudCwgZ2VzdHVyZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgb25SZXNwb25kZXJFbmQoZXZlbnQ6IFByZXNzRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdG91Y2hIaXN0b3J5ID0gZXZlbnQudG91Y2hIaXN0b3J5O1xuICAgICAgICBnZXN0dXJlU3RhdGUubnVtYmVyQWN0aXZlVG91Y2hlcyA9IHRvdWNoSGlzdG9yeS5udW1iZXJBY3RpdmVUb3VjaGVzO1xuICAgICAgICBjbGVhckludGVyYWN0aW9uSGFuZGxlKFxuICAgICAgICAgIGludGVyYWN0aW9uU3RhdGUsXG4gICAgICAgICAgY29uZmlnLm9uUGFuUmVzcG9uZGVyRW5kLFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIGdlc3R1cmVTdGF0ZSxcbiAgICAgICAgKTtcbiAgICAgIH0sXG5cbiAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRlKGV2ZW50OiBQcmVzc0V2ZW50KTogdm9pZCB7XG4gICAgICAgIGNsZWFySW50ZXJhY3Rpb25IYW5kbGUoXG4gICAgICAgICAgaW50ZXJhY3Rpb25TdGF0ZSxcbiAgICAgICAgICBjb25maWcub25QYW5SZXNwb25kZXJUZXJtaW5hdGUsXG4gICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgZ2VzdHVyZVN0YXRlLFxuICAgICAgICApO1xuICAgICAgICBQYW5SZXNwb25kZXIuX2luaXRpYWxpemVHZXN0dXJlU3RhdGUoZ2VzdHVyZVN0YXRlKTtcbiAgICAgIH0sXG5cbiAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0KGV2ZW50OiBQcmVzc0V2ZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBjb25maWcub25QYW5SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QgPT0gbnVsbFxuICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgIDogY29uZmlnLm9uUGFuUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0KGV2ZW50LCBnZXN0dXJlU3RhdGUpO1xuICAgICAgfSxcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICBwYW5IYW5kbGVycyxcbiAgICAgIGdldEludGVyYWN0aW9uSGFuZGxlKCk6ID9udW1iZXIge1xuICAgICAgICByZXR1cm4gaW50ZXJhY3Rpb25TdGF0ZS5oYW5kbGU7XG4gICAgICB9LFxuICAgIH07XG4gIH0sXG59O1xuXG5mdW5jdGlvbiBjbGVhckludGVyYWN0aW9uSGFuZGxlKFxuICBpbnRlcmFjdGlvblN0YXRlOiB7aGFuZGxlOiA/bnVtYmVyfSxcbiAgY2FsbGJhY2s6ID8oQWN0aXZlQ2FsbGJhY2sgfCBQYXNzaXZlQ2FsbGJhY2spLFxuICBldmVudDogUHJlc3NFdmVudCxcbiAgZ2VzdHVyZVN0YXRlOiBHZXN0dXJlU3RhdGUsXG4pIHtcbiAgaWYgKGludGVyYWN0aW9uU3RhdGUuaGFuZGxlKSB7XG4gICAgSW50ZXJhY3Rpb25NYW5hZ2VyLmNsZWFySW50ZXJhY3Rpb25IYW5kbGUoaW50ZXJhY3Rpb25TdGF0ZS5oYW5kbGUpO1xuICAgIGludGVyYWN0aW9uU3RhdGUuaGFuZGxlID0gbnVsbDtcbiAgfVxuICBpZiAoY2FsbGJhY2spIHtcbiAgICBjYWxsYmFjayhldmVudCwgZ2VzdHVyZVN0YXRlKTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBQYW5SZXNwb25kZXJJbnN0YW5jZSA9ICRDYWxsPFxuICAkUHJvcGVydHlUeXBlPHR5cGVvZiBQYW5SZXNwb25kZXIsICdjcmVhdGUnPixcbiAgUGFuUmVzcG9uZGVyQ29uZmlnLFxuPjtcblxubW9kdWxlLmV4cG9ydHMgPSBQYW5SZXNwb25kZXI7XG4iXX0=