80870ce474281c90f5f28fec9d322e3f
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var EventEmitterWithHolding = function () {
  function EventEmitterWithHolding(emitter, holder) {
    (0, _classCallCheck2.default)(this, EventEmitterWithHolding);
    this._emitter = emitter;
    this._eventHolder = holder;
    this._currentEventToken = null;
    this._emittingHeldEvents = false;
  }

  (0, _createClass2.default)(EventEmitterWithHolding, [{
    key: "addListener",
    value: function addListener(eventType, listener, context) {
      return this._emitter.addListener(eventType, listener, context);
    }
  }, {
    key: "once",
    value: function once(eventType, listener, context) {
      return this._emitter.once(eventType, listener, context);
    }
  }, {
    key: "addRetroactiveListener",
    value: function addRetroactiveListener(eventType, listener, context) {
      var subscription = this._emitter.addListener(eventType, listener, context);

      this._emittingHeldEvents = true;

      this._eventHolder.emitToListener(eventType, listener, context);

      this._emittingHeldEvents = false;
      return subscription;
    }
  }, {
    key: "removeAllListeners",
    value: function removeAllListeners(eventType) {
      this._emitter.removeAllListeners(eventType);
    }
  }, {
    key: "removeCurrentListener",
    value: function removeCurrentListener() {
      this._emitter.removeCurrentListener();
    }
  }, {
    key: "listeners",
    value: function listeners(eventType) {
      return this._emitter.listeners(eventType);
    }
  }, {
    key: "emit",
    value: function emit(eventType) {
      var _this$_emitter;

      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        args[_key - 1] = arguments[_key];
      }

      (_this$_emitter = this._emitter).emit.apply(_this$_emitter, [eventType].concat(args));
    }
  }, {
    key: "emitAndHold",
    value: function emitAndHold(eventType) {
      var _this$_eventHolder, _this$_emitter2;

      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        args[_key2 - 1] = arguments[_key2];
      }

      this._currentEventToken = (_this$_eventHolder = this._eventHolder).holdEvent.apply(_this$_eventHolder, [eventType].concat(args));

      (_this$_emitter2 = this._emitter).emit.apply(_this$_emitter2, [eventType].concat(args));

      this._currentEventToken = null;
    }
  }, {
    key: "releaseCurrentEvent",
    value: function releaseCurrentEvent() {
      if (this._currentEventToken) {
        this._eventHolder.releaseEvent(this._currentEventToken);
      } else if (this._emittingHeldEvents) {
        this._eventHolder.releaseCurrentEvent();
      }
    }
  }, {
    key: "releaseHeldEventType",
    value: function releaseHeldEventType(eventType) {
      this._eventHolder.releaseEventType(eventType);
    }
  }]);
  return EventEmitterWithHolding;
}();

module.exports = EventEmitterWithHolding;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkV2ZW50RW1pdHRlcldpdGhIb2xkaW5nLmpzIl0sIm5hbWVzIjpbIkV2ZW50RW1pdHRlcldpdGhIb2xkaW5nIiwiZW1pdHRlciIsImhvbGRlciIsIl9lbWl0dGVyIiwiX2V2ZW50SG9sZGVyIiwiX2N1cnJlbnRFdmVudFRva2VuIiwiX2VtaXR0aW5nSGVsZEV2ZW50cyIsImV2ZW50VHlwZSIsImxpc3RlbmVyIiwiY29udGV4dCIsImFkZExpc3RlbmVyIiwib25jZSIsInN1YnNjcmlwdGlvbiIsImVtaXRUb0xpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwicmVtb3ZlQ3VycmVudExpc3RlbmVyIiwibGlzdGVuZXJzIiwiYXJncyIsImVtaXQiLCJob2xkRXZlbnQiLCJyZWxlYXNlRXZlbnQiLCJyZWxlYXNlQ3VycmVudEV2ZW50IiwicmVsZWFzZUV2ZW50VHlwZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVBOzs7Ozs7OztJQWtCTUEsdUI7QUFhSixtQ0FBWUMsT0FBWixFQUFtQ0MsTUFBbkMsRUFBd0Q7QUFBQTtBQUN0RCxTQUFLQyxRQUFMLEdBQWdCRixPQUFoQjtBQUNBLFNBQUtHLFlBQUwsR0FBb0JGLE1BQXBCO0FBQ0EsU0FBS0csa0JBQUwsR0FBMEIsSUFBMUI7QUFDQSxTQUFLQyxtQkFBTCxHQUEyQixLQUEzQjtBQUNEOzs7O2dDQUtXQyxTLEVBQW1CQyxRLEVBQW9CQyxPLEVBQWtCO0FBQ25FLGFBQU8sS0FBS04sUUFBTCxDQUFjTyxXQUFkLENBQTBCSCxTQUExQixFQUFxQ0MsUUFBckMsRUFBK0NDLE9BQS9DLENBQVA7QUFDRDs7O3lCQUtJRixTLEVBQW1CQyxRLEVBQW9CQyxPLEVBQWtCO0FBQzVELGFBQU8sS0FBS04sUUFBTCxDQUFjUSxJQUFkLENBQW1CSixTQUFuQixFQUE4QkMsUUFBOUIsRUFBd0NDLE9BQXhDLENBQVA7QUFDRDs7OzJDQXVCQ0YsUyxFQUNBQyxRLEVBQ0FDLE8sRUFDcUI7QUFDckIsVUFBTUcsWUFBWSxHQUFHLEtBQUtULFFBQUwsQ0FBY08sV0FBZCxDQUNuQkgsU0FEbUIsRUFFbkJDLFFBRm1CLEVBR25CQyxPQUhtQixDQUFyQjs7QUFNQSxXQUFLSCxtQkFBTCxHQUEyQixJQUEzQjs7QUFDQSxXQUFLRixZQUFMLENBQWtCUyxjQUFsQixDQUFpQ04sU0FBakMsRUFBNENDLFFBQTVDLEVBQXNEQyxPQUF0RDs7QUFDQSxXQUFLSCxtQkFBTCxHQUEyQixLQUEzQjtBQUVBLGFBQU9NLFlBQVA7QUFDRDs7O3VDQUtrQkwsUyxFQUFtQjtBQUNwQyxXQUFLSixRQUFMLENBQWNXLGtCQUFkLENBQWlDUCxTQUFqQztBQUNEOzs7NENBS3VCO0FBQ3RCLFdBQUtKLFFBQUwsQ0FBY1kscUJBQWQ7QUFDRDs7OzhCQUtTUixTLEVBQXlEO0FBQ2pFLGFBQU8sS0FBS0osUUFBTCxDQUFjYSxTQUFkLENBQXdCVCxTQUF4QixDQUFQO0FBQ0Q7Ozt5QkFLSUEsUyxFQUFpQztBQUFBOztBQUFBLHdDQUFYVSxJQUFXO0FBQVhBLFFBQUFBLElBQVc7QUFBQTs7QUFDcEMsNkJBQUtkLFFBQUwsRUFBY2UsSUFBZCx3QkFBbUJYLFNBQW5CLFNBQWlDVSxJQUFqQztBQUNEOzs7Z0NBaUJXVixTLEVBQWlDO0FBQUE7O0FBQUEseUNBQVhVLElBQVc7QUFBWEEsUUFBQUEsSUFBVztBQUFBOztBQUMzQyxXQUFLWixrQkFBTCxHQUEwQiwyQkFBS0QsWUFBTCxFQUFrQmUsU0FBbEIsNEJBQTRCWixTQUE1QixTQUEwQ1UsSUFBMUMsRUFBMUI7O0FBQ0EsOEJBQUtkLFFBQUwsRUFBY2UsSUFBZCx5QkFBbUJYLFNBQW5CLFNBQWlDVSxJQUFqQzs7QUFDQSxXQUFLWixrQkFBTCxHQUEwQixJQUExQjtBQUNEOzs7MENBS3FCO0FBQ3BCLFVBQUksS0FBS0Esa0JBQVQsRUFBNkI7QUFDM0IsYUFBS0QsWUFBTCxDQUFrQmdCLFlBQWxCLENBQStCLEtBQUtmLGtCQUFwQztBQUNELE9BRkQsTUFFTyxJQUFJLEtBQUtDLG1CQUFULEVBQThCO0FBQ25DLGFBQUtGLFlBQUwsQ0FBa0JpQixtQkFBbEI7QUFDRDtBQUNGOzs7eUNBTW9CZCxTLEVBQW1CO0FBQ3RDLFdBQUtILFlBQUwsQ0FBa0JrQixnQkFBbEIsQ0FBbUNmLFNBQW5DO0FBQ0Q7Ozs7O0FBR0hnQixNQUFNLENBQUNDLE9BQVAsR0FBaUJ4Qix1QkFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSBFbWl0dGVyU3Vic2NyaXB0aW9uIGZyb20gJy4vRW1pdHRlclN1YnNjcmlwdGlvbic7XG5pbXBvcnQgdHlwZSBFdmVudEVtaXR0ZXIgZnJvbSAnLi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHR5cGUgRXZlbnRIb2xkZXIgZnJvbSAnLi9FdmVudEhvbGRlcic7XG5cbi8qKlxuICogQGNsYXNzIEV2ZW50RW1pdHRlcldpdGhIb2xkaW5nXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFuIEV2ZW50RW1pdHRlcldpdGhIb2xkaW5nIGRlY29yYXRlcyBhbiBldmVudCBlbWl0dGVyIGFuZCBlbmFibGVzIG9uZSB0b1xuICogXCJob2xkXCIgb3IgY2FjaGUgZXZlbnRzIGFuZCB0aGVuIGhhdmUgYSBoYW5kbGVyIHJlZ2lzdGVyIGxhdGVyIHRvIGFjdHVhbGx5XG4gKiBoYW5kbGUgdGhlbS5cbiAqXG4gKiBUaGlzIGlzIHNlcGFyYXRlZCBpbnRvIGl0cyBvd24gZGVjb3JhdG9yIHNvIHRoYXQgb25seSB0aG9zZSB3aG8gd2FudCB0byB1c2VcbiAqIHRoZSBob2xkaW5nIGZ1bmN0aW9uYWxpdHkgaGF2ZSB0byBhbmQgb3RoZXJzIGNhbiBqdXN0IHVzZSBhbiBlbWl0dGVyLiBTaW5jZVxuICogaXQgaW1wbGVtZW50cyB0aGUgZW1pdHRlciBpbnRlcmZhY2UgaXQgY2FuIGFsc28gYmUgY29tYmluZWQgd2l0aCBhbnl0aGluZ1xuICogdGhhdCB1c2VzIGFuIGVtaXR0ZXIuXG4gKi9cbmNsYXNzIEV2ZW50RW1pdHRlcldpdGhIb2xkaW5nIHtcbiAgX2VtaXR0ZXI6IEV2ZW50RW1pdHRlcjtcbiAgX2V2ZW50SG9sZGVyOiBFdmVudEhvbGRlcjtcbiAgX2N1cnJlbnRFdmVudFRva2VuOiA/T2JqZWN0O1xuICBfZW1pdHRpbmdIZWxkRXZlbnRzOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtvYmplY3R9IGVtaXR0ZXIgLSBUaGUgb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBlbWl0dGluZyB0aGUgYWN0dWFsXG4gICAqICAgZXZlbnRzLlxuICAgKiBAcGFyYW0ge29iamVjdH0gaG9sZGVyIC0gVGhlIGV2ZW50IGhvbGRlciB0aGF0IGlzIHJlc3BvbnNpYmxlIGZvciBob2xkaW5nXG4gICAqICAgYW5kIHRoZW4gZW1pdHRpbmcgaGVsZCBldmVudHMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihlbWl0dGVyOiBFdmVudEVtaXR0ZXIsIGhvbGRlcjogRXZlbnRIb2xkZXIpIHtcbiAgICB0aGlzLl9lbWl0dGVyID0gZW1pdHRlcjtcbiAgICB0aGlzLl9ldmVudEhvbGRlciA9IGhvbGRlcjtcbiAgICB0aGlzLl9jdXJyZW50RXZlbnRUb2tlbiA9IG51bGw7XG4gICAgdGhpcy5fZW1pdHRpbmdIZWxkRXZlbnRzID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHNlZSBFdmVudEVtaXR0ZXIjYWRkTGlzdGVuZXJcbiAgICovXG4gIGFkZExpc3RlbmVyKGV2ZW50VHlwZTogc3RyaW5nLCBsaXN0ZW5lcjogRnVuY3Rpb24sIGNvbnRleHQ6ID9PYmplY3QpIHtcbiAgICByZXR1cm4gdGhpcy5fZW1pdHRlci5hZGRMaXN0ZW5lcihldmVudFR5cGUsIGxpc3RlbmVyLCBjb250ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAc2VlIEV2ZW50RW1pdHRlciNvbmNlXG4gICAqL1xuICBvbmNlKGV2ZW50VHlwZTogc3RyaW5nLCBsaXN0ZW5lcjogRnVuY3Rpb24sIGNvbnRleHQ6ID9PYmplY3QpIHtcbiAgICByZXR1cm4gdGhpcy5fZW1pdHRlci5vbmNlKGV2ZW50VHlwZSwgbGlzdGVuZXIsIGNvbnRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBsaXN0ZW5lciB0byBiZSBpbnZva2VkIHdoZW4gZXZlbnRzIG9mIHRoZSBzcGVjaWZpZWQgdHlwZSBhcmVcbiAgICogZW1pdHRlZC4gQW4gb3B0aW9uYWwgY2FsbGluZyBjb250ZXh0IG1heSBiZSBwcm92aWRlZC4gVGhlIGRhdGEgYXJndW1lbnRzXG4gICAqIGVtaXR0ZWQgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIGxpc3RlbmVyIGZ1bmN0aW9uLiBJbiBhZGRpdGlvbiB0byBzdWJzY3JpYmluZ1xuICAgKiB0byBhbGwgc3Vic2VxdWVudCBldmVudHMsIHRoaXMgbWV0aG9kIHdpbGwgYWxzbyBoYW5kbGUgYW55IGV2ZW50cyB0aGF0IGhhdmVcbiAgICogYWxyZWFkeSBiZWVuIGVtaXR0ZWQsIGhlbGQsIGFuZCBub3QgcmVsZWFzZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGUgLSBOYW1lIG9mIHRoZSBldmVudCB0byBsaXN0ZW4gdG9cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gbGlzdGVuZXIgLSBGdW5jdGlvbiB0byBpbnZva2Ugd2hlbiB0aGUgc3BlY2lmaWVkIGV2ZW50IGlzXG4gICAqICAgZW1pdHRlZFxuICAgKiBAcGFyYW0geyp9IGNvbnRleHQgLSBPcHRpb25hbCBjb250ZXh0IG9iamVjdCB0byB1c2Ugd2hlbiBpbnZva2luZyB0aGVcbiAgICogICBsaXN0ZW5lclxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgIGVtaXR0ZXIuZW1pdEFuZEhvbGQoJ3NvbWVFdmVudCcsICdhYmMnKTtcbiAgICpcbiAgICogICBlbWl0dGVyLmFkZFJldHJvYWN0aXZlTGlzdGVuZXIoJ3NvbWVFdmVudCcsIGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICogICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgKiAgIH0pOyAvLyBsb2dzICdhYmMnXG4gICAqL1xuICBhZGRSZXRyb2FjdGl2ZUxpc3RlbmVyKFxuICAgIGV2ZW50VHlwZTogc3RyaW5nLFxuICAgIGxpc3RlbmVyOiBGdW5jdGlvbixcbiAgICBjb250ZXh0OiA/T2JqZWN0LFxuICApOiBFbWl0dGVyU3Vic2NyaXB0aW9uIHtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLl9lbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgZXZlbnRUeXBlLFxuICAgICAgbGlzdGVuZXIsXG4gICAgICBjb250ZXh0LFxuICAgICk7XG5cbiAgICB0aGlzLl9lbWl0dGluZ0hlbGRFdmVudHMgPSB0cnVlO1xuICAgIHRoaXMuX2V2ZW50SG9sZGVyLmVtaXRUb0xpc3RlbmVyKGV2ZW50VHlwZSwgbGlzdGVuZXIsIGNvbnRleHQpO1xuICAgIHRoaXMuX2VtaXR0aW5nSGVsZEV2ZW50cyA9IGZhbHNlO1xuXG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAc2VlIEV2ZW50RW1pdHRlciNyZW1vdmVBbGxMaXN0ZW5lcnNcbiAgICovXG4gIHJlbW92ZUFsbExpc3RlbmVycyhldmVudFR5cGU6IHN0cmluZykge1xuICAgIHRoaXMuX2VtaXR0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50VHlwZSk7XG4gIH1cblxuICAvKipcbiAgICogQHNlZSBFdmVudEVtaXR0ZXIjcmVtb3ZlQ3VycmVudExpc3RlbmVyXG4gICAqL1xuICByZW1vdmVDdXJyZW50TGlzdGVuZXIoKSB7XG4gICAgdGhpcy5fZW1pdHRlci5yZW1vdmVDdXJyZW50TGlzdGVuZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAc2VlIEV2ZW50RW1pdHRlciNsaXN0ZW5lcnNcbiAgICovXG4gIGxpc3RlbmVycyhldmVudFR5cGU6IHN0cmluZykgLyogVE9ETzogQW5ub3RhdGUgcmV0dXJuIHR5cGUgaGVyZSAqLyB7XG4gICAgcmV0dXJuIHRoaXMuX2VtaXR0ZXIubGlzdGVuZXJzKGV2ZW50VHlwZSk7XG4gIH1cblxuICAvKipcbiAgICogQHNlZSBFdmVudEVtaXR0ZXIjZW1pdFxuICAgKi9cbiAgZW1pdChldmVudFR5cGU6IHN0cmluZywgLi4uYXJnczogYW55KSB7XG4gICAgdGhpcy5fZW1pdHRlci5lbWl0KGV2ZW50VHlwZSwgLi4uYXJncyk7XG4gIH1cblxuICAvKipcbiAgICogRW1pdHMgYW4gZXZlbnQgb2YgdGhlIGdpdmVuIHR5cGUgd2l0aCB0aGUgZ2l2ZW4gZGF0YSwgYW5kIGhvbGRzIHRoYXQgZXZlbnRcbiAgICogaW4gb3JkZXIgdG8gYmUgYWJsZSB0byBkaXNwYXRjaCBpdCB0byBhIGxhdGVyIHN1YnNjcmliZXIgd2hlbiB0aGV5IHNheSB0aGV5XG4gICAqIHdhbnQgdG8gaGFuZGxlIGhlbGQgZXZlbnRzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIC0gTmFtZSBvZiB0aGUgZXZlbnQgdG8gZW1pdFxuICAgKiBAcGFyYW0gey4uLip9IEFyYml0cmFyeSBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIGVhY2ggcmVnaXN0ZXJlZCBsaXN0ZW5lclxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgIGVtaXR0ZXIuZW1pdEFuZEhvbGQoJ3NvbWVFdmVudCcsICdhYmMnKTtcbiAgICpcbiAgICogICBlbWl0dGVyLmFkZFJldHJvYWN0aXZlTGlzdGVuZXIoJ3NvbWVFdmVudCcsIGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICogICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgKiAgIH0pOyAvLyBsb2dzICdhYmMnXG4gICAqL1xuICBlbWl0QW5kSG9sZChldmVudFR5cGU6IHN0cmluZywgLi4uYXJnczogYW55KSB7XG4gICAgdGhpcy5fY3VycmVudEV2ZW50VG9rZW4gPSB0aGlzLl9ldmVudEhvbGRlci5ob2xkRXZlbnQoZXZlbnRUeXBlLCAuLi5hcmdzKTtcbiAgICB0aGlzLl9lbWl0dGVyLmVtaXQoZXZlbnRUeXBlLCAuLi5hcmdzKTtcbiAgICB0aGlzLl9jdXJyZW50RXZlbnRUb2tlbiA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHNlZSBFdmVudEhvbGRlciNyZWxlYXNlQ3VycmVudEV2ZW50XG4gICAqL1xuICByZWxlYXNlQ3VycmVudEV2ZW50KCkge1xuICAgIGlmICh0aGlzLl9jdXJyZW50RXZlbnRUb2tlbikge1xuICAgICAgdGhpcy5fZXZlbnRIb2xkZXIucmVsZWFzZUV2ZW50KHRoaXMuX2N1cnJlbnRFdmVudFRva2VuKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2VtaXR0aW5nSGVsZEV2ZW50cykge1xuICAgICAgdGhpcy5fZXZlbnRIb2xkZXIucmVsZWFzZUN1cnJlbnRFdmVudCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAc2VlIEV2ZW50SG9sZGVyI3JlbGVhc2VFdmVudFR5cGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICAgKi9cbiAgcmVsZWFzZUhlbGRFdmVudFR5cGUoZXZlbnRUeXBlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9ldmVudEhvbGRlci5yZWxlYXNlRXZlbnRUeXBlKGV2ZW50VHlwZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXJXaXRoSG9sZGluZztcbiJdfQ==