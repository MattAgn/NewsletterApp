cc614c04421d270e32f04b56098fd8bc
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var DeprecatedEdgeInsetsPropType = require('../../DeprecatedPropTypes/DeprecatedEdgeInsetsPropType');

var React = require('react');

var PropTypes = require('prop-types');

var Touchable = require('./Touchable');

var View = require('../View/View');

var createReactClass = require('create-react-class');

var ensurePositiveDelayProps = require('./ensurePositiveDelayProps');

var _require = require('../../DeprecatedPropTypes/DeprecatedViewAccessibility'),
    DeprecatedAccessibilityRoles = _require.DeprecatedAccessibilityRoles,
    DeprecatedAccessibilityStates = _require.DeprecatedAccessibilityStates;

var PRESS_RETENTION_OFFSET = {
  top: 20,
  left: 20,
  right: 20,
  bottom: 30
};
var OVERRIDE_PROPS = ['accessibilityLabel', 'accessibilityHint', 'accessibilityIgnoresInvertColors', 'accessibilityRole', 'accessibilityStates', 'hitSlop', 'nativeID', 'onBlur', 'onFocus', 'onLayout', 'testID'];
var TouchableWithoutFeedback = createReactClass({
  displayName: 'TouchableWithoutFeedback',
  mixins: [Touchable.Mixin],
  propTypes: {
    accessible: PropTypes.bool,
    accessibilityLabel: PropTypes.node,
    accessibilityHint: PropTypes.string,
    accessibilityIgnoresInvertColors: PropTypes.bool,
    accessibilityRole: PropTypes.oneOf(DeprecatedAccessibilityRoles),
    accessibilityStates: PropTypes.arrayOf(PropTypes.oneOf(DeprecatedAccessibilityStates)),
    onFocus: PropTypes.func,
    onBlur: PropTypes.func,
    disabled: PropTypes.bool,
    onPress: PropTypes.func,
    onPressIn: PropTypes.func,
    onPressOut: PropTypes.func,
    onLayout: PropTypes.func,
    touchSoundDisabled: PropTypes.bool,
    onLongPress: PropTypes.func,
    nativeID: PropTypes.string,
    testID: PropTypes.string,
    delayPressIn: PropTypes.number,
    delayPressOut: PropTypes.number,
    delayLongPress: PropTypes.number,
    pressRetentionOffset: DeprecatedEdgeInsetsPropType,
    hitSlop: DeprecatedEdgeInsetsPropType
  },
  getInitialState: function getInitialState() {
    return this.touchableGetInitialState();
  },
  componentDidMount: function componentDidMount() {
    ensurePositiveDelayProps(this.props);
  },
  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {
    ensurePositiveDelayProps(nextProps);
  },
  touchableHandlePress: function touchableHandlePress(e) {
    this.props.onPress && this.props.onPress(e);
  },
  touchableHandleActivePressIn: function touchableHandleActivePressIn(e) {
    this.props.onPressIn && this.props.onPressIn(e);
  },
  touchableHandleActivePressOut: function touchableHandleActivePressOut(e) {
    this.props.onPressOut && this.props.onPressOut(e);
  },
  touchableHandleLongPress: function touchableHandleLongPress(e) {
    this.props.onLongPress && this.props.onLongPress(e);
  },
  touchableGetPressRectOffset: function touchableGetPressRectOffset() {
    return this.props.pressRetentionOffset || PRESS_RETENTION_OFFSET;
  },
  touchableGetHitSlop: function touchableGetHitSlop() {
    return this.props.hitSlop;
  },
  touchableGetHighlightDelayMS: function touchableGetHighlightDelayMS() {
    return this.props.delayPressIn || 0;
  },
  touchableGetLongPressDelayMS: function touchableGetLongPressDelayMS() {
    return this.props.delayLongPress === 0 ? 0 : this.props.delayLongPress || 500;
  },
  touchableGetPressOutDelayMS: function touchableGetPressOutDelayMS() {
    return this.props.delayPressOut || 0;
  },
  render: function render() {
    var child = React.Children.only(this.props.children);
    var children = child.props.children;

    if (Touchable.TOUCH_TARGET_DEBUG && child.type === View) {
      children = React.Children.toArray(children);
      children.push(Touchable.renderDebugView({
        color: 'red',
        hitSlop: this.props.hitSlop
      }));
    }

    var overrides = {};

    for (var _i = 0, _OVERRIDE_PROPS = OVERRIDE_PROPS; _i < _OVERRIDE_PROPS.length; _i++) {
      var prop = _OVERRIDE_PROPS[_i];

      if (this.props[prop] !== undefined) {
        overrides[prop] = this.props[prop];
      }
    }

    return React.cloneElement(child, _objectSpread({}, overrides, {
      accessible: this.props.accessible !== false,
      clickable: this.props.clickable !== false && this.props.onPress !== undefined,
      onClick: this.touchableHandlePress,
      onStartShouldSetResponder: this.touchableHandleStartShouldSetResponder,
      onResponderTerminationRequest: this.touchableHandleResponderTerminationRequest,
      onResponderGrant: this.touchableHandleResponderGrant,
      onResponderMove: this.touchableHandleResponderMove,
      onResponderRelease: this.touchableHandleResponderRelease,
      onResponderTerminate: this.touchableHandleResponderTerminate,
      children: children
    }));
  }
});
module.exports = TouchableWithoutFeedback;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjay5qcyJdLCJuYW1lcyI6WyJEZXByZWNhdGVkRWRnZUluc2V0c1Byb3BUeXBlIiwicmVxdWlyZSIsIlJlYWN0IiwiUHJvcFR5cGVzIiwiVG91Y2hhYmxlIiwiVmlldyIsImNyZWF0ZVJlYWN0Q2xhc3MiLCJlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMiLCJEZXByZWNhdGVkQWNjZXNzaWJpbGl0eVJvbGVzIiwiRGVwcmVjYXRlZEFjY2Vzc2liaWxpdHlTdGF0ZXMiLCJQUkVTU19SRVRFTlRJT05fT0ZGU0VUIiwidG9wIiwibGVmdCIsInJpZ2h0IiwiYm90dG9tIiwiT1ZFUlJJREVfUFJPUFMiLCJUb3VjaGFibGVXaXRob3V0RmVlZGJhY2siLCJkaXNwbGF5TmFtZSIsIm1peGlucyIsIk1peGluIiwicHJvcFR5cGVzIiwiYWNjZXNzaWJsZSIsImJvb2wiLCJhY2Nlc3NpYmlsaXR5TGFiZWwiLCJub2RlIiwiYWNjZXNzaWJpbGl0eUhpbnQiLCJzdHJpbmciLCJhY2Nlc3NpYmlsaXR5SWdub3Jlc0ludmVydENvbG9ycyIsImFjY2Vzc2liaWxpdHlSb2xlIiwib25lT2YiLCJhY2Nlc3NpYmlsaXR5U3RhdGVzIiwiYXJyYXlPZiIsIm9uRm9jdXMiLCJmdW5jIiwib25CbHVyIiwiZGlzYWJsZWQiLCJvblByZXNzIiwib25QcmVzc0luIiwib25QcmVzc091dCIsIm9uTGF5b3V0IiwidG91Y2hTb3VuZERpc2FibGVkIiwib25Mb25nUHJlc3MiLCJuYXRpdmVJRCIsInRlc3RJRCIsImRlbGF5UHJlc3NJbiIsIm51bWJlciIsImRlbGF5UHJlc3NPdXQiLCJkZWxheUxvbmdQcmVzcyIsInByZXNzUmV0ZW50aW9uT2Zmc2V0IiwiaGl0U2xvcCIsImdldEluaXRpYWxTdGF0ZSIsInRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSIsImNvbXBvbmVudERpZE1vdW50IiwicHJvcHMiLCJVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsIm5leHRQcm9wcyIsInRvdWNoYWJsZUhhbmRsZVByZXNzIiwiZSIsInRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW4iLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dCIsInRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyIsInRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCIsInRvdWNoYWJsZUdldEhpdFNsb3AiLCJ0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TIiwidG91Y2hhYmxlR2V0TG9uZ1ByZXNzRGVsYXlNUyIsInRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUyIsInJlbmRlciIsImNoaWxkIiwiQ2hpbGRyZW4iLCJvbmx5IiwiY2hpbGRyZW4iLCJUT1VDSF9UQVJHRVRfREVCVUciLCJ0eXBlIiwidG9BcnJheSIsInB1c2giLCJyZW5kZXJEZWJ1Z1ZpZXciLCJjb2xvciIsIm92ZXJyaWRlcyIsInByb3AiLCJ1bmRlZmluZWQiLCJjbG9uZUVsZW1lbnQiLCJjbGlja2FibGUiLCJvbkNsaWNrIiwib25TdGFydFNob3VsZFNldFJlc3BvbmRlciIsInRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwib25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJvblJlc3BvbmRlckdyYW50IiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQiLCJvblJlc3BvbmRlck1vdmUiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlIiwib25SZXNwb25kZXJSZWxlYXNlIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZSIsIm9uUmVzcG9uZGVyVGVybWluYXRlIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBVUE7Ozs7Ozs7Ozs7QUFFQSxJQUFNQSw0QkFBNEIsR0FBR0MsT0FBTyxDQUFD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LHFDQUFtQztBQUE5QixVQUFNK0QsSUFBSSxzQkFBVjs7QUFDSCxVQUFJLEtBQUt6QixLQUFMLENBQVd5QixJQUFYLE1BQXFCQyxTQUF6QixFQUFvQztBQUNsQ0YsUUFBQUEsU0FBUyxDQUFDQyxJQUFELENBQVQsR0FBa0IsS0FBS3pCLEtBQUwsQ0FBV3lCLElBQVgsQ0FBbEI7QUFDRDtBQUNGOztBQUVELFdBQVE1RSxLQUFELENBQWE4RSxZQUFiLENBQTBCYixLQUExQixvQkFDRlUsU0FERTtBQUVMeEQsTUFBQUEsVUFBVSxFQUFFLEtBQUtnQyxLQUFMLENBQVdoQyxVQUFYLEtBQTBCLEtBRmpDO0FBR0w0RCxNQUFBQSxTQUFTLEVBQ1AsS0FBSzVCLEtBQUwsQ0FBVzRCLFNBQVgsS0FBeUIsS0FBekIsSUFBa0MsS0FBSzVCLEtBQUwsQ0FBV2pCLE9BQVgsS0FBdUIyQyxTQUp0RDtBQUtMRyxNQUFBQSxPQUFPLEVBQUUsS0FBSzFCLG9CQUxUO0FBTUwyQixNQUFBQSx5QkFBeUIsRUFBRSxLQUFLQyxzQ0FOM0I7QUFPTEMsTUFBQUEsNkJBQTZCLEVBQUUsS0FDNUJDLDBDQVJFO0FBU0xDLE1BQUFBLGdCQUFnQixFQUFFLEtBQUtDLDZCQVRsQjtBQVVMQyxNQUFBQSxlQUFlLEVBQUUsS0FBS0MsNEJBVmpCO0FBV0xDLE1BQUFBLGtCQUFrQixFQUFFLEtBQUtDLCtCQVhwQjtBQVlMQyxNQUFBQSxvQkFBb0IsRUFBRSxLQUFLQyxpQ0FadEI7QUFhTHhCLE1BQUFBLFFBQVEsRUFBUkE7QUFiSyxPQUFQO0FBZUQ7QUFuTGlELENBQUQsQ0FBbkQ7QUFzTEF5QixNQUFNLENBQUNDLE9BQVAsR0FBaUJoRix3QkFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBEZXByZWNhdGVkRWRnZUluc2V0c1Byb3BUeXBlID0gcmVxdWlyZSgnLi4vLi4vRGVwcmVjYXRlZFByb3BUeXBlcy9EZXByZWNhdGVkRWRnZUluc2V0c1Byb3BUeXBlJyk7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5jb25zdCBUb3VjaGFibGUgPSByZXF1aXJlKCcuL1RvdWNoYWJsZScpO1xuY29uc3QgVmlldyA9IHJlcXVpcmUoJy4uL1ZpZXcvVmlldycpO1xuXG5jb25zdCBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG5jb25zdCBlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMgPSByZXF1aXJlKCcuL2Vuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcycpO1xuXG5jb25zdCB7XG4gIERlcHJlY2F0ZWRBY2Nlc3NpYmlsaXR5Um9sZXMsXG4gIERlcHJlY2F0ZWRBY2Nlc3NpYmlsaXR5U3RhdGVzLFxufSA9IHJlcXVpcmUoJy4uLy4uL0RlcHJlY2F0ZWRQcm9wVHlwZXMvRGVwcmVjYXRlZFZpZXdBY2Nlc3NpYmlsaXR5Jyk7XG5cbmltcG9ydCB0eXBlIHtcbiAgU3ludGhldGljRXZlbnQsXG4gIExheW91dEV2ZW50LFxuICBQcmVzc0V2ZW50LFxufSBmcm9tICcuLi8uLi9UeXBlcy9Db3JlRXZlbnRUeXBlcyc7XG5pbXBvcnQgdHlwZSB7RWRnZUluc2V0c1Byb3B9IGZyb20gJy4uLy4uL1N0eWxlU2hlZXQvRWRnZUluc2V0c1Byb3BUeXBlJztcbmltcG9ydCB0eXBlIHtcbiAgQWNjZXNzaWJpbGl0eVJvbGUsXG4gIEFjY2Vzc2liaWxpdHlTdGF0ZXMsXG59IGZyb20gJy4uL1ZpZXcvVmlld0FjY2Vzc2liaWxpdHknO1xuXG50eXBlIFRhcmdldEV2ZW50ID0gU3ludGhldGljRXZlbnQ8XG4gICRSZWFkT25seTx7fFxuICAgIHRhcmdldDogbnVtYmVyLFxuICB8fT4sXG4+O1xuXG50eXBlIEJsdXJFdmVudCA9IFRhcmdldEV2ZW50O1xudHlwZSBGb2N1c0V2ZW50ID0gVGFyZ2V0RXZlbnQ7XG5cbmNvbnN0IFBSRVNTX1JFVEVOVElPTl9PRkZTRVQgPSB7dG9wOiAyMCwgbGVmdDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMH07XG5cbmNvbnN0IE9WRVJSSURFX1BST1BTID0gW1xuICAnYWNjZXNzaWJpbGl0eUxhYmVsJyxcbiAgJ2FjY2Vzc2liaWxpdHlIaW50JyxcbiAgJ2FjY2Vzc2liaWxpdHlJZ25vcmVzSW52ZXJ0Q29sb3JzJyxcbiAgJ2FjY2Vzc2liaWxpdHlSb2xlJyxcbiAgJ2FjY2Vzc2liaWxpdHlTdGF0ZXMnLFxuICAnaGl0U2xvcCcsXG4gICduYXRpdmVJRCcsXG4gICdvbkJsdXInLFxuICAnb25Gb2N1cycsXG4gICdvbkxheW91dCcsXG4gICd0ZXN0SUQnLFxuXTtcblxuZXhwb3J0IHR5cGUgUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgYWNjZXNzaWJsZT86ID9ib29sZWFuLFxuICBhY2Nlc3NpYmlsaXR5TGFiZWw/OiA/U3RyaW5naXNoLFxuICBhY2Nlc3NpYmlsaXR5SGludD86ID9TdHJpbmdpc2gsXG4gIGFjY2Vzc2liaWxpdHlJZ25vcmVzSW52ZXJ0Q29sb3JzPzogP2Jvb2xlYW4sXG4gIGFjY2Vzc2liaWxpdHlSb2xlPzogP0FjY2Vzc2liaWxpdHlSb2xlLFxuICBhY2Nlc3NpYmlsaXR5U3RhdGVzPzogP0FjY2Vzc2liaWxpdHlTdGF0ZXMsXG4gIGNoaWxkcmVuPzogP1JlYWN0Lk5vZGUsXG4gIGRlbGF5TG9uZ1ByZXNzPzogP251bWJlcixcbiAgZGVsYXlQcmVzc0luPzogP251bWJlcixcbiAgZGVsYXlQcmVzc091dD86ID9udW1iZXIsXG4gIGRpc2FibGVkPzogP2Jvb2xlYW4sXG4gIGhpdFNsb3A/OiA/RWRnZUluc2V0c1Byb3AsXG4gIG5hdGl2ZUlEPzogP3N0cmluZyxcbiAgdG91Y2hTb3VuZERpc2FibGVkPzogP2Jvb2xlYW4sXG4gIG9uQmx1cj86ID8oZTogQmx1ckV2ZW50KSA9PiB2b2lkLFxuICBvbkZvY3VzPzogPyhlOiBGb2N1c0V2ZW50KSA9PiB2b2lkLFxuICBvbkxheW91dD86ID8oZXZlbnQ6IExheW91dEV2ZW50KSA9PiBtaXhlZCxcbiAgb25Mb25nUHJlc3M/OiA/KGV2ZW50OiBQcmVzc0V2ZW50KSA9PiBtaXhlZCxcbiAgb25QcmVzcz86ID8oZXZlbnQ6IFByZXNzRXZlbnQpID0+IG1peGVkLFxuICBvblByZXNzSW4/OiA/KGV2ZW50OiBQcmVzc0V2ZW50KSA9PiBtaXhlZCxcbiAgb25QcmVzc091dD86ID8oZXZlbnQ6IFByZXNzRXZlbnQpID0+IG1peGVkLFxuICBwcmVzc1JldGVudGlvbk9mZnNldD86ID9FZGdlSW5zZXRzUHJvcCxcbiAgcmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb24/OiA/Ym9vbGVhbixcbiAgdGVzdElEPzogP3N0cmluZyxcbnx9PjtcblxuLyoqXG4gKiBEbyBub3QgdXNlIHVubGVzcyB5b3UgaGF2ZSBhIHZlcnkgZ29vZCByZWFzb24uIEFsbCBlbGVtZW50cyB0aGF0XG4gKiByZXNwb25kIHRvIHByZXNzIHNob3VsZCBoYXZlIGEgdmlzdWFsIGZlZWRiYWNrIHdoZW4gdG91Y2hlZC5cbiAqXG4gKiBUb3VjaGFibGVXaXRob3V0RmVlZGJhY2sgc3VwcG9ydHMgb25seSBvbmUgY2hpbGQuXG4gKiBJZiB5b3Ugd2lzaCB0byBoYXZlIHNldmVyYWwgY2hpbGQgY29tcG9uZW50cywgd3JhcCB0aGVtIGluIGEgVmlldy5cbiAqL1xuY29uc3QgVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrID0gKChjcmVhdGVSZWFjdENsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdUb3VjaGFibGVXaXRob3V0RmVlZGJhY2snLFxuICBtaXhpbnM6IFtUb3VjaGFibGUuTWl4aW5dLFxuXG4gIHByb3BUeXBlczoge1xuICAgIGFjY2Vzc2libGU6IFByb3BUeXBlcy5ib29sLFxuICAgIGFjY2Vzc2liaWxpdHlMYWJlbDogUHJvcFR5cGVzLm5vZGUsXG4gICAgYWNjZXNzaWJpbGl0eUhpbnQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgYWNjZXNzaWJpbGl0eUlnbm9yZXNJbnZlcnRDb2xvcnM6IFByb3BUeXBlcy5ib29sLFxuICAgIGFjY2Vzc2liaWxpdHlSb2xlOiBQcm9wVHlwZXMub25lT2YoRGVwcmVjYXRlZEFjY2Vzc2liaWxpdHlSb2xlcyksXG4gICAgYWNjZXNzaWJpbGl0eVN0YXRlczogUHJvcFR5cGVzLmFycmF5T2YoXG4gICAgICBQcm9wVHlwZXMub25lT2YoRGVwcmVjYXRlZEFjY2Vzc2liaWxpdHlTdGF0ZXMpLFxuICAgICksXG4gICAgLyoqXG4gICAgICogV2hlbiBgYWNjZXNzaWJsZWAgaXMgdHJ1ZSAod2hpY2ggaXMgdGhlIGRlZmF1bHQpIHRoaXMgbWF5IGJlIGNhbGxlZCB3aGVuXG4gICAgICogdGhlIE9TLXNwZWNpZmljIGNvbmNlcHQgb2YgXCJmb2N1c1wiIG9jY3Vycy4gU29tZSBwbGF0Zm9ybXMgbWF5IG5vdCBoYXZlXG4gICAgICogdGhlIGNvbmNlcHQgb2YgZm9jdXMuXG4gICAgICovXG4gICAgb25Gb2N1czogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLyoqXG4gICAgICogV2hlbiBgYWNjZXNzaWJsZWAgaXMgdHJ1ZSAod2hpY2ggaXMgdGhlIGRlZmF1bHQpIHRoaXMgbWF5IGJlIGNhbGxlZCB3aGVuXG4gICAgICogdGhlIE9TLXNwZWNpZmljIGNvbmNlcHQgb2YgXCJibHVyXCIgb2NjdXJzLCBtZWFuaW5nIHRoZSBlbGVtZW50IGxvc3QgZm9jdXMuXG4gICAgICogU29tZSBwbGF0Zm9ybXMgbWF5IG5vdCBoYXZlIHRoZSBjb25jZXB0IG9mIGJsdXIuXG4gICAgICovXG4gICAgb25CbHVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvKipcbiAgICAgKiBJZiB0cnVlLCBkaXNhYmxlIGFsbCBpbnRlcmFjdGlvbnMgZm9yIHRoaXMgY29tcG9uZW50LlxuICAgICAqL1xuICAgIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgdG91Y2ggaXMgcmVsZWFzZWQsIGJ1dCBub3QgaWYgY2FuY2VsbGVkIChlLmcuIGJ5IGEgc2Nyb2xsXG4gICAgICogdGhhdCBzdGVhbHMgdGhlIHJlc3BvbmRlciBsb2NrKS5cbiAgICAgKi9cbiAgICBvblByZXNzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYXMgc29vbiBhcyB0aGUgdG91Y2hhYmxlIGVsZW1lbnQgaXMgcHJlc3NlZCBhbmQgaW52b2tlZCBldmVuIGJlZm9yZSBvblByZXNzLlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuIG1ha2luZyBuZXR3b3JrIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIG9uUHJlc3NJbjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGFzIHNvb24gYXMgdGhlIHRvdWNoIGlzIHJlbGVhc2VkIGV2ZW4gYmVmb3JlIG9uUHJlc3MuXG4gICAgICovXG4gICAgb25QcmVzc091dDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLyoqXG4gICAgICogSW52b2tlZCBvbiBtb3VudCBhbmQgbGF5b3V0IGNoYW5nZXMgd2l0aFxuICAgICAqXG4gICAgICogICBge25hdGl2ZUV2ZW50OiB7bGF5b3V0OiB7eCwgeSwgd2lkdGgsIGhlaWdodH19fWBcbiAgICAgKi9cbiAgICBvbkxheW91dDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgZG9lc24ndCBwbGF5IHN5c3RlbSBzb3VuZCBvbiB0b3VjaCAoQW5kcm9pZCBPbmx5KVxuICAgICAqKi9cbiAgICB0b3VjaFNvdW5kRGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgb25Mb25nUHJlc3M6IFByb3BUeXBlcy5mdW5jLFxuXG4gICAgbmF0aXZlSUQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdGVzdElEOiBQcm9wVHlwZXMuc3RyaW5nLFxuXG4gICAgLyoqXG4gICAgICogRGVsYXkgaW4gbXMsIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSB0b3VjaCwgYmVmb3JlIG9uUHJlc3NJbiBpcyBjYWxsZWQuXG4gICAgICovXG4gICAgZGVsYXlQcmVzc0luOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIC8qKlxuICAgICAqIERlbGF5IGluIG1zLCBmcm9tIHRoZSByZWxlYXNlIG9mIHRoZSB0b3VjaCwgYmVmb3JlIG9uUHJlc3NPdXQgaXMgY2FsbGVkLlxuICAgICAqL1xuICAgIGRlbGF5UHJlc3NPdXQ6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgLyoqXG4gICAgICogRGVsYXkgaW4gbXMsIGZyb20gb25QcmVzc0luLCBiZWZvcmUgb25Mb25nUHJlc3MgaXMgY2FsbGVkLlxuICAgICAqL1xuICAgIGRlbGF5TG9uZ1ByZXNzOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIHNjcm9sbCB2aWV3IGlzIGRpc2FibGVkLCB0aGlzIGRlZmluZXMgaG93IGZhciB5b3VyIHRvdWNoIG1heVxuICAgICAqIG1vdmUgb2ZmIG9mIHRoZSBidXR0b24sIGJlZm9yZSBkZWFjdGl2YXRpbmcgdGhlIGJ1dHRvbi4gT25jZSBkZWFjdGl2YXRlZCxcbiAgICAgKiB0cnkgbW92aW5nIGl0IGJhY2sgYW5kIHlvdSdsbCBzZWUgdGhhdCB0aGUgYnV0dG9uIGlzIG9uY2UgYWdhaW5cbiAgICAgKiByZWFjdGl2YXRlZCEgTW92ZSBpdCBiYWNrIGFuZCBmb3J0aCBzZXZlcmFsIHRpbWVzIHdoaWxlIHRoZSBzY3JvbGwgdmlld1xuICAgICAqIGlzIGRpc2FibGVkLiBFbnN1cmUgeW91IHBhc3MgaW4gYSBjb25zdGFudCB0byByZWR1Y2UgbWVtb3J5IGFsbG9jYXRpb25zLlxuICAgICAqL1xuICAgIHByZXNzUmV0ZW50aW9uT2Zmc2V0OiBEZXByZWNhdGVkRWRnZUluc2V0c1Byb3BUeXBlLFxuICAgIC8qKlxuICAgICAqIFRoaXMgZGVmaW5lcyBob3cgZmFyIHlvdXIgdG91Y2ggY2FuIHN0YXJ0IGF3YXkgZnJvbSB0aGUgYnV0dG9uLiBUaGlzIGlzXG4gICAgICogYWRkZWQgdG8gYHByZXNzUmV0ZW50aW9uT2Zmc2V0YCB3aGVuIG1vdmluZyBvZmYgb2YgdGhlIGJ1dHRvbi5cbiAgICAgKiAqKiBOT1RFICoqXG4gICAgICogVGhlIHRvdWNoIGFyZWEgbmV2ZXIgZXh0ZW5kcyBwYXN0IHRoZSBwYXJlbnQgdmlldyBib3VuZHMgYW5kIHRoZSBaLWluZGV4XG4gICAgICogb2Ygc2libGluZyB2aWV3cyBhbHdheXMgdGFrZXMgcHJlY2VkZW5jZSBpZiBhIHRvdWNoIGhpdHMgdHdvIG92ZXJsYXBwaW5nXG4gICAgICogdmlld3MuXG4gICAgICovXG4gICAgaGl0U2xvcDogRGVwcmVjYXRlZEVkZ2VJbnNldHNQcm9wVHlwZSxcbiAgfSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSgpO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHModGhpcy5wcm9wcyk7XG4gIH0sXG5cbiAgVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uKG5leHRQcm9wczogT2JqZWN0KSB7XG4gICAgZW5zdXJlUG9zaXRpdmVEZWxheVByb3BzKG5leHRQcm9wcyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGBUb3VjaGFibGUuTWl4aW5gIHNlbGYgY2FsbGJhY2tzLiBUaGUgbWl4aW4gd2lsbCBpbnZva2UgdGhlc2UgaWYgdGhleSBhcmVcbiAgICogZGVmaW5lZCBvbiB5b3VyIGNvbXBvbmVudC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVByZXNzOiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy5vblByZXNzICYmIHRoaXMucHJvcHMub25QcmVzcyhlKTtcbiAgfSxcblxuICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luOiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy5vblByZXNzSW4gJiYgdGhpcy5wcm9wcy5vblByZXNzSW4oZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQ6IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICB0aGlzLnByb3BzLm9uUHJlc3NPdXQgJiYgdGhpcy5wcm9wcy5vblByZXNzT3V0KGUpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzczogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25Mb25nUHJlc3MgJiYgdGhpcy5wcm9wcy5vbkxvbmdQcmVzcyhlKTtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQ6IGZ1bmN0aW9uKCk6IHR5cGVvZiBQUkVTU19SRVRFTlRJT05fT0ZGU0VUIHtcbiAgICAvLyAkRmxvd0ZpeE1lIEludmFsaWQgcHJvcCB1c2FnZVxuICAgIHJldHVybiB0aGlzLnByb3BzLnByZXNzUmV0ZW50aW9uT2Zmc2V0IHx8IFBSRVNTX1JFVEVOVElPTl9PRkZTRVQ7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0SGl0U2xvcDogZnVuY3Rpb24oKTogP09iamVjdCB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuaGl0U2xvcDtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TOiBmdW5jdGlvbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRlbGF5UHJlc3NJbiB8fCAwO1xuICB9LFxuXG4gIHRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVM6IGZ1bmN0aW9uKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZGVsYXlMb25nUHJlc3MgPT09IDBcbiAgICAgID8gMFxuICAgICAgOiB0aGlzLnByb3BzLmRlbGF5TG9uZ1ByZXNzIHx8IDUwMDtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVM6IGZ1bmN0aW9uKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZGVsYXlQcmVzc091dCB8fCAwO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKTogUmVhY3QuRWxlbWVudDxhbnk+IHtcbiAgICAvLyBOb3RlKGF2aWspOiByZW1vdmUgZHluYW1pYyB0eXBlY2FzdCBvbmNlIEZsb3cgaGFzIGJlZW4gdXBncmFkZWRcbiAgICAvLyAkRmxvd0ZpeE1lKD49MC40MS4wKVxuICAgIGNvbnN0IGNoaWxkID0gUmVhY3QuQ2hpbGRyZW4ub25seSh0aGlzLnByb3BzLmNoaWxkcmVuKTtcbiAgICBsZXQgY2hpbGRyZW4gPSBjaGlsZC5wcm9wcy5jaGlsZHJlbjtcbiAgICBpZiAoVG91Y2hhYmxlLlRPVUNIX1RBUkdFVF9ERUJVRyAmJiBjaGlsZC50eXBlID09PSBWaWV3KSB7XG4gICAgICBjaGlsZHJlbiA9IFJlYWN0LkNoaWxkcmVuLnRvQXJyYXkoY2hpbGRyZW4pO1xuICAgICAgY2hpbGRyZW4ucHVzaChcbiAgICAgICAgVG91Y2hhYmxlLnJlbmRlckRlYnVnVmlldyh7Y29sb3I6ICdyZWQnLCBoaXRTbG9wOiB0aGlzLnByb3BzLmhpdFNsb3B9KSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3ZlcnJpZGVzID0ge307XG4gICAgZm9yIChjb25zdCBwcm9wIG9mIE9WRVJSSURFX1BST1BTKSB7XG4gICAgICBpZiAodGhpcy5wcm9wc1twcm9wXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG92ZXJyaWRlc1twcm9wXSA9IHRoaXMucHJvcHNbcHJvcF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIChSZWFjdDogYW55KS5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcbiAgICAgIC4uLm92ZXJyaWRlcyxcbiAgICAgIGFjY2Vzc2libGU6IHRoaXMucHJvcHMuYWNjZXNzaWJsZSAhPT0gZmFsc2UsXG4gICAgICBjbGlja2FibGU6XG4gICAgICAgIHRoaXMucHJvcHMuY2xpY2thYmxlICE9PSBmYWxzZSAmJiB0aGlzLnByb3BzLm9uUHJlc3MgIT09IHVuZGVmaW5lZCxcbiAgICAgIG9uQ2xpY2s6IHRoaXMudG91Y2hhYmxlSGFuZGxlUHJlc3MsXG4gICAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyOiB0aGlzLnRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyLFxuICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3Q6IHRoaXNcbiAgICAgICAgLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCxcbiAgICAgIG9uUmVzcG9uZGVyR3JhbnQ6IHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQsXG4gICAgICBvblJlc3BvbmRlck1vdmU6IHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZSxcbiAgICAgIG9uUmVzcG9uZGVyUmVsZWFzZTogdGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlLFxuICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGU6IHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlLFxuICAgICAgY2hpbGRyZW4sXG4gICAgfSk7XG4gIH0sXG59KTogYW55KTogUmVhY3QuQ29tcG9uZW50VHlwZTxQcm9wcz4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjaztcbiJdfQ==