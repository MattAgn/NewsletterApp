264af525d3881db707bbe3b19788b815
var Stack = require('./_Stack'),
    arrayEach = require('./_arrayEach'),
    assignValue = require('./_assignValue'),
    baseAssign = require('./_baseAssign'),
    baseAssignIn = require('./_baseAssignIn'),
    cloneBuffer = require('./_cloneBuffer'),
    copyArray = require('./_copyArray'),
    copySymbols = require('./_copySymbols'),
    copySymbolsIn = require('./_copySymbolsIn'),
    getAllKeys = require('./_getAllKeys'),
    getAllKeysIn = require('./_getAllKeysIn'),
    getTag = require('./_getTag'),
    initCloneArray = require('./_initCloneArray'),
    initCloneByTag = require('./_initCloneByTag'),
    initCloneObject = require('./_initCloneObject'),
    isArray = require('./isArray'),
    isBuffer = require('./isBuffer'),
    isMap = require('./isMap'),
    isObject = require('./isObject'),
    isSet = require('./isSet'),
    keys = require('./keys');

var CLONE_DEEP_FLAG = 1,
    CLONE_FLAT_FLAG = 2,
    CLONE_SYMBOLS_FLAG = 4;
var argsTag = '[object Arguments]',
    arrayTag = '[object Array]',
    boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    funcTag = '[object Function]',
    genTag = '[object GeneratorFunction]',
    mapTag = '[object Map]',
    numberTag = '[object Number]',
    objectTag = '[object Object]',
    regexpTag = '[object RegExp]',
    setTag = '[object Set]',
    stringTag = '[object String]',
    symbolTag = '[object Symbol]',
    weakMapTag = '[object WeakMap]';
var arrayBufferTag = '[object ArrayBuffer]',
    dataViewTag = '[object DataView]',
    float32Tag = '[object Float32Array]',
    float64Tag = '[object Float64Array]',
    int8Tag = '[object Int8Array]',
    int16Tag = '[object Int16Array]',
    int32Tag = '[object Int32Array]',
    uint8Tag = '[object Uint8Array]',
    uint8ClampedTag = '[object Uint8ClampedArray]',
    uint16Tag = '[object Uint16Array]',
    uint32Tag = '[object Uint32Array]';
var cloneableTags = {};
cloneableTags[argsTag] = cloneableTags[arrayTag] = cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] = cloneableTags[boolTag] = cloneableTags[dateTag] = cloneableTags[float32Tag] = cloneableTags[float64Tag] = cloneableTags[int8Tag] = cloneableTags[int16Tag] = cloneableTags[int32Tag] = cloneableTags[mapTag] = cloneableTags[numberTag] = cloneableTags[objectTag] = cloneableTags[regexpTag] = cloneableTags[setTag] = cloneableTags[stringTag] = cloneableTags[symbolTag] = cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;
cloneableTags[errorTag] = cloneableTags[funcTag] = cloneableTags[weakMapTag] = false;

function baseClone(value, bitmask, customizer, key, object, stack) {
  var result,
      isDeep = bitmask & CLONE_DEEP_FLAG,
      isFlat = bitmask & CLONE_FLAT_FLAG,
      isFull = bitmask & CLONE_SYMBOLS_FLAG;

  if (customizer) {
    result = object ? customizer(value, key, object, stack) : customizer(value);
  }

  if (result !== undefined) {
    return result;
  }

  if (!isObject(value)) {
    return value;
  }

  var isArr = isArray(value);

  if (isArr) {
    result = initCloneArray(value);

    if (!isDeep) {
      return copyArray(value, result);
    }
  } else {
    var tag = getTag(value),
        isFunc = tag == funcTag || tag == genTag;

    if (isBuffer(value)) {
      return cloneBuffer(value, isDeep);
    }

    if (tag == objectTag || tag == argsTag || isFunc && !object) {
      result = isFlat || isFunc ? {} : initCloneObject(value);

      if (!isDeep) {
        return isFlat ? copySymbolsIn(value, baseAssignIn(result, value)) : copySymbols(value, baseAssign(result, value));
      }
    } else {
      if (!cloneableTags[tag]) {
        return object ? value : {};
      }

      result = initCloneByTag(value, tag, isDeep);
    }
  }

  stack || (stack = new Stack());
  var stacked = stack.get(value);

  if (stacked) {
    return stacked;
  }

  stack.set(value, result);

  if (isSet(value)) {
    value.forEach(function (subValue) {
      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));
    });
  } else if (isMap(value)) {
    value.forEach(function (subValue, key) {
      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));
    });
  }

  var keysFunc = isFull ? isFlat ? getAllKeysIn : getAllKeys : isFlat ? keysIn : keys;
  var props = isArr ? undefined : keysFunc(value);
  arrayEach(props || value, function (subValue, key) {
    if (props) {
      key = subValue;
      subValue = value[key];
    }

    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));
  });
  return result;
}

module.exports = baseClone;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9iYXNlQ2xvbmUuanMiXSwibmFtZXMiOlsiU3RhY2siLCJyZXF1aXJlIiwiYXJyYXlFYWNoIiwiYXNzaWduVmFsdWUiLCJiYXNlQXNzaWduIiwiYmFzZUFzc2lnbkluIiwiY2xvbmVCdWZmZXIiLCJjb3B5QXJyYXkiLCJjb3B5U3ltYm9scyIsImNvcHlTeW1ib2xzSW4iLCJnZXRBbGxLZXlzIiwiZ2V0QWxsS2V5c0luIiwiZ2V0VGFnIiwiaW5pdENsb25lQXJyYXkiLCJpbml0Q2xvbmVCeVRhZyIsImluaXRDbG9uZU9iamVjdCIsImlzQXJyYXkiLCJpc0J1ZmZlciIsImlzTWFwIiwiaXNPYmplY3QiLCJpc1NldCIsImtleXMiLCJDTE9ORV9ERUVQX0ZMQUciLCJDTE9ORV9GTEFUX0ZMQUciLCJDTE9ORV9TWU1CT0xTX0ZMQUciLCJhcmdzVGFnIiwiYXJyYXlUYWciLCJib29sVGFnIiwiZGF0ZVRhZyIsImVycm9yVGFnIiwiZnVuY1RhZyIsImdlblRhZyIsIm1hcFRhZyIsIm51bWJlclRhZyIsIm9iamVjdFRhZyIsInJlZ2V4cFRhZyIsInNldFRhZyIsInN0cmluZ1RhZyIsInN5bWJvbFRhZyIsIndlYWtNYXBUYWciLCJhcnJheUJ1ZmZlclRhZyIsImRhdGFWaWV3VGFnIiwiZmxvYXQzMlRhZyIsImZsb2F0NjRUYWciLCJpbnQ4VGFnIiwiaW50MTZUYWciLCJpbnQzMlRhZyIsInVpbnQ4VGFnIiwidWludDhDbGFtcGVkVGFnIiwidWludDE2VGFnIiwidWludDMyVGFnIiwiY2xvbmVhYmxlVGFncyIsImJhc2VDbG9uZSIsInZhbHVlIiwiYml0bWFzayIsImN1c3RvbWl6ZXIiLCJrZXkiLCJvYmplY3QiLCJzdGFjayIsInJlc3VsdCIsImlzRGVlcCIsImlzRmxhdCIsImlzRnVsbCIsInVuZGVmaW5lZCIsImlzQXJyIiwidGFnIiwiaXNGdW5jIiwic3RhY2tlZCIsImdldCIsInNldCIsImZvckVhY2giLCJzdWJWYWx1ZSIsImFkZCIsImtleXNGdW5jIiwia2V5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QjtBQUN2QkEsSUFBQUEsS0FBSyxDQUFDaUIsT0FBTixDQUFjLFVBQVNDLFFBQVQsRUFBbUJmLEdBQW5CLEVBQXdCO0FBQ3BDRyxNQUFBQSxNQUFNLENBQUNVLEdBQVAsQ0FBV2IsR0FBWCxFQUFnQkosU0FBUyxDQUFDbUIsUUFBRCxFQUFXakIsT0FBWCxFQUFvQkMsVUFBcEIsRUFBZ0NDLEdBQWhDLEVBQXFDSCxLQUFyQyxFQUE0Q0ssS0FBNUMsQ0FBekI7QUFDRCxLQUZEO0FBR0Q7O0FBRUQsTUFBSWUsUUFBUSxHQUFHWCxNQUFNLEdBQ2hCRCxNQUFNLEdBQUdsRCxZQUFILEdBQWtCRCxVQURSLEdBRWhCbUQsTUFBTSxHQUFHYSxNQUFILEdBQVlyRCxJQUZ2QjtBQUlBLE1BQUlzRCxLQUFLLEdBQUdYLEtBQUssR0FBR0QsU0FBSCxHQUFlVSxRQUFRLENBQUNwQixLQUFELENBQXhDO0FBQ0FuRCxFQUFBQSxTQUFTLENBQUN5RSxLQUFLLElBQUl0QixLQUFWLEVBQWlCLFVBQVNrQixRQUFULEVBQW1CZixHQUFuQixFQUF3QjtBQUNoRCxRQUFJbUIsS0FBSixFQUFXO0FBQ1RuQixNQUFBQSxHQUFHLEdBQUdlLFFBQU47QUFDQUEsTUFBQUEsUUFBUSxHQUFHbEIsS0FBSyxDQUFDRyxHQUFELENBQWhCO0FBQ0Q7O0FBRURyRCxJQUFBQSxXQUFXLENBQUN3RCxNQUFELEVBQVNILEdBQVQsRUFBY0osU0FBUyxDQUFDbUIsUUFBRCxFQUFXakIsT0FBWCxFQUFvQkMsVUFBcEIsRUFBZ0NDLEdBQWhDLEVBQXFDSCxLQUFyQyxFQUE0Q0ssS0FBNUMsQ0FBdkIsQ0FBWDtBQUNELEdBUFEsQ0FBVDtBQVFBLFNBQU9DLE1BQVA7QUFDRDs7QUFFRGlCLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnpCLFNBQWpCIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFN0YWNrID0gcmVxdWlyZSgnLi9fU3RhY2snKSxcbiAgICBhcnJheUVhY2ggPSByZXF1aXJlKCcuL19hcnJheUVhY2gnKSxcbiAgICBhc3NpZ25WYWx1ZSA9IHJlcXVpcmUoJy4vX2Fzc2lnblZhbHVlJyksXG4gICAgYmFzZUFzc2lnbiA9IHJlcXVpcmUoJy4vX2Jhc2VBc3NpZ24nKSxcbiAgICBiYXNlQXNzaWduSW4gPSByZXF1aXJlKCcuL19iYXNlQXNzaWduSW4nKSxcbiAgICBjbG9uZUJ1ZmZlciA9IHJlcXVpcmUoJy4vX2Nsb25lQnVmZmVyJyksXG4gICAgY29weUFycmF5ID0gcmVxdWlyZSgnLi9fY29weUFycmF5JyksXG4gICAgY29weVN5bWJvbHMgPSByZXF1aXJlKCcuL19jb3B5U3ltYm9scycpLFxuICAgIGNvcHlTeW1ib2xzSW4gPSByZXF1aXJlKCcuL19jb3B5U3ltYm9sc0luJyksXG4gICAgZ2V0QWxsS2V5cyA9IHJlcXVpcmUoJy4vX2dldEFsbEtleXMnKSxcbiAgICBnZXRBbGxLZXlzSW4gPSByZXF1aXJlKCcuL19nZXRBbGxLZXlzSW4nKSxcbiAgICBnZXRUYWcgPSByZXF1aXJlKCcuL19nZXRUYWcnKSxcbiAgICBpbml0Q2xvbmVBcnJheSA9IHJlcXVpcmUoJy4vX2luaXRDbG9uZUFycmF5JyksXG4gICAgaW5pdENsb25lQnlUYWcgPSByZXF1aXJlKCcuL19pbml0Q2xvbmVCeVRhZycpLFxuICAgIGluaXRDbG9uZU9iamVjdCA9IHJlcXVpcmUoJy4vX2luaXRDbG9uZU9iamVjdCcpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBpc0J1ZmZlciA9IHJlcXVpcmUoJy4vaXNCdWZmZXInKSxcbiAgICBpc01hcCA9IHJlcXVpcmUoJy4vaXNNYXAnKSxcbiAgICBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKSxcbiAgICBpc1NldCA9IHJlcXVpcmUoJy4vaXNTZXQnKSxcbiAgICBrZXlzID0gcmVxdWlyZSgnLi9rZXlzJyk7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNsb25pbmcuICovXG52YXIgQ0xPTkVfREVFUF9GTEFHID0gMSxcbiAgICBDTE9ORV9GTEFUX0ZMQUcgPSAyLFxuICAgIENMT05FX1NZTUJPTFNfRkxBRyA9IDQ7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJyxcbiAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJyxcbiAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuICAgIGludDhUYWcgPSAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICB1aW50OFRhZyA9ICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgdWludDMyVGFnID0gJ1tvYmplY3QgVWludDMyQXJyYXldJztcblxuLyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgc3VwcG9ydGVkIGJ5IGBfLmNsb25lYC4gKi9cbnZhciBjbG9uZWFibGVUYWdzID0ge307XG5jbG9uZWFibGVUYWdzW2FyZ3NUYWddID0gY2xvbmVhYmxlVGFnc1thcnJheVRhZ10gPVxuY2xvbmVhYmxlVGFnc1thcnJheUJ1ZmZlclRhZ10gPSBjbG9uZWFibGVUYWdzW2RhdGFWaWV3VGFnXSA9XG5jbG9uZWFibGVUYWdzW2Jvb2xUYWddID0gY2xvbmVhYmxlVGFnc1tkYXRlVGFnXSA9XG5jbG9uZWFibGVUYWdzW2Zsb2F0MzJUYWddID0gY2xvbmVhYmxlVGFnc1tmbG9hdDY0VGFnXSA9XG5jbG9uZWFibGVUYWdzW2ludDhUYWddID0gY2xvbmVhYmxlVGFnc1tpbnQxNlRhZ10gPVxuY2xvbmVhYmxlVGFnc1tpbnQzMlRhZ10gPSBjbG9uZWFibGVUYWdzW21hcFRhZ10gPVxuY2xvbmVhYmxlVGFnc1tudW1iZXJUYWddID0gY2xvbmVhYmxlVGFnc1tvYmplY3RUYWddID1cbmNsb25lYWJsZVRhZ3NbcmVnZXhwVGFnXSA9IGNsb25lYWJsZVRhZ3Nbc2V0VGFnXSA9XG5jbG9uZWFibGVUYWdzW3N0cmluZ1RhZ10gPSBjbG9uZWFibGVUYWdzW3N5bWJvbFRhZ10gPVxuY2xvbmVhYmxlVGFnc1t1aW50OFRhZ10gPSBjbG9uZWFibGVUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPVxuY2xvbmVhYmxlVGFnc1t1aW50MTZUYWddID0gY2xvbmVhYmxlVGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcbmNsb25lYWJsZVRhZ3NbZXJyb3JUYWddID0gY2xvbmVhYmxlVGFnc1tmdW5jVGFnXSA9XG5jbG9uZWFibGVUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY2xvbmVgIGFuZCBgXy5jbG9uZURlZXBgIHdoaWNoIHRyYWNrc1xuICogdHJhdmVyc2VkIG9iamVjdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNsb25lLlxuICogQHBhcmFtIHtib29sZWFufSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLlxuICogIDEgLSBEZWVwIGNsb25lXG4gKiAgMiAtIEZsYXR0ZW4gaW5oZXJpdGVkIHByb3BlcnRpZXNcbiAqICA0IC0gQ2xvbmUgc3ltYm9sc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY2xvbmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBba2V5XSBUaGUga2V5IG9mIGB2YWx1ZWAuXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIHBhcmVudCBvYmplY3Qgb2YgYHZhbHVlYC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBhbmQgdGhlaXIgY2xvbmUgY291bnRlcnBhcnRzLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGNsb25lZCB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gYmFzZUNsb25lKHZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBrZXksIG9iamVjdCwgc3RhY2spIHtcbiAgdmFyIHJlc3VsdCxcbiAgICAgIGlzRGVlcCA9IGJpdG1hc2sgJiBDTE9ORV9ERUVQX0ZMQUcsXG4gICAgICBpc0ZsYXQgPSBiaXRtYXNrICYgQ0xPTkVfRkxBVF9GTEFHLFxuICAgICAgaXNGdWxsID0gYml0bWFzayAmIENMT05FX1NZTUJPTFNfRkxBRztcblxuICBpZiAoY3VzdG9taXplcikge1xuICAgIHJlc3VsdCA9IG9iamVjdCA/IGN1c3RvbWl6ZXIodmFsdWUsIGtleSwgb2JqZWN0LCBzdGFjaykgOiBjdXN0b21pemVyKHZhbHVlKTtcbiAgfVxuICBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGlmICghaXNPYmplY3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHZhciBpc0FyciA9IGlzQXJyYXkodmFsdWUpO1xuICBpZiAoaXNBcnIpIHtcbiAgICByZXN1bHQgPSBpbml0Q2xvbmVBcnJheSh2YWx1ZSk7XG4gICAgaWYgKCFpc0RlZXApIHtcbiAgICAgIHJldHVybiBjb3B5QXJyYXkodmFsdWUsIHJlc3VsdCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciB0YWcgPSBnZXRUYWcodmFsdWUpLFxuICAgICAgICBpc0Z1bmMgPSB0YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnO1xuXG4gICAgaWYgKGlzQnVmZmVyKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGNsb25lQnVmZmVyKHZhbHVlLCBpc0RlZXApO1xuICAgIH1cbiAgICBpZiAodGFnID09IG9iamVjdFRhZyB8fCB0YWcgPT0gYXJnc1RhZyB8fCAoaXNGdW5jICYmICFvYmplY3QpKSB7XG4gICAgICByZXN1bHQgPSAoaXNGbGF0IHx8IGlzRnVuYykgPyB7fSA6IGluaXRDbG9uZU9iamVjdCh2YWx1ZSk7XG4gICAgICBpZiAoIWlzRGVlcCkge1xuICAgICAgICByZXR1cm4gaXNGbGF0XG4gICAgICAgICAgPyBjb3B5U3ltYm9sc0luKHZhbHVlLCBiYXNlQXNzaWduSW4ocmVzdWx0LCB2YWx1ZSkpXG4gICAgICAgICAgOiBjb3B5U3ltYm9scyh2YWx1ZSwgYmFzZUFzc2lnbihyZXN1bHQsIHZhbHVlKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghY2xvbmVhYmxlVGFnc1t0YWddKSB7XG4gICAgICAgIHJldHVybiBvYmplY3QgPyB2YWx1ZSA6IHt9O1xuICAgICAgfVxuICAgICAgcmVzdWx0ID0gaW5pdENsb25lQnlUYWcodmFsdWUsIHRhZywgaXNEZWVwKTtcbiAgICB9XG4gIH1cbiAgLy8gQ2hlY2sgZm9yIGNpcmN1bGFyIHJlZmVyZW5jZXMgYW5kIHJldHVybiBpdHMgY29ycmVzcG9uZGluZyBjbG9uZS5cbiAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQodmFsdWUpO1xuICBpZiAoc3RhY2tlZCkge1xuICAgIHJldHVybiBzdGFja2VkO1xuICB9XG4gIHN0YWNrLnNldCh2YWx1ZSwgcmVzdWx0KTtcblxuICBpZiAoaXNTZXQodmFsdWUpKSB7XG4gICAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbihzdWJWYWx1ZSkge1xuICAgICAgcmVzdWx0LmFkZChiYXNlQ2xvbmUoc3ViVmFsdWUsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN1YlZhbHVlLCB2YWx1ZSwgc3RhY2spKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChpc01hcCh2YWx1ZSkpIHtcbiAgICB2YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uKHN1YlZhbHVlLCBrZXkpIHtcbiAgICAgIHJlc3VsdC5zZXQoa2V5LCBiYXNlQ2xvbmUoc3ViVmFsdWUsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGtleSwgdmFsdWUsIHN0YWNrKSk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIga2V5c0Z1bmMgPSBpc0Z1bGxcbiAgICA/IChpc0ZsYXQgPyBnZXRBbGxLZXlzSW4gOiBnZXRBbGxLZXlzKVxuICAgIDogKGlzRmxhdCA/IGtleXNJbiA6IGtleXMpO1xuXG4gIHZhciBwcm9wcyA9IGlzQXJyID8gdW5kZWZpbmVkIDoga2V5c0Z1bmModmFsdWUpO1xuICBhcnJheUVhY2gocHJvcHMgfHwgdmFsdWUsIGZ1bmN0aW9uKHN1YlZhbHVlLCBrZXkpIHtcbiAgICBpZiAocHJvcHMpIHtcbiAgICAgIGtleSA9IHN1YlZhbHVlO1xuICAgICAgc3ViVmFsdWUgPSB2YWx1ZVtrZXldO1xuICAgIH1cbiAgICAvLyBSZWN1cnNpdmVseSBwb3B1bGF0ZSBjbG9uZSAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIGFzc2lnblZhbHVlKHJlc3VsdCwga2V5LCBiYXNlQ2xvbmUoc3ViVmFsdWUsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGtleSwgdmFsdWUsIHN0YWNrKSk7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VDbG9uZTtcbiJdfQ==