59487460b2979d28d2224ab69ecb3074
'use strict';

var Platform = require('../../Utilities/Platform');

var TVNavigationEventEmitter = require('../../BatchedBridge/NativeModules').TVNavigationEventEmitter;

var NativeEventEmitter = require('../../EventEmitter/NativeEventEmitter');

function TVEventHandler() {
  this.__nativeTVNavigationEventListener = null;
  this.__nativeTVNavigationEventEmitter = null;
}

TVEventHandler.prototype.enable = function (component, callback) {
  if (Platform.OS === 'ios' && !TVNavigationEventEmitter) {
    return;
  }

  this.__nativeTVNavigationEventEmitter = new NativeEventEmitter(TVNavigationEventEmitter);
  this.__nativeTVNavigationEventListener = this.__nativeTVNavigationEventEmitter.addListener('onHWKeyEvent', function (data) {
    if (callback) {
      callback(component, data);
    }
  });
};

TVEventHandler.prototype.disable = function () {
  if (this.__nativeTVNavigationEventListener) {
    this.__nativeTVNavigationEventListener.remove();

    delete this.__nativeTVNavigationEventListener;
  }

  if (this.__nativeTVNavigationEventEmitter) {
    delete this.__nativeTVNavigationEventEmitter;
  }
};

module.exports = TVEventHandler;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRWRXZlbnRIYW5kbGVyLmpzIl0sIm5hbWVzIjpbIlBsYXRmb3JtIiwicmVxdWlyZSIsIlRWTmF2aWdhdGlvbkV2ZW50RW1pdHRlciIsIk5hdGl2ZUV2ZW50RW1pdHRlciIsIlRWRXZlbnRIYW5kbGVyIiwiX19uYXRpdmVUVk5hdmlnYXRpb25FdmVudExpc3RlbmVyIiwiX19uYXRpdmVUVk5hdmlnYXRpb25FdmVudEVtaXR0ZXIiLCJwcm90b3R5cGUiLCJlbmFibGUiLCJjb21wb25lbnQiLCJjYWxsYmFjayIsIk9TIiwiYWRkTGlzdGVuZXIiLCJkYXRhIiwiZGlzYWJsZSIsInJlbW92ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVBOztBQUVBLElBQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLDBCQUFELENBQXhCOztBQUNBLElBQU1DLHdCQUF3QixHQUFHRCxPQUFPLENBQUMsbUNBQUQsQ0FBUCxDQUM5QkMsd0JBREg7O0FBRUEsSUFBTUMsa0JBQWtCLEdBQUdGLE9BQU8sQ0FBQyx1Q0FBRCxDQUFsQzs7QUFFQSxTQUFTRyxjQUFULEdBQTBCO0FBQ3hCLE9BQUtDLGlDQUFMLEdBQXlDLElBQXpDO0FBQ0EsT0FBS0MsZ0NBQUwsR0FBd0MsSUFBeEM7QUFDRDs7QUFFREYsY0FBYyxDQUFDRyxTQUFmLENBQXlCQyxNQUF6QixHQUFrQyxVQUNoQ0MsU0FEZ0MsRUFFaENDLFFBRmdDLEVBR2hDO0FBQ0EsTUFBSVYsUUFBUSxDQUFDVyxFQUFULEtBQWdCLEtBQWhCLElBQXlCLENBQUNULHdCQUE5QixFQUF3RDtBQUN0RDtBQUNEOztBQUVELE9BQUtJLGdDQUFMLEdBQXdDLElBQUlILGtCQUFKLENBQ3RDRCx3QkFEc0MsQ0FBeEM7QUFHQSxPQUFLRyxpQ0FBTCxHQUF5QyxLQUFLQyxnQ0FBTCxDQUFzQ00sV0FBdEMsQ0FDdkMsY0FEdUMsRUFFdkMsVUFBQUMsSUFBSSxFQUFJO0FBQ04sUUFBSUgsUUFBSixFQUFjO0FBQ1pBLE1BQUFBLFFBQVEsQ0FBQ0QsU0FBRCxFQUFZSSxJQUFaLENBQVI7QUFDRDtBQUNGLEdBTnNDLENBQXpDO0FBUUQsQ0FuQkQ7O0FBcUJBVCxjQUFjLENBQUNHLFNBQWYsQ0FBeUJPLE9BQXpCLEdBQW1DLFlBQVc7QUFDNUMsTUFBSSxLQUFLVCxpQ0FBVCxFQUE0QztBQUMxQyxTQUFLQSxpQ0FBTCxDQUF1Q1UsTUFBdkM7O0FBQ0EsV0FBTyxLQUFLVixpQ0FBWjtBQUNEOztBQUNELE1BQUksS0FBS0MsZ0NBQVQsRUFBMkM7QUFDekMsV0FBTyxLQUFLQSxnQ0FBWjtBQUNEO0FBQ0YsQ0FSRDs7QUFVQVUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCYixjQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdFxuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IFBsYXRmb3JtID0gcmVxdWlyZSgnLi4vLi4vVXRpbGl0aWVzL1BsYXRmb3JtJyk7XG5jb25zdCBUVk5hdmlnYXRpb25FdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuLi8uLi9CYXRjaGVkQnJpZGdlL05hdGl2ZU1vZHVsZXMnKVxuICAuVFZOYXZpZ2F0aW9uRXZlbnRFbWl0dGVyO1xuY29uc3QgTmF0aXZlRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnLi4vLi4vRXZlbnRFbWl0dGVyL05hdGl2ZUV2ZW50RW1pdHRlcicpO1xuXG5mdW5jdGlvbiBUVkV2ZW50SGFuZGxlcigpIHtcbiAgdGhpcy5fX25hdGl2ZVRWTmF2aWdhdGlvbkV2ZW50TGlzdGVuZXIgPSBudWxsO1xuICB0aGlzLl9fbmF0aXZlVFZOYXZpZ2F0aW9uRXZlbnRFbWl0dGVyID0gbnVsbDtcbn1cblxuVFZFdmVudEhhbmRsZXIucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uKFxuICBjb21wb25lbnQ6ID9hbnksXG4gIGNhbGxiYWNrOiBGdW5jdGlvbixcbikge1xuICBpZiAoUGxhdGZvcm0uT1MgPT09ICdpb3MnICYmICFUVk5hdmlnYXRpb25FdmVudEVtaXR0ZXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLl9fbmF0aXZlVFZOYXZpZ2F0aW9uRXZlbnRFbWl0dGVyID0gbmV3IE5hdGl2ZUV2ZW50RW1pdHRlcihcbiAgICBUVk5hdmlnYXRpb25FdmVudEVtaXR0ZXIsXG4gICk7XG4gIHRoaXMuX19uYXRpdmVUVk5hdmlnYXRpb25FdmVudExpc3RlbmVyID0gdGhpcy5fX25hdGl2ZVRWTmF2aWdhdGlvbkV2ZW50RW1pdHRlci5hZGRMaXN0ZW5lcihcbiAgICAnb25IV0tleUV2ZW50JyxcbiAgICBkYXRhID0+IHtcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjayhjb21wb25lbnQsIGRhdGEpO1xuICAgICAgfVxuICAgIH0sXG4gICk7XG59O1xuXG5UVkV2ZW50SGFuZGxlci5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5fX25hdGl2ZVRWTmF2aWdhdGlvbkV2ZW50TGlzdGVuZXIpIHtcbiAgICB0aGlzLl9fbmF0aXZlVFZOYXZpZ2F0aW9uRXZlbnRMaXN0ZW5lci5yZW1vdmUoKTtcbiAgICBkZWxldGUgdGhpcy5fX25hdGl2ZVRWTmF2aWdhdGlvbkV2ZW50TGlzdGVuZXI7XG4gIH1cbiAgaWYgKHRoaXMuX19uYXRpdmVUVk5hdmlnYXRpb25FdmVudEVtaXR0ZXIpIHtcbiAgICBkZWxldGUgdGhpcy5fX25hdGl2ZVRWTmF2aWdhdGlvbkV2ZW50RW1pdHRlcjtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBUVkV2ZW50SGFuZGxlcjtcbiJdfQ==