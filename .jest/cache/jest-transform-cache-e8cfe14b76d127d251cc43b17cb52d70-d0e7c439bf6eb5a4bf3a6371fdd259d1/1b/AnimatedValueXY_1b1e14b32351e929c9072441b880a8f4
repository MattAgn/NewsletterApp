d26222cf8b49cf398c5fbe29a360cffa
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var AnimatedValue = require('./AnimatedValue');

var AnimatedWithChildren = require('./AnimatedWithChildren');

var invariant = require('invariant');

var _uniqueId = 1;

var AnimatedValueXY = function (_AnimatedWithChildren) {
  (0, _inherits2.default)(AnimatedValueXY, _AnimatedWithChildren);

  function AnimatedValueXY(valueIn) {
    var _this;

    (0, _classCallCheck2.default)(this, AnimatedValueXY);
    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(AnimatedValueXY).call(this));
    var value = valueIn || {
      x: 0,
      y: 0
    };

    if (typeof value.x === 'number' && typeof value.y === 'number') {
      _this.x = new AnimatedValue(value.x);
      _this.y = new AnimatedValue(value.y);
    } else {
      invariant(value.x instanceof AnimatedValue && value.y instanceof AnimatedValue, 'AnimatedValueXY must be initialized with an object of numbers or ' + 'AnimatedValues.');
      _this.x = value.x;
      _this.y = value.y;
    }

    _this._listeners = {};
    return _this;
  }

  (0, _createClass2.default)(AnimatedValueXY, [{
    key: "setValue",
    value: function setValue(value) {
      this.x.setValue(value.x);
      this.y.setValue(value.y);
    }
  }, {
    key: "setOffset",
    value: function setOffset(offset) {
      this.x.setOffset(offset.x);
      this.y.setOffset(offset.y);
    }
  }, {
    key: "flattenOffset",
    value: function flattenOffset() {
      this.x.flattenOffset();
      this.y.flattenOffset();
    }
  }, {
    key: "extractOffset",
    value: function extractOffset() {
      this.x.extractOffset();
      this.y.extractOffset();
    }
  }, {
    key: "__getValue",
    value: function __getValue() {
      return {
        x: this.x.__getValue(),
        y: this.y.__getValue()
      };
    }
  }, {
    key: "resetAnimation",
    value: function resetAnimation(callback) {
      this.x.resetAnimation();
      this.y.resetAnimation();
      callback && callback(this.__getValue());
    }
  }, {
    key: "stopAnimation",
    value: function stopAnimation(callback) {
      this.x.stopAnimation();
      this.y.stopAnimation();
      callback && callback(this.__getValue());
    }
  }, {
    key: "addListener",
    value: function addListener(callback) {
      var _this2 = this;

      var id = String(_uniqueId++);

      var jointCallback = function jointCallback(_ref) {
        var number = _ref.value;
        callback(_this2.__getValue());
      };

      this._listeners[id] = {
        x: this.x.addListener(jointCallback),
        y: this.y.addListener(jointCallback)
      };
      return id;
    }
  }, {
    key: "removeListener",
    value: function removeListener(id) {
      this.x.removeListener(this._listeners[id].x);
      this.y.removeListener(this._listeners[id].y);
      delete this._listeners[id];
    }
  }, {
    key: "removeAllListeners",
    value: function removeAllListeners() {
      this.x.removeAllListeners();
      this.y.removeAllListeners();
      this._listeners = {};
    }
  }, {
    key: "getLayout",
    value: function getLayout() {
      return {
        left: this.x,
        top: this.y
      };
    }
  }, {
    key: "getTranslateTransform",
    value: function getTranslateTransform() {
      return [{
        translateX: this.x
      }, {
        translateY: this.y
      }];
    }
  }]);
  return AnimatedValueXY;
}(AnimatedWithChildren);

module.exports = AnimatedValueXY;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuaW1hdGVkVmFsdWVYWS5qcyJdLCJuYW1lcyI6WyJBbmltYXRlZFZhbHVlIiwicmVxdWlyZSIsIkFuaW1hdGVkV2l0aENoaWxkcmVuIiwiaW52YXJpYW50IiwiX3VuaXF1ZUlkIiwiQW5pbWF0ZWRWYWx1ZVhZIiwidmFsdWVJbiIsInZhbHVlIiwieCIsInkiLCJfbGlzdGVuZXJzIiwic2V0VmFsdWUiLCJvZmZzZXQiLCJzZXRPZmZzZXQiLCJmbGF0dGVuT2Zmc2V0IiwiZXh0cmFjdE9mZnNldCIsIl9fZ2V0VmFsdWUiLCJjYWxsYmFjayIsInJlc2V0QW5pbWF0aW9uIiwic3RvcEFuaW1hdGlvbiIsImlkIiwiU3RyaW5nIiwiam9pbnRDYWxsYmFjayIsIm51bWJlciIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJsZWZ0IiwidG9wIiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZVkiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFTQTs7Ozs7Ozs7Ozs7Ozs7QUFFQSxJQUFNQSxhQUFhLEdBQUdDLE9BQU8sQ0FBQyxpQkFBRCxDQUE3Qjs7QUFDQSxJQUFNQyxvQkFBb0IsR0FBR0QsT0FBTyxDQUFDLHdCQUFELENBQXBDOztBQUVBLElBQU1FLFNBQVMsR0FBR0YsT0FBTyxDQUFDLFdBQUQsQ0FBekI7O0FBSUEsSUFBSUcsU0FBUyxHQUFHLENBQWhCOztJQVFNQyxlOzs7QUFLSiwyQkFDRUMsT0FERixFQUVFO0FBQUE7O0FBQUE7QUFDQTtBQUNBLFFBQU1DLEtBQVUsR0FBR0QsT0FBTyxJQUFJO0FBQUNFLE1BQUFBLENBQUMsRUFBRSxDQUFKO0FBQU9DLE1BQUFBLENBQUMsRUFBRTtBQUFWLEtBQTlCOztBQUNBLFFBQUksT0FBT0YsS0FBSyxDQUFDQyxDQUFiLEtBQW1CLFFBQW5CLElBQStCLE9BQU9ELEtBQUssQ0FBQ0UsQ0FBYixLQUFtQixRQUF0RCxFQUFnRTtBQUM5RCxZQUFLRCxDQUFMLEdB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O0FBQ0EsV0FBS2hCLFVBQUwsR0FBa0IsRUFBbEI7QUFDRDs7O2dDQU8yQztBQUMxQyxhQUFPO0FBQ0xpQixRQUFBQSxJQUFJLEVBQUUsS0FBS25CLENBRE47QUFFTG9CLFFBQUFBLEdBQUcsRUFBRSxLQUFLbkI7QUFGTCxPQUFQO0FBSUQ7Ozs0Q0FPOEQ7QUFDN0QsYUFBTyxDQUFDO0FBQUNvQixRQUFBQSxVQUFVLEVBQUUsS0FBS3JCO0FBQWxCLE9BQUQsRUFBdUI7QUFBQ3NCLFFBQUFBLFVBQVUsRUFBRSxLQUFLckI7QUFBbEIsT0FBdkIsQ0FBUDtBQUNEOzs7RUFwSzJCUCxvQjs7QUF1SzlCNkIsTUFBTSxDQUFDQyxPQUFQLEdBQWlCM0IsZUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgQW5pbWF0ZWRWYWx1ZSA9IHJlcXVpcmUoJy4vQW5pbWF0ZWRWYWx1ZScpO1xuY29uc3QgQW5pbWF0ZWRXaXRoQ2hpbGRyZW4gPSByZXF1aXJlKCcuL0FuaW1hdGVkV2l0aENoaWxkcmVuJyk7XG5cbmNvbnN0IGludmFyaWFudCA9IHJlcXVpcmUoJ2ludmFyaWFudCcpO1xuXG50eXBlIFZhbHVlWFlMaXN0ZW5lckNhbGxiYWNrID0gKHZhbHVlOiB7eDogbnVtYmVyLCB5OiBudW1iZXJ9KSA9PiBtaXhlZDtcblxubGV0IF91bmlxdWVJZCA9IDE7XG5cbi8qKlxuICogMkQgVmFsdWUgZm9yIGRyaXZpbmcgMkQgYW5pbWF0aW9ucywgc3VjaCBhcyBwYW4gZ2VzdHVyZXMuIEFsbW9zdCBpZGVudGljYWxcbiAqIEFQSSB0byBub3JtYWwgYEFuaW1hdGVkLlZhbHVlYCwgYnV0IG11bHRpcGxleGVkLlxuICpcbiAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkdmFsdWV4eS5odG1sXG4gKi9cbmNsYXNzIEFuaW1hdGVkVmFsdWVYWSBleHRlbmRzIEFuaW1hdGVkV2l0aENoaWxkcmVuIHtcbiAgeDogQW5pbWF0ZWRWYWx1ZTtcbiAgeTogQW5pbWF0ZWRWYWx1ZTtcbiAgX2xpc3RlbmVyczoge1trZXk6IHN0cmluZ106IHt4OiBzdHJpbmcsIHk6IHN0cmluZ319O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHZhbHVlSW4/OiA/eyt4OiBudW1iZXIgfCBBbmltYXRlZFZhbHVlLCAreTogbnVtYmVyIHwgQW5pbWF0ZWRWYWx1ZX0sXG4gICkge1xuICAgIHN1cGVyKCk7XG4gICAgY29uc3QgdmFsdWU6IGFueSA9IHZhbHVlSW4gfHwge3g6IDAsIHk6IDB9OyAvLyBAZmxvd2ZpeG1lOiBzaG91bGRuJ3QgbmVlZCBgOiBhbnlgXG4gICAgaWYgKHR5cGVvZiB2YWx1ZS54ID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgdmFsdWUueSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRoaXMueCA9IG5ldyBBbmltYXRlZFZhbHVlKHZhbHVlLngpO1xuICAgICAgdGhpcy55ID0gbmV3IEFuaW1hdGVkVmFsdWUodmFsdWUueSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGludmFyaWFudChcbiAgICAgICAgdmFsdWUueCBpbnN0YW5jZW9mIEFuaW1hdGVkVmFsdWUgJiYgdmFsdWUueSBpbnN0YW5jZW9mIEFuaW1hdGVkVmFsdWUsXG4gICAgICAgICdBbmltYXRlZFZhbHVlWFkgbXVzdCBiZSBpbml0aWFsaXplZCB3aXRoIGFuIG9iamVjdCBvZiBudW1iZXJzIG9yICcgK1xuICAgICAgICAgICdBbmltYXRlZFZhbHVlcy4nLFxuICAgICAgKTtcbiAgICAgIHRoaXMueCA9IHZhbHVlLng7XG4gICAgICB0aGlzLnkgPSB2YWx1ZS55O1xuICAgIH1cbiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXJlY3RseSBzZXQgdGhlIHZhbHVlLiBUaGlzIHdpbGwgc3RvcCBhbnkgYW5pbWF0aW9ucyBydW5uaW5nIG9uIHRoZSB2YWx1ZVxuICAgKiBhbmQgdXBkYXRlIGFsbCB0aGUgYm91bmQgcHJvcGVydGllcy5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYW5pbWF0ZWR2YWx1ZXh5Lmh0bWwjc2V0dmFsdWVcbiAgICovXG4gIHNldFZhbHVlKHZhbHVlOiB7eDogbnVtYmVyLCB5OiBudW1iZXJ9KSB7XG4gICAgdGhpcy54LnNldFZhbHVlKHZhbHVlLngpO1xuICAgIHRoaXMueS5zZXRWYWx1ZSh2YWx1ZS55KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFuIG9mZnNldCB0aGF0IGlzIGFwcGxpZWQgb24gdG9wIG9mIHdoYXRldmVyIHZhbHVlIGlzIHNldCwgd2hldGhlclxuICAgKiB2aWEgYHNldFZhbHVlYCwgYW4gYW5pbWF0aW9uLCBvciBgQW5pbWF0ZWQuZXZlbnRgLiBVc2VmdWwgZm9yIGNvbXBlbnNhdGluZ1xuICAgKiB0aGluZ3MgbGlrZSB0aGUgc3RhcnQgb2YgYSBwYW4gZ2VzdHVyZS5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYW5pbWF0ZWR2YWx1ZXh5Lmh0bWwjc2V0b2Zmc2V0XG4gICAqL1xuICBzZXRPZmZzZXQob2Zmc2V0OiB7eDogbnVtYmVyLCB5OiBudW1iZXJ9KSB7XG4gICAgdGhpcy54LnNldE9mZnNldChvZmZzZXQueCk7XG4gICAgdGhpcy55LnNldE9mZnNldChvZmZzZXQueSk7XG4gIH1cblxuICAvKipcbiAgICogTWVyZ2VzIHRoZSBvZmZzZXQgdmFsdWUgaW50byB0aGUgYmFzZSB2YWx1ZSBhbmQgcmVzZXRzIHRoZSBvZmZzZXQgdG8gemVyby5cbiAgICogVGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgdmFsdWUgaXMgdW5jaGFuZ2VkLlxuICAgKlxuICAgKiBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9hbmltYXRlZHZhbHVleHkuaHRtbCNmbGF0dGVub2Zmc2V0XG4gICAqL1xuICBmbGF0dGVuT2Zmc2V0KCk6IHZvaWQge1xuICAgIHRoaXMueC5mbGF0dGVuT2Zmc2V0KCk7XG4gICAgdGhpcy55LmZsYXR0ZW5PZmZzZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBvZmZzZXQgdmFsdWUgdG8gdGhlIGJhc2UgdmFsdWUsIGFuZCByZXNldHMgdGhlIGJhc2UgdmFsdWUgdG9cbiAgICogemVyby4gVGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgdmFsdWUgaXMgdW5jaGFuZ2VkLlxuICAgKlxuICAgKiBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9hbmltYXRlZHZhbHVleHkuaHRtbCNleHRyYWN0b2Zmc2V0XG4gICAqL1xuICBleHRyYWN0T2Zmc2V0KCk6IHZvaWQge1xuICAgIHRoaXMueC5leHRyYWN0T2Zmc2V0KCk7XG4gICAgdGhpcy55LmV4dHJhY3RPZmZzZXQoKTtcbiAgfVxuXG4gIF9fZ2V0VmFsdWUoKToge3g6IG51bWJlciwgeTogbnVtYmVyfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHRoaXMueC5fX2dldFZhbHVlKCksXG4gICAgICB5OiB0aGlzLnkuX19nZXRWYWx1ZSgpLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU3RvcHMgYW55IGFuaW1hdGlvbiBhbmQgcmVzZXRzIHRoZSB2YWx1ZSB0byBpdHMgb3JpZ2luYWwuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkdmFsdWV4eS5odG1sI3Jlc2V0YW5pbWF0aW9uXG4gICAqL1xuICByZXNldEFuaW1hdGlvbihjYWxsYmFjaz86ICh2YWx1ZToge3g6IG51bWJlciwgeTogbnVtYmVyfSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMueC5yZXNldEFuaW1hdGlvbigpO1xuICAgIHRoaXMueS5yZXNldEFuaW1hdGlvbigpO1xuICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHRoaXMuX19nZXRWYWx1ZSgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wcyBhbnkgcnVubmluZyBhbmltYXRpb24gb3IgdHJhY2tpbmcuIGBjYWxsYmFja2AgaXMgaW52b2tlZCB3aXRoIHRoZVxuICAgKiBmaW5hbCB2YWx1ZSBhZnRlciBzdG9wcGluZyB0aGUgYW5pbWF0aW9uLCB3aGljaCBpcyB1c2VmdWwgZm9yIHVwZGF0aW5nXG4gICAqIHN0YXRlIHRvIG1hdGNoIHRoZSBhbmltYXRpb24gcG9zaXRpb24gd2l0aCBsYXlvdXQuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkdmFsdWV4eS5odG1sI3N0b3BhbmltYXRpb25cbiAgICovXG4gIHN0b3BBbmltYXRpb24oY2FsbGJhY2s/OiAodmFsdWU6IHt4OiBudW1iZXIsIHk6IG51bWJlcn0pID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnguc3RvcEFuaW1hdGlvbigpO1xuICAgIHRoaXMueS5zdG9wQW5pbWF0aW9uKCk7XG4gICAgY2FsbGJhY2sgJiYgY2FsbGJhY2sodGhpcy5fX2dldFZhbHVlKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4gYXN5bmNocm9ub3VzIGxpc3RlbmVyIHRvIHRoZSB2YWx1ZSBzbyB5b3UgY2FuIG9ic2VydmUgdXBkYXRlcyBmcm9tXG4gICAqIGFuaW1hdGlvbnMuICBUaGlzIGlzIHVzZWZ1bCBiZWNhdXNlIHRoZXJlIGlzIG5vIHdheSB0byBzeW5jaHJvbm91c2x5IHJlYWRcbiAgICogdGhlIHZhbHVlIGJlY2F1c2UgaXQgbWlnaHQgYmUgZHJpdmVuIG5hdGl2ZWx5LlxuICAgKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHRoYXQgc2VydmVzIGFzIGFuIGlkZW50aWZpZXIgZm9yIHRoZSBsaXN0ZW5lci5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYW5pbWF0ZWR2YWx1ZXh5Lmh0bWwjYWRkbGlzdGVuZXJcbiAgICovXG4gIGFkZExpc3RlbmVyKGNhbGxiYWNrOiBWYWx1ZVhZTGlzdGVuZXJDYWxsYmFjayk6IHN0cmluZyB7XG4gICAgY29uc3QgaWQgPSBTdHJpbmcoX3VuaXF1ZUlkKyspO1xuICAgIGNvbnN0IGpvaW50Q2FsbGJhY2sgPSAoe3ZhbHVlOiBudW1iZXJ9KSA9PiB7XG4gICAgICBjYWxsYmFjayh0aGlzLl9fZ2V0VmFsdWUoKSk7XG4gICAgfTtcbiAgICB0aGlzLl9saXN0ZW5lcnNbaWRdID0ge1xuICAgICAgeDogdGhpcy54LmFkZExpc3RlbmVyKGpvaW50Q2FsbGJhY2spLFxuICAgICAgeTogdGhpcy55LmFkZExpc3RlbmVyKGpvaW50Q2FsbGJhY2spLFxuICAgIH07XG4gICAgcmV0dXJuIGlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXIgYSBsaXN0ZW5lci4gVGhlIGBpZGAgcGFyYW0gc2hhbGwgbWF0Y2ggdGhlIGlkZW50aWZpZXJcbiAgICogcHJldmlvdXNseSByZXR1cm5lZCBieSBgYWRkTGlzdGVuZXIoKWAuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkdmFsdWV4eS5odG1sI3JlbW92ZWxpc3RlbmVyXG4gICAqL1xuICByZW1vdmVMaXN0ZW5lcihpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy54LnJlbW92ZUxpc3RlbmVyKHRoaXMuX2xpc3RlbmVyc1tpZF0ueCk7XG4gICAgdGhpcy55LnJlbW92ZUxpc3RlbmVyKHRoaXMuX2xpc3RlbmVyc1tpZF0ueSk7XG4gICAgZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1tpZF07XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCByZWdpc3RlcmVkIGxpc3RlbmVycy5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYW5pbWF0ZWR2YWx1ZXh5Lmh0bWwjcmVtb3ZlYWxsbGlzdGVuZXJzXG4gICAqL1xuICByZW1vdmVBbGxMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgdGhpcy54LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIHRoaXMueS5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBge3gsIHl9YCBpbnRvIGB7bGVmdCwgdG9wfWAgZm9yIHVzZSBpbiBzdHlsZS5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYW5pbWF0ZWR2YWx1ZXh5Lmh0bWwjZ2V0bGF5b3V0XG4gICAqL1xuICBnZXRMYXlvdXQoKToge1trZXk6IHN0cmluZ106IEFuaW1hdGVkVmFsdWV9IHtcbiAgICByZXR1cm4ge1xuICAgICAgbGVmdDogdGhpcy54LFxuICAgICAgdG9wOiB0aGlzLnksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBge3gsIHl9YCBpbnRvIGEgdXNlYWJsZSB0cmFuc2xhdGlvbiB0cmFuc2Zvcm0uXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkdmFsdWV4eS5odG1sI2dldHRyYW5zbGF0ZXRyYW5zZm9ybVxuICAgKi9cbiAgZ2V0VHJhbnNsYXRlVHJhbnNmb3JtKCk6IEFycmF5PHtba2V5OiBzdHJpbmddOiBBbmltYXRlZFZhbHVlfT4ge1xuICAgIHJldHVybiBbe3RyYW5zbGF0ZVg6IHRoaXMueH0sIHt0cmFuc2xhdGVZOiB0aGlzLnl9XTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEFuaW1hdGVkVmFsdWVYWTtcbiJdfQ==