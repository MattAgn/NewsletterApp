ce2e4ae28f7f177c435ac0d515271656
'use strict';

function stiffnessFromOrigamiValue(oValue) {
  return (oValue - 30) * 3.62 + 194;
}

function dampingFromOrigamiValue(oValue) {
  return (oValue - 8) * 3 + 25;
}

function fromOrigamiTensionAndFriction(tension, friction) {
  return {
    stiffness: stiffnessFromOrigamiValue(tension),
    damping: dampingFromOrigamiValue(friction)
  };
}

function fromBouncinessAndSpeed(bounciness, speed) {
  function normalize(value, startValue, endValue) {
    return (value - startValue) / (endValue - startValue);
  }

  function projectNormal(n, start, end) {
    return start + n * (end - start);
  }

  function linearInterpolation(t, start, end) {
    return t * end + (1 - t) * start;
  }

  function quadraticOutInterpolation(t, start, end) {
    return linearInterpolation(2 * t - t * t, start, end);
  }

  function b3Friction1(x) {
    return 0.0007 * Math.pow(x, 3) - 0.031 * Math.pow(x, 2) + 0.64 * x + 1.28;
  }

  function b3Friction2(x) {
    return 0.000044 * Math.pow(x, 3) - 0.006 * Math.pow(x, 2) + 0.36 * x + 2;
  }

  function b3Friction3(x) {
    return 0.00000045 * Math.pow(x, 3) - 0.000332 * Math.pow(x, 2) + 0.1078 * x + 5.84;
  }

  function b3Nobounce(tension) {
    if (tension <= 18) {
      return b3Friction1(tension);
    } else if (tension > 18 && tension <= 44) {
      return b3Friction2(tension);
    } else {
      return b3Friction3(tension);
    }
  }

  var b = normalize(bounciness / 1.7, 0, 20);
  b = projectNormal(b, 0, 0.8);
  var s = normalize(speed / 1.7, 0, 20);
  var bouncyTension = projectNormal(s, 0.5, 200);
  var bouncyFriction = quadraticOutInterpolation(b, b3Nobounce(bouncyTension), 0.01);
  return {
    stiffness: stiffnessFromOrigamiValue(bouncyTension),
    damping: dampingFromOrigamiValue(bouncyFriction)
  };
}

module.exports = {
  fromOrigamiTensionAndFriction: fromOrigamiTensionAndFriction,
  fromBouncinessAndSpeed: fromBouncinessAndSpeed
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNwcmluZ0NvbmZpZy5qcyJdLCJuYW1lcyI6WyJzdGlmZm5lc3NGcm9tT3JpZ2FtaVZhbHVlIiwib1ZhbHVlIiwiZGFtcGluZ0Zyb21PcmlnYW1pVmFsdWUiLCJmcm9tT3JpZ2FtaVRlbnNpb25BbmRGcmljdGlvbiIsInRlbnNpb24iLCJmcmljdGlvbiIsInN0aWZmbmVzcyIsImRhbXBpbmciLCJmcm9tQm91bmNpbmVzc0FuZFNwZWVkIiwiYm91bmNpbmVzcyIsInNwZWVkIiwibm9ybWFsaXplIiwidmFsdWUiLCJzdGFydFZhbHVlIiwiZW5kVmFsdWUiLCJwcm9qZWN0Tm9ybWFsIiwibiIsInN0YXJ0IiwiZW5kIiwibGluZWFySW50ZXJwb2xhdGlvbiIsInQiLCJxdWFkcmF0aWNPdXRJbnRlcnBvbGF0aW9uIiwiYjNGcmljdGlvbjEiLCJ4IiwiTWF0aCIsInBvdyIsImIzRnJpY3Rpb24yIiwiYjNGcmljdGlvbjMiLCJiM05vYm91bmNlIiwiYiIsInMiLCJib3VuY3lUZW5zaW9uIiwiYm91bmN5RnJpY3Rpb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFVQTs7QUFPQSxTQUFTQSx5QkFBVCxDQUFtQ0MsTUFBbkMsRUFBMkM7QUFDekMsU0FBTyxDQUFDQSxNQUFNLEdBQUcsRUFBVixJQUFnQixJQUFoQixHQUF1QixHQUE5QjtBQUNEOztBQUVELFNBQVNDLHVCQUFULENBQWlDRCxNQUFqQyxFQUF5QztBQUN2QyxTQUFPLENBQUNBLE1BQU0sR0FBRyxDQUFWLElBQWUsQ0FBZixHQUFtQixFQUExQjtBQUNEOztBQUVELFNBQVNFLDZCQUFULENBQ0VDLE9BREYsRUFFRUMsUUFGRixFQUdvQjtBQUNsQixTQUFPO0FBQ0xDLElBQUFBLFNBQVMsRUFBRU4seUJBQXlCLENBQUNJLE9BQUQsQ0FEL0I7QUFFTEcsSUFBQUEsT0FBTyxFQUFFTCx1QkFBdUIsQ0FBQ0csUUFBRDtBQUYzQixHQUFQO0FBSUQ7O0FBRUQsU0FBU0csc0JBQVQsQ0FDRUMsVUFE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YUFBRCxDQUQvQjtBQUVMeEIsSUFBQUEsT0FBTyxFQUFFTCx1QkFBdUIsQ0FBQzhCLGNBQUQ7QUFGM0IsR0FBUDtBQUlEOztBQUVEQyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZi9CLEVBQUFBLDZCQUE2QixFQUE3QkEsNkJBRGU7QUFFZkssRUFBQUEsc0JBQXNCLEVBQXRCQTtBQUZlLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvdyBzdHJpY3RcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnR5cGUgU3ByaW5nQ29uZmlnVHlwZSA9IHtcbiAgc3RpZmZuZXNzOiBudW1iZXIsXG4gIGRhbXBpbmc6IG51bWJlcixcbn07XG5cbmZ1bmN0aW9uIHN0aWZmbmVzc0Zyb21PcmlnYW1pVmFsdWUob1ZhbHVlKSB7XG4gIHJldHVybiAob1ZhbHVlIC0gMzApICogMy42MiArIDE5NDtcbn1cblxuZnVuY3Rpb24gZGFtcGluZ0Zyb21PcmlnYW1pVmFsdWUob1ZhbHVlKSB7XG4gIHJldHVybiAob1ZhbHVlIC0gOCkgKiAzICsgMjU7XG59XG5cbmZ1bmN0aW9uIGZyb21PcmlnYW1pVGVuc2lvbkFuZEZyaWN0aW9uKFxuICB0ZW5zaW9uOiBudW1iZXIsXG4gIGZyaWN0aW9uOiBudW1iZXIsXG4pOiBTcHJpbmdDb25maWdUeXBlIHtcbiAgcmV0dXJuIHtcbiAgICBzdGlmZm5lc3M6IHN0aWZmbmVzc0Zyb21PcmlnYW1pVmFsdWUodGVuc2lvbiksXG4gICAgZGFtcGluZzogZGFtcGluZ0Zyb21PcmlnYW1pVmFsdWUoZnJpY3Rpb24pLFxuICB9O1xufVxuXG5mdW5jdGlvbiBmcm9tQm91bmNpbmVzc0FuZFNwZWVkKFxuICBib3VuY2luZXNzOiBudW1iZXIsXG4gIHNwZWVkOiBudW1iZXIsXG4pOiBTcHJpbmdDb25maWdUeXBlIHtcbiAgZnVuY3Rpb24gbm9ybWFsaXplKHZhbHVlLCBzdGFydFZhbHVlLCBlbmRWYWx1ZSkge1xuICAgIHJldHVybiAodmFsdWUgLSBzdGFydFZhbHVlKSAvIChlbmRWYWx1ZSAtIHN0YXJ0VmFsdWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvamVjdE5vcm1hbChuLCBzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIHN0YXJ0ICsgbiAqIChlbmQgLSBzdGFydCk7XG4gIH1cblxuICBmdW5jdGlvbiBsaW5lYXJJbnRlcnBvbGF0aW9uKHQsIHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gdCAqIGVuZCArICgxIC0gdCkgKiBzdGFydDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHF1YWRyYXRpY091dEludGVycG9sYXRpb24odCwgc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBsaW5lYXJJbnRlcnBvbGF0aW9uKDIgKiB0IC0gdCAqIHQsIHN0YXJ0LCBlbmQpO1xuICB9XG5cbiAgZnVuY3Rpb24gYjNGcmljdGlvbjEoeCkge1xuICAgIHJldHVybiAwLjAwMDcgKiBNYXRoLnBvdyh4LCAzKSAtIDAuMDMxICogTWF0aC5wb3coeCwgMikgKyAwLjY0ICogeCArIDEuMjg7XG4gIH1cblxuICBmdW5jdGlvbiBiM0ZyaWN0aW9uMih4KSB7XG4gICAgcmV0dXJuIDAuMDAwMDQ0ICogTWF0aC5wb3coeCwgMykgLSAwLjAwNiAqIE1hdGgucG93KHgsIDIpICsgMC4zNiAqIHggKyAyO1xuICB9XG5cbiAgZnVuY3Rpb24gYjNGcmljdGlvbjMoeCkge1xuICAgIHJldHVybiAoXG4gICAgICAwLjAwMDAwMDQ1ICogTWF0aC5wb3coeCwgMykgLVxuICAgICAgMC4wMDAzMzIgKiBNYXRoLnBvdyh4LCAyKSArXG4gICAgICAwLjEwNzggKiB4ICtcbiAgICAgIDUuODRcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gYjNOb2JvdW5jZSh0ZW5zaW9uKSB7XG4gICAgaWYgKHRlbnNpb24gPD0gMTgpIHtcbiAgICAgIHJldHVybiBiM0ZyaWN0aW9uMSh0ZW5zaW9uKTtcbiAgICB9IGVsc2UgaWYgKHRlbnNpb24gPiAxOCAmJiB0ZW5zaW9uIDw9IDQ0KSB7XG4gICAgICByZXR1cm4gYjNGcmljdGlvbjIodGVuc2lvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBiM0ZyaWN0aW9uMyh0ZW5zaW9uKTtcbiAgICB9XG4gIH1cblxuICBsZXQgYiA9IG5vcm1hbGl6ZShib3VuY2luZXNzIC8gMS43LCAwLCAyMCk7XG4gIGIgPSBwcm9qZWN0Tm9ybWFsKGIsIDAsIDAuOCk7XG4gIGNvbnN0IHMgPSBub3JtYWxpemUoc3BlZWQgLyAxLjcsIDAsIDIwKTtcbiAgY29uc3QgYm91bmN5VGVuc2lvbiA9IHByb2plY3ROb3JtYWwocywgMC41LCAyMDApO1xuICBjb25zdCBib3VuY3lGcmljdGlvbiA9IHF1YWRyYXRpY091dEludGVycG9sYXRpb24oXG4gICAgYixcbiAgICBiM05vYm91bmNlKGJvdW5jeVRlbnNpb24pLFxuICAgIDAuMDEsXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBzdGlmZm5lc3M6IHN0aWZmbmVzc0Zyb21PcmlnYW1pVmFsdWUoYm91bmN5VGVuc2lvbiksXG4gICAgZGFtcGluZzogZGFtcGluZ0Zyb21PcmlnYW1pVmFsdWUoYm91bmN5RnJpY3Rpb24pLFxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZnJvbU9yaWdhbWlUZW5zaW9uQW5kRnJpY3Rpb24sXG4gIGZyb21Cb3VuY2luZXNzQW5kU3BlZWQsXG59O1xuIl19