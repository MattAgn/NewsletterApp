ca7dda2f80f8d1f6b8ec128367158e22
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _act = _interopRequireDefault(require("./act"));

var _errors = require("./helpers/errors");

var findEventHandler = function findEventHandler(element, eventName, callsite) {
  var eventHandler = toEventHandlerName(eventName);

  if (typeof element.props[eventHandler] === 'function') {
    return element.props[eventHandler];
  } else if (typeof element.props[eventName] === 'function') {
    return element.props[eventName];
  }

  if (element.parent === null || element.parent.parent === null) {
    throw new _errors.ErrorWithStack("No handler function found for event: \"" + eventName + "\"", callsite || invokeEvent);
  }

  return findEventHandler(element.parent, eventName, callsite);
};

var invokeEvent = function invokeEvent(element, eventName, callsite) {
  for (var _len = arguments.length, data = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {
    data[_key - 3] = arguments[_key];
  }

  var handler = findEventHandler(element, eventName, callsite);

  if (!handler) {
    return null;
  }

  var returnValue;
  (0, _act.default)(function () {
    returnValue = handler.apply(void 0, data);
  });
  return returnValue;
};

var toEventHandlerName = function toEventHandlerName(eventName) {
  return "on" + eventName.charAt(0).toUpperCase() + eventName.slice(1);
};

var pressHandler = function pressHandler(element) {
  return invokeEvent(element, 'press', pressHandler);
};

var changeTextHandler = function changeTextHandler(element) {
  for (var _len2 = arguments.length, data = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
    data[_key2 - 1] = arguments[_key2];
  }

  return invokeEvent.apply(void 0, [element, 'changeText', changeTextHandler].concat(data));
};

var scrollHandler = function scrollHandler(element) {
  for (var _len3 = arguments.length, data = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
    data[_key3 - 1] = arguments[_key3];
  }

  return invokeEvent.apply(void 0, [element, 'scroll', scrollHandler].concat(data));
};

var fireEvent = function fireEvent(element, eventName) {
  for (var _len4 = arguments.length, data = new Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {
    data[_key4 - 2] = arguments[_key4];
  }

  return invokeEvent.apply(void 0, [element, eventName, fireEvent].concat(data));
};

fireEvent.press = pressHandler;
fireEvent.changeText = changeTextHandler;
fireEvent.scroll = scrollHandler;
var _default = fireEvent;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpcmVFdmVudC5qcyJdLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsIl9hY3QiLCJfZXJyb3JzIiwiZmluZEV2ZW50SGFuZGxlciIsImVsZW1lbnQiLCJldmVudE5hbWUiLCJjYWxsc2l0ZSIsImV2ZW50SGFuZGxlciIsInRvRXZlbnRIYW5kbGVyTmFtZSIsInByb3BzIiwicGFyZW50IiwiRXJyb3JXaXRoU3RhY2siLCJpbnZva2VFdmVudCIsIl9sZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJkYXRhIiwiQXJyYXkiLCJfa2V5IiwiaGFuZGxlciIsInJldHVyblZhbHVlIiwiYXBwbHkiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwicHJlc3NIYW5kbGVyIiwiY2hhbmdlVGV4dEhhbmRsZXIiLCJfbGVuMiIsIl9rZXkyIiwiY29uY2F0Iiwic2Nyb2xsSGFuZGxlciIsIl9sZW4zIiwiX2tleTMiLCJmaXJlRXZlbnQiLCJfbGVuNCIsIl9rZXk0IiwicHJlc3MiLCJjaGFuZ2VUZXh0Iiwic2Nyb2xsIiwiX2RlZmF1bHQiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLHNCQUFzQixHQUFDQyxPQUFPLENBQUMsOENBQUQsQ0FBbEM7O0FBQW1GQyxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQThCLFlBQTlCLEVBQTJDO0FBQUNDLEVBQUFBLEtBQUssRUFBQztBQUFQLENBQTNDO0FBQXlERCxPQUFPLENBQUNFLE9BQVIsR0FBZ0IsS0FBSyxDQUFyQjs7QUFBdUIsSUFBSUMsSUFBSSxHQUFDUCxzQkFBc0IsQ0FBQ0MsT0FBTyxDQUFDLE9BQUQsQ0FBUixDQUEvQjs7QUFBa0QsSUFBSU8sT0FBTyxHQUFDUCxPQUFPLENBQUMsa0JBQUQsQ0FBbkI7O0FBQXdDLElBQUlRLGdCQUFnQixHQUFDLFNBQVNBLGdCQUFULENB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QixDQUExQixDQUFoQyxFQUE2REMsS0FBSyxHQUFDLENBQXZFLEVBQXlFQSxLQUFLLEdBQUNELEtBQS9FLEVBQXFGQyxLQUFLLEVBQTFGLEVBQTZGO0FBQUNuQixJQUFBQSxJQUFJLENBQUNtQixLQUFLLEdBQUMsQ0FBUCxDQUFKLEdBQWNyQixTQUFTLENBQUNxQixLQUFELENBQXZCO0FBQWdDOztBQUFBLFNBQU92QixXQUFXLENBQUNTLEtBQVosQ0FBa0IsS0FBSyxDQUF2QixFQUF5QixDQUFDakIsT0FBRCxFQUFTQyxTQUFULEVBQW1CNEIsU0FBbkIsRUFBOEJKLE1BQTlCLENBQXFDYixJQUFyQyxDQUF6QixDQUFQO0FBQTZFLENBQS9QOztBQUFnUWlCLFNBQVMsQ0FBQ0csS0FBVixHQUFnQlgsWUFBaEI7QUFBNkJRLFNBQVMsQ0FBQ0ksVUFBVixHQUFxQlgsaUJBQXJCO0FBQXVDTyxTQUFTLENBQUNLLE1BQVYsR0FBaUJSLGFBQWpCO0FBQStCLElBQUlTLFFBQVEsR0FBQ04sU0FBYjtBQUF1Qm5DLE9BQU8sQ0FBQ0UsT0FBUixHQUFnQnVDLFFBQWhCIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQ9cmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5kZWZhdWx0PXZvaWQgMDt2YXIgX2FjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2FjdFwiKSk7dmFyIF9lcnJvcnM9cmVxdWlyZShcIi4vaGVscGVycy9lcnJvcnNcIik7dmFyIGZpbmRFdmVudEhhbmRsZXI9ZnVuY3Rpb24gZmluZEV2ZW50SGFuZGxlcihlbGVtZW50LGV2ZW50TmFtZSxjYWxsc2l0ZSl7dmFyIGV2ZW50SGFuZGxlcj10b0V2ZW50SGFuZGxlck5hbWUoZXZlbnROYW1lKTtpZih0eXBlb2YgZWxlbWVudC5wcm9wc1tldmVudEhhbmRsZXJdPT09J2Z1bmN0aW9uJyl7cmV0dXJuIGVsZW1lbnQucHJvcHNbZXZlbnRIYW5kbGVyXTt9ZWxzZSBpZih0eXBlb2YgZWxlbWVudC5wcm9wc1tldmVudE5hbWVdPT09J2Z1bmN0aW9uJyl7cmV0dXJuIGVsZW1lbnQucHJvcHNbZXZlbnROYW1lXTt9aWYoZWxlbWVudC5wYXJlbnQ9PT1udWxsfHxlbGVtZW50LnBhcmVudC5wYXJlbnQ9PT1udWxsKXt0aHJvdyBuZXcgX2Vycm9ycy5FcnJvcldpdGhTdGFjayhcIk5vIGhhbmRsZXIgZnVuY3Rpb24gZm91bmQgZm9yIGV2ZW50OiBcXFwiXCIrZXZlbnROYW1lK1wiXFxcIlwiLGNhbGxzaXRlfHxpbnZva2VFdmVudCk7fXJldHVybiBmaW5kRXZlbnRIYW5kbGVyKGVsZW1lbnQucGFyZW50LGV2ZW50TmFtZSxjYWxsc2l0ZSk7fTt2YXIgaW52b2tlRXZlbnQ9ZnVuY3Rpb24gaW52b2tlRXZlbnQoZWxlbWVudCxldmVudE5hbWUsY2FsbHNpdGUpe2Zvcih2YXIgX2xlbj1hcmd1bWVudHMubGVuZ3RoLGRhdGE9bmV3IEFycmF5KF9sZW4+Mz9fbGVuLTM6MCksX2tleT0zO19rZXk8X2xlbjtfa2V5Kyspe2RhdGFbX2tleS0zXT1hcmd1bWVudHNbX2tleV07fXZhciBoYW5kbGVyPWZpbmRFdmVudEhhbmRsZXIoZWxlbWVudCxldmVudE5hbWUsY2FsbHNpdGUpO2lmKCFoYW5kbGVyKXtyZXR1cm4gbnVsbDt9dmFyIHJldHVyblZhbHVlOygwLF9hY3QuZGVmYXVsdCkoZnVuY3Rpb24oKXtyZXR1cm5WYWx1ZT1oYW5kbGVyLmFwcGx5KHZvaWQgMCxkYXRhKTt9KTtyZXR1cm4gcmV0dXJuVmFsdWU7fTt2YXIgdG9FdmVudEhhbmRsZXJOYW1lPWZ1bmN0aW9uIHRvRXZlbnRIYW5kbGVyTmFtZShldmVudE5hbWUpe3JldHVyblwib25cIitldmVudE5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZXZlbnROYW1lLnNsaWNlKDEpO307dmFyIHByZXNzSGFuZGxlcj1mdW5jdGlvbiBwcmVzc0hhbmRsZXIoZWxlbWVudCl7cmV0dXJuIGludm9rZUV2ZW50KGVsZW1lbnQsJ3ByZXNzJyxwcmVzc0hhbmRsZXIpO307dmFyIGNoYW5nZVRleHRIYW5kbGVyPWZ1bmN0aW9uIGNoYW5nZVRleHRIYW5kbGVyKGVsZW1lbnQpe2Zvcih2YXIgX2xlbjI9YXJndW1lbnRzLmxlbmd0aCxkYXRhPW5ldyBBcnJheShfbGVuMj4xP19sZW4yLTE6MCksX2tleTI9MTtfa2V5MjxfbGVuMjtfa2V5MisrKXtkYXRhW19rZXkyLTFdPWFyZ3VtZW50c1tfa2V5Ml07fXJldHVybiBpbnZva2VFdmVudC5hcHBseSh2b2lkIDAsW2VsZW1lbnQsJ2NoYW5nZVRleHQnLGNoYW5nZVRleHRIYW5kbGVyXS5jb25jYXQoZGF0YSkpO307dmFyIHNjcm9sbEhhbmRsZXI9ZnVuY3Rpb24gc2Nyb2xsSGFuZGxlcihlbGVtZW50KXtmb3IodmFyIF9sZW4zPWFyZ3VtZW50cy5sZW5ndGgsZGF0YT1uZXcgQXJyYXkoX2xlbjM+MT9fbGVuMy0xOjApLF9rZXkzPTE7X2tleTM8X2xlbjM7X2tleTMrKyl7ZGF0YVtfa2V5My0xXT1hcmd1bWVudHNbX2tleTNdO31yZXR1cm4gaW52b2tlRXZlbnQuYXBwbHkodm9pZCAwLFtlbGVtZW50LCdzY3JvbGwnLHNjcm9sbEhhbmRsZXJdLmNvbmNhdChkYXRhKSk7fTt2YXIgZmlyZUV2ZW50PWZ1bmN0aW9uIGZpcmVFdmVudChlbGVtZW50LGV2ZW50TmFtZSl7Zm9yKHZhciBfbGVuND1hcmd1bWVudHMubGVuZ3RoLGRhdGE9bmV3IEFycmF5KF9sZW40PjI/X2xlbjQtMjowKSxfa2V5ND0yO19rZXk0PF9sZW40O19rZXk0Kyspe2RhdGFbX2tleTQtMl09YXJndW1lbnRzW19rZXk0XTt9cmV0dXJuIGludm9rZUV2ZW50LmFwcGx5KHZvaWQgMCxbZWxlbWVudCxldmVudE5hbWUsZmlyZUV2ZW50XS5jb25jYXQoZGF0YSkpO307ZmlyZUV2ZW50LnByZXNzPXByZXNzSGFuZGxlcjtmaXJlRXZlbnQuY2hhbmdlVGV4dD1jaGFuZ2VUZXh0SGFuZGxlcjtmaXJlRXZlbnQuc2Nyb2xsPXNjcm9sbEhhbmRsZXI7dmFyIF9kZWZhdWx0PWZpcmVFdmVudDtleHBvcnRzLmRlZmF1bHQ9X2RlZmF1bHQ7Il19