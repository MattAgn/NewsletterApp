ebc54b42534be95df7de4836e0cce18c
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
var UNKNOWN_FUNCTION = '<unknown>';

function parse(stackString) {
  var lines = stackString.split('\n');
  return lines.reduce(function (stack, line) {
    var parseResult = parseChrome(line) || parseWinjs(line) || parseGecko(line) || parseJSC(line) || parseNode(line);

    if (parseResult) {
      stack.push(parseResult);
    }

    return stack;
  }, []);
}

var chromeRe = /^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i;
var chromeEvalRe = /\((\S*)(?::(\d+))(?::(\d+))\)/;

function parseChrome(line) {
  var parts = chromeRe.exec(line);

  if (!parts) {
    return null;
  }

  var isNative = parts[2] && parts[2].indexOf('native') === 0;
  var isEval = parts[2] && parts[2].indexOf('eval') === 0;
  var submatch = chromeEvalRe.exec(parts[2]);

  if (isEval && submatch != null) {
    parts[2] = submatch[1];
    parts[3] = submatch[2];
    parts[4] = submatch[3];
  }

  return {
    file: !isNative ? parts[2] : null,
    methodName: parts[1] || UNKNOWN_FUNCTION,
    arguments: isNative ? [parts[2]] : [],
    lineNumber: parts[3] ? +parts[3] : null,
    column: parts[4] ? +parts[4] : null
  };
}

var winjsRe = /^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;

function parseWinjs(line) {
  var parts = winjsRe.exec(line);

  if (!parts) {
    return null;
  }

  return {
    file: parts[2],
    methodName: parts[1] || UNKNOWN_FUNCTION,
    arguments: [],
    lineNumber: +parts[3],
    column: parts[4] ? +parts[4] : null
  };
}

var geckoRe = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i;
var geckoEvalRe = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i;

function parseGecko(line) {
  var parts = geckoRe.exec(line);

  if (!parts) {
    return null;
  }

  var isEval = parts[3] && parts[3].indexOf(' > eval') > -1;
  var submatch = geckoEvalRe.exec(parts[3]);

  if (isEval && submatch != null) {
    parts[3] = submatch[1];
    parts[4] = submatch[2];
    parts[5] = null;
  }

  return {
    file: parts[3],
    methodName: parts[1] || UNKNOWN_FUNCTION,
    arguments: parts[2] ? parts[2].split(',') : [],
    lineNumber: parts[4] ? +parts[4] : null,
    column: parts[5] ? +parts[5] : null
  };
}

var javaScriptCoreRe = /^(?:\s*([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;

function parseJSC(line) {
  var parts = javaScriptCoreRe.exec(line);

  if (!parts) {
    return null;
  }

  return {
    file: parts[3],
    methodName: parts[1] || UNKNOWN_FUNCTION,
    arguments: [],
    lineNumber: +parts[4],
    column: parts[5] ? +parts[5] : null
  };
}

var nodeRe = /^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;

function parseNode(line) {
  var parts = nodeRe.exec(line);

  if (!parts) {
    return null;
  }

  return {
    file: parts[2],
    methodName: parts[1] || UNKNOWN_FUNCTION,
    arguments: [],
    lineNumber: +parts[3],
    column: parts[4] ? +parts[4] : null
  };
}

exports.parse = parse;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YWNrLXRyYWNlLXBhcnNlci5janMuanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJVTktOT1dOX0ZVTkNUSU9OIiwicGFyc2UiLCJzdGFja1N0cmluZyIsImxpbmVzIiwic3BsaXQiLCJyZWR1Y2UiLCJzdGFjayIsImxpbmUiLCJwYXJzZVJlc3VsdCIsInBhcnNlQ2hyb21lIiwicGFyc2VXaW5qcyIsInBhcnNlR2Vja28iLCJwYXJzZUpTQyIsInBhcnNlTm9kZSIsInB1c2giLCJjaHJvbWVSZSIsImNocm9tZUV2YWxSZSIsInBhcnRzIiwiZXhlYyIsImlzTmF0aXZlIiwiaW5kZXhPZiIsImlzRXZhbCIsInN1Ym1hdGNoIiwiZmlsZSIsIm1ldGhvZE5hbWUiLCJhcmd1bWVudHMiLCJsaW5lTnVtYmVyIiwiY29sdW1uIiwid2luanNSZSIsImdlY2tvUmUiLCJnZWNrb0V2YWxSZSIsImphdmFTY3JpcHRDb3JlUmUiLCJub2RlUmUiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0FBQUVDLEVBQUFBLEtBQUssRUFBRTtBQUFULENBQTdDO0FBRUEsSUFBSUMsZ0JBQWdCLEdBQUcsV0FBdkI7O0FBTUEsU0FBU0MsS0FBVCxDQUFlQyxXQUFmLEVBQTRCO0FBQzFCLE1BQUlDLEtBQUssR0FBR0QsV0FBVyxDQUFDRSxLQUFaLENBQWtCLElBQWxCLENBQVo7QUFDQSxTQUFPRCxLQUFLLENBQUNFLE1BQU4sQ0FBYSxVQUFVQyxLQUFWLEVBQWlCQyxJQUFqQixFQUF1QjtBQUN6QyxRQUFJQyxXQUFXLEdBQUdDLFdBQVcsQ0FBQ0YsSUFBRCxDQUFYLElBQXFCRyxVQUFVLENBQUNILElBQUQsQ0FBL0IsSUFBeUNJLFVBQVUsQ0FBQ0osSUFBRCxDQUFuRCxJQUE2REssUUFBUSxDQUFDTCxJQUFELENBQXJFLElBQStFTSxTQUFTLENB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S0FBUixHQUFnQkEsS0FBaEIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBVTktOT1dOX0ZVTkNUSU9OID0gJzx1bmtub3duPic7XG4vKipcbiAqIFRoaXMgcGFyc2VzIHRoZSBkaWZmZXJlbnQgc3RhY2sgdHJhY2VzIGFuZCBwdXRzIHRoZW0gaW50byBvbmUgZm9ybWF0XG4gKiBUaGlzIGJvcnJvd3MgaGVhdmlseSBmcm9tIFRyYWNlS2l0IChodHRwczovL2dpdGh1Yi5jb20vY3Nub3Zlci9UcmFjZUtpdClcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShzdGFja1N0cmluZykge1xuICB2YXIgbGluZXMgPSBzdGFja1N0cmluZy5zcGxpdCgnXFxuJyk7XG4gIHJldHVybiBsaW5lcy5yZWR1Y2UoZnVuY3Rpb24gKHN0YWNrLCBsaW5lKSB7XG4gICAgdmFyIHBhcnNlUmVzdWx0ID0gcGFyc2VDaHJvbWUobGluZSkgfHwgcGFyc2VXaW5qcyhsaW5lKSB8fCBwYXJzZUdlY2tvKGxpbmUpIHx8IHBhcnNlSlNDKGxpbmUpIHx8IHBhcnNlTm9kZShsaW5lKTtcblxuICAgIGlmIChwYXJzZVJlc3VsdCkge1xuICAgICAgc3RhY2sucHVzaChwYXJzZVJlc3VsdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0YWNrO1xuICB9LCBbXSk7XG59XG52YXIgY2hyb21lUmUgPSAvXlxccyphdCAoLio/KSA/XFwoKCg/OmZpbGV8aHR0cHM/fGJsb2J8Y2hyb21lLWV4dGVuc2lvbnxuYXRpdmV8ZXZhbHx3ZWJwYWNrfDxhbm9ueW1vdXM+fFxcLykuKj8pKD86OihcXGQrKSk/KD86OihcXGQrKSk/XFwpP1xccyokL2k7XG52YXIgY2hyb21lRXZhbFJlID0gL1xcKChcXFMqKSg/OjooXFxkKykpKD86OihcXGQrKSlcXCkvO1xuXG5mdW5jdGlvbiBwYXJzZUNocm9tZShsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IGNocm9tZVJlLmV4ZWMobGluZSk7XG5cbiAgaWYgKCFwYXJ0cykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGlzTmF0aXZlID0gcGFydHNbMl0gJiYgcGFydHNbMl0uaW5kZXhPZignbmF0aXZlJykgPT09IDA7IC8vIHN0YXJ0IG9mIGxpbmVcblxuICB2YXIgaXNFdmFsID0gcGFydHNbMl0gJiYgcGFydHNbMl0uaW5kZXhPZignZXZhbCcpID09PSAwOyAvLyBzdGFydCBvZiBsaW5lXG5cbiAgdmFyIHN1Ym1hdGNoID0gY2hyb21lRXZhbFJlLmV4ZWMocGFydHNbMl0pO1xuXG4gIGlmIChpc0V2YWwgJiYgc3VibWF0Y2ggIT0gbnVsbCkge1xuICAgIC8vIHRocm93IG91dCBldmFsIGxpbmUvY29sdW1uIGFuZCB1c2UgdG9wLW1vc3QgbGluZS9jb2x1bW4gbnVtYmVyXG4gICAgcGFydHNbMl0gPSBzdWJtYXRjaFsxXTsgLy8gdXJsXG5cbiAgICBwYXJ0c1szXSA9IHN1Ym1hdGNoWzJdOyAvLyBsaW5lXG5cbiAgICBwYXJ0c1s0XSA9IHN1Ym1hdGNoWzNdOyAvLyBjb2x1bW5cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZmlsZTogIWlzTmF0aXZlID8gcGFydHNbMl0gOiBudWxsLFxuICAgIG1ldGhvZE5hbWU6IHBhcnRzWzFdIHx8IFVOS05PV05fRlVOQ1RJT04sXG4gICAgYXJndW1lbnRzOiBpc05hdGl2ZSA/IFtwYXJ0c1syXV0gOiBbXSxcbiAgICBsaW5lTnVtYmVyOiBwYXJ0c1szXSA/ICtwYXJ0c1szXSA6IG51bGwsXG4gICAgY29sdW1uOiBwYXJ0c1s0XSA/ICtwYXJ0c1s0XSA6IG51bGxcbiAgfTtcbn1cblxudmFyIHdpbmpzUmUgPSAvXlxccyphdCAoPzooKD86XFxbb2JqZWN0IG9iamVjdFxcXSk/LispICk/XFwoPygoPzpmaWxlfG1zLWFwcHh8aHR0cHM/fHdlYnBhY2t8YmxvYik6Lio/KTooXFxkKykoPzo6KFxcZCspKT9cXCk/XFxzKiQvaTtcblxuZnVuY3Rpb24gcGFyc2VXaW5qcyhsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IHdpbmpzUmUuZXhlYyhsaW5lKTtcblxuICBpZiAoIXBhcnRzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGZpbGU6IHBhcnRzWzJdLFxuICAgIG1ldGhvZE5hbWU6IHBhcnRzWzFdIHx8IFVOS05PV05fRlVOQ1RJT04sXG4gICAgYXJndW1lbnRzOiBbXSxcbiAgICBsaW5lTnVtYmVyOiArcGFydHNbM10sXG4gICAgY29sdW1uOiBwYXJ0c1s0XSA/ICtwYXJ0c1s0XSA6IG51bGxcbiAgfTtcbn1cblxudmFyIGdlY2tvUmUgPSAvXlxccyooLio/KSg/OlxcKCguKj8pXFwpKT8oPzpefEApKCg/OmZpbGV8aHR0cHM/fGJsb2J8Y2hyb21lfHdlYnBhY2t8cmVzb3VyY2V8XFxbbmF0aXZlKS4qP3xbXkBdKmJ1bmRsZSkoPzo6KFxcZCspKT8oPzo6KFxcZCspKT9cXHMqJC9pO1xudmFyIGdlY2tvRXZhbFJlID0gLyhcXFMrKSBsaW5lIChcXGQrKSg/OiA+IGV2YWwgbGluZSBcXGQrKSogPiBldmFsL2k7XG5cbmZ1bmN0aW9uIHBhcnNlR2Vja28obGluZSkge1xuICB2YXIgcGFydHMgPSBnZWNrb1JlLmV4ZWMobGluZSk7XG5cbiAgaWYgKCFwYXJ0cykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGlzRXZhbCA9IHBhcnRzWzNdICYmIHBhcnRzWzNdLmluZGV4T2YoJyA+IGV2YWwnKSA+IC0xO1xuICB2YXIgc3VibWF0Y2ggPSBnZWNrb0V2YWxSZS5leGVjKHBhcnRzWzNdKTtcblxuICBpZiAoaXNFdmFsICYmIHN1Ym1hdGNoICE9IG51bGwpIHtcbiAgICAvLyB0aHJvdyBvdXQgZXZhbCBsaW5lL2NvbHVtbiBhbmQgdXNlIHRvcC1tb3N0IGxpbmUgbnVtYmVyXG4gICAgcGFydHNbM10gPSBzdWJtYXRjaFsxXTtcbiAgICBwYXJ0c1s0XSA9IHN1Ym1hdGNoWzJdO1xuICAgIHBhcnRzWzVdID0gbnVsbDsgLy8gbm8gY29sdW1uIHdoZW4gZXZhbFxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmaWxlOiBwYXJ0c1szXSxcbiAgICBtZXRob2ROYW1lOiBwYXJ0c1sxXSB8fCBVTktOT1dOX0ZVTkNUSU9OLFxuICAgIGFyZ3VtZW50czogcGFydHNbMl0gPyBwYXJ0c1syXS5zcGxpdCgnLCcpIDogW10sXG4gICAgbGluZU51bWJlcjogcGFydHNbNF0gPyArcGFydHNbNF0gOiBudWxsLFxuICAgIGNvbHVtbjogcGFydHNbNV0gPyArcGFydHNbNV0gOiBudWxsXG4gIH07XG59XG5cbnZhciBqYXZhU2NyaXB0Q29yZVJlID0gL14oPzpcXHMqKFteQF0qKSg/OlxcKCguKj8pXFwpKT9AKT8oXFxTLio/KTooXFxkKykoPzo6KFxcZCspKT9cXHMqJC9pO1xuXG5mdW5jdGlvbiBwYXJzZUpTQyhsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IGphdmFTY3JpcHRDb3JlUmUuZXhlYyhsaW5lKTtcblxuICBpZiAoIXBhcnRzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGZpbGU6IHBhcnRzWzNdLFxuICAgIG1ldGhvZE5hbWU6IHBhcnRzWzFdIHx8IFVOS05PV05fRlVOQ1RJT04sXG4gICAgYXJndW1lbnRzOiBbXSxcbiAgICBsaW5lTnVtYmVyOiArcGFydHNbNF0sXG4gICAgY29sdW1uOiBwYXJ0c1s1XSA/ICtwYXJ0c1s1XSA6IG51bGxcbiAgfTtcbn1cblxudmFyIG5vZGVSZSA9IC9eXFxzKmF0ICg/OigoPzpcXFtvYmplY3Qgb2JqZWN0XFxdKT9cXFMrKD86IFxcW2FzIFxcUytcXF0pPykgKT9cXCg/KC4qPyk6KFxcZCspKD86OihcXGQrKSk/XFwpP1xccyokL2k7XG5cbmZ1bmN0aW9uIHBhcnNlTm9kZShsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IG5vZGVSZS5leGVjKGxpbmUpO1xuXG4gIGlmICghcGFydHMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZmlsZTogcGFydHNbMl0sXG4gICAgbWV0aG9kTmFtZTogcGFydHNbMV0gfHwgVU5LTk9XTl9GVU5DVElPTixcbiAgICBhcmd1bWVudHM6IFtdLFxuICAgIGxpbmVOdW1iZXI6ICtwYXJ0c1szXSxcbiAgICBjb2x1bW46IHBhcnRzWzRdID8gK3BhcnRzWzRdIDogbnVsbFxuICB9O1xufVxuXG5leHBvcnRzLnBhcnNlID0gcGFyc2U7XG4iXX0=