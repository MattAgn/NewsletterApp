b3cdfd5a916e387a7ad29212ee1d44dd
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var conversions = require("webidl-conversions");

var utils = require("./utils.js");

var impl = utils.implSymbol;
var IteratorPrototype = Object.create(utils.IteratorPrototype, (0, _defineProperty2.default)({
  next: {
    value: function next() {
      var internal = this[utils.iterInternalSymbol];
      var target = internal.target,
          kind = internal.kind,
          index = internal.index;
      var values = Array.from(target[impl]);
      var len = values.length;

      if (index >= len) {
        return {
          value: undefined,
          done: true
        };
      }

      var pair = values[index];
      internal.index = index + 1;

      var _pair$map = pair.map(utils.tryWrapperForImpl),
          _pair$map2 = (0, _slicedToArray2.default)(_pair$map, 2),
          key = _pair$map2[0],
          value = _pair$map2[1];

      var result;

      switch (kind) {
        case "key":
          result = key;
          break;

        case "value":
          result = value;
          break;

        case "key+value":
          result = [key, value];
          break;
      }

      return {
        value: result,
        done: false
      };
    },
    writable: true,
    enumerable: true,
    configurable: true
  }
}, typeof Symbol === "function" ? typeof Symbol === "function" ? Symbol.toStringTag : "@@toStringTag" : "@@toStringTag", {
  value: "URLSearchParamsIterator",
  writable: false,
  enumerable: false,
  configurable: true
}));

function URLSearchParams() {
  var args = [];

  for (var i = 0; i < arguments.length && i < 1; ++i) {
    args[i] = arguments[i];
  }

  if (args[0] !== undefined) {
    if (utils.isObject(args[0])) {
      if (args[0][typeof Symbol === "function" ? Symbol.iterator : "@@iterator"] !== undefined) {
        if (!utils.isObject(args[0])) {
          throw new TypeError("Failed to construct 'URLSearchParams': parameter 1" + " sequence" + " is not an iterable object.");
        } else {
          var V = [];
          var tmp = args[0];

          for (var _iterator = tmp, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[typeof Symbol === "function" ? Symbol.iterator : "@@iterator"]();;) {
            var _ref;

            if (_isArray) {
              if (_i >= _iterator.length) break;
              _ref = _iterator[_i++];
            } else {
              _i = _iterator.next();
              if (_i.done) break;
              _ref = _i.value;
            }

            var _nextItem = _ref;

            if (!utils.isObject(_nextItem)) {
              throw new TypeError("Failed to construct 'URLSearchParams': parameter 1" + " sequence" + "'s element" + " is not an iterable object.");
            } else {
              var _V = [];
              var _tmp = _nextItem;

              for (var _iterator2 = _tmp, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[typeof Symbol === "function" ? Symbol.iterator : "@@iterator"]();;) {
                var _ref2;

                if (_isArray2) {
                  if (_i2 >= _iterator2.length) break;
                  _ref2 = _iterator2[_i2++];
                } else {
                  _i2 = _iterator2.next();
                  if (_i2.done) break;
                  _ref2 = _i2.value;
                }

                var _nextItem3 = _ref2;
                _nextItem3 = conversions["USVString"](_nextItem3, {
                  context: "Failed to construct 'URLSearchParams': parameter 1" + " sequence" + "'s element" + "'s element"
                });

                _V.push(_nextItem3);
              }

              _nextItem = _V;
            }

            V.push(_nextItem);
          }

          args[0] = V;
        }
      } else {
        if (!utils.isObject(args[0])) {
          throw new TypeError("Failed to construct 'URLSearchParams': parameter 1" + " record" + " is not an object.");
        } else {
          var result = Object.create(null);

          for (var _iterator3 = Reflect.ownKeys(args[0]), _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[typeof Symbol === "function" ? Symbol.iterator : "@@iterator"]();;) {
            var _ref3;

            if (_isArray3) {
              if (_i3 >= _iterator3.length) break;
              _ref3 = _iterator3[_i3++];
            } else {
              _i3 = _iterator3.next();
              if (_i3.done) break;
              _ref3 = _i3.value;
            }

            var _key = _ref3;
            var desc = Object.getOwnPropertyDescriptor(args[0], _key);

            if (desc && desc.enumerable) {
              var typedKey = _key;
              var typedValue = args[0][_key];
              typedKey = conversions["USVString"](typedKey, {
                context: "Failed to construct 'URLSearchParams': parameter 1" + " record" + "'s key"
              });
              typedValue = conversions["USVString"](typedValue, {
                context: "Failed to construct 'URLSearchParams': parameter 1" + " record" + "'s value"
              });
              result[typedKey] = typedValue;
            }
          }

          args[0] = result;
        }
      }
    } else {
      args[0] = conversions["USVString"](args[0], {
        context: "Failed to construct 'URLSearchParams': parameter 1"
      });
    }
  } else {
    args[0] = "";
  }

  iface.setup(this, args);
}

Object.defineProperty(URLSearchParams, "prototype", {
  value: URLSearchParams.prototype,
  writable: false,
  enumerable: false,
  configurable: false
});
Object.defineProperty(URLSearchParams.prototype, typeof Symbol === "function" ? Symbol.iterator : "@@iterator", {
  writable: true,
  enumerable: false,
  configurable: true,
  value: function entries() {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return module.exports.createDefaultIterator(this, "key+value");
  }
});

URLSearchParams.prototype.forEach = function forEach(callback) {
  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  if (arguments.length < 1) {
    throw new TypeError("Failed to execute 'forEach' on 'URLSearchParams': 1 argument required, " + "but only 0 present.");
  }

  if (typeof callback !== "function") {
    throw new TypeError("Failed to execute 'forEach' on 'URLSearchParams': The callback provided " + "as parameter 1 is not a function.");
  }

  var thisArg = arguments[1];
  var pairs = Array.from(this[impl]);
  var i = 0;

  while (i < pairs.length) {
    var _pairs$i$map = pairs[i].map(utils.tryWrapperForImpl),
        _pairs$i$map2 = (0, _slicedToArray2.default)(_pairs$i$map, 2),
        key = _pairs$i$map2[0],
        value = _pairs$i$map2[1];

    callback.call(thisArg, value, key, this);
    pairs = Array.from(this[impl]);
    i++;
  }
};

URLSearchParams.prototype.append = function append(name, value) {
  var _this$impl;

  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  if (arguments.length < 2) {
    throw new TypeError("Failed to execute 'append' on 'URLSearchParams': 2 " + "arguments required, but only " + arguments.length + " present.");
  }

  var args = [];

  for (var i = 0; i < arguments.length && i < 2; ++i) {
    args[i] = arguments[i];
  }

  args[0] = conversions["USVString"](args[0], {
    context: "Failed to execute 'append' on 'URLSearchParams': parameter 1"
  });
  args[1] = conversions["USVString"](args[1], {
    context: "Failed to execute 'append' on 'URLSearchParams': parameter 2"
  });
  return (_this$impl = this[impl]).append.apply(_this$impl, args);
};

URLSearchParams.prototype.delete = function _(name) {
  var _this$impl2;

  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  if (arguments.length < 1) {
    throw new TypeError("Failed to execute 'delete' on 'URLSearchParams': 1 " + "argument required, but only " + arguments.length + " present.");
  }

  var args = [];

  for (var i = 0; i < arguments.length && i < 1; ++i) {
    args[i] = arguments[i];
  }

  args[0] = conversions["USVString"](args[0], {
    context: "Failed to execute 'delete' on 'URLSearchParams': parameter 1"
  });
  return (_this$impl2 = this[impl]).delete.apply(_this$impl2, args);
};

URLSearchParams.prototype.get = function get(name) {
  var _this$impl3;

  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  if (arguments.length < 1) {
    throw new TypeError("Failed to execute 'get' on 'URLSearchParams': 1 " + "argument required, but only " + arguments.length + " present.");
  }

  var args = [];

  for (var i = 0; i < arguments.length && i < 1; ++i) {
    args[i] = arguments[i];
  }

  args[0] = conversions["USVString"](args[0], {
    context: "Failed to execute 'get' on 'URLSearchParams': parameter 1"
  });
  return (_this$impl3 = this[impl]).get.apply(_this$impl3, args);
};

URLSearchParams.prototype.getAll = function getAll(name) {
  var _this$impl4;

  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  if (arguments.length < 1) {
    throw new TypeError("Failed to execute 'getAll' on 'URLSearchParams': 1 " + "argument required, but only " + arguments.length + " present.");
  }

  var args = [];

  for (var i = 0; i < arguments.length && i < 1; ++i) {
    args[i] = arguments[i];
  }

  args[0] = conversions["USVString"](args[0], {
    context: "Failed to execute 'getAll' on 'URLSearchParams': parameter 1"
  });
  return utils.tryWrapperForImpl((_this$impl4 = this[impl]).getAll.apply(_this$impl4, args));
};

URLSearchParams.prototype.has = function has(name) {
  var _this$impl5;

  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  if (arguments.length < 1) {
    throw new TypeError("Failed to execute 'has' on 'URLSearchParams': 1 " + "argument required, but only " + arguments.length + " present.");
  }

  var args = [];

  for (var i = 0; i < arguments.length && i < 1; ++i) {
    args[i] = arguments[i];
  }

  args[0] = conversions["USVString"](args[0], {
    context: "Failed to execute 'has' on 'URLSearchParams': parameter 1"
  });
  return (_this$impl5 = this[impl]).has.apply(_this$impl5, args);
};

URLSearchParams.prototype.set = function set(name, value) {
  var _this$impl6;

  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  if (arguments.length < 2) {
    throw new TypeError("Failed to execute 'set' on 'URLSearchParams': 2 " + "arguments required, but only " + arguments.length + " present.");
  }

  var args = [];

  for (var i = 0; i < arguments.length && i < 2; ++i) {
    args[i] = arguments[i];
  }

  args[0] = conversions["USVString"](args[0], {
    context: "Failed to execute 'set' on 'URLSearchParams': parameter 1"
  });
  args[1] = conversions["USVString"](args[1], {
    context: "Failed to execute 'set' on 'URLSearchParams': parameter 2"
  });
  return (_this$impl6 = this[impl]).set.apply(_this$impl6, args);
};

URLSearchParams.prototype.sort = function sort() {
  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  return this[impl].sort();
};

URLSearchParams.prototype.toString = function toString() {
  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  return this[impl].toString();
};

URLSearchParams.prototype.entries = URLSearchParams.prototype[typeof Symbol === "function" ? Symbol.iterator : "@@iterator"];

URLSearchParams.prototype.keys = function keys() {
  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  return module.exports.createDefaultIterator(this, "key");
};

URLSearchParams.prototype.values = function values() {
  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  return module.exports.createDefaultIterator(this, "value");
};

Object.defineProperty(URLSearchParams.prototype, typeof Symbol === "function" ? Symbol.toStringTag : "@@toStringTag", {
  value: "URLSearchParams",
  writable: false,
  enumerable: false,
  configurable: true
});
var iface = {
  mixedInto: [],
  is: function is(obj) {
    if (obj) {
      if (obj[impl] instanceof Impl.implementation) {
        return true;
      }

      for (var i = 0; i < module.exports.mixedInto.length; ++i) {
        if (obj instanceof module.exports.mixedInto[i]) {
          return true;
        }
      }
    }

    return false;
  },
  isImpl: function isImpl(obj) {
    if (obj) {
      if (obj instanceof Impl.implementation) {
        return true;
      }

      var wrapper = utils.wrapperForImpl(obj);

      for (var i = 0; i < module.exports.mixedInto.length; ++i) {
        if (wrapper instanceof module.exports.mixedInto[i]) {
          return true;
        }
      }
    }

    return false;
  },
  convert: function convert(obj) {
    var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
        _ref4$context = _ref4.context,
        context = _ref4$context === void 0 ? "The provided value" : _ref4$context;

    if (module.exports.is(obj)) {
      return utils.implForWrapper(obj);
    }

    throw new TypeError(context + " is not of type 'URLSearchParams'.");
  },
  createDefaultIterator: function createDefaultIterator(target, kind) {
    var iterator = Object.create(IteratorPrototype);
    Object.defineProperty(iterator, utils.iterInternalSymbol, {
      value: {
        target: target,
        kind: kind,
        index: 0
      },
      writable: false,
      enumerable: false,
      configurable: true
    });
    return iterator;
  },
  create: function create(constructorArgs, privateData) {
    var obj = Object.create(URLSearchParams.prototype);
    obj = this.setup(obj, constructorArgs, privateData);
    return obj;
  },
  createImpl: function createImpl(constructorArgs, privateData) {
    var obj = Object.create(URLSearchParams.prototype);
    obj = this.setup(obj, constructorArgs, privateData);
    return utils.implForWrapper(obj);
  },
  _internalSetup: function _internalSetup(obj) {},
  setup: function setup(obj, constructorArgs, privateData) {
    if (!privateData) privateData = {};
    privateData.wrapper = obj;

    this._internalSetup(obj);

    Object.defineProperty(obj, impl, {
      value: new Impl.implementation(constructorArgs, privateData),
      writable: false,
      enumerable: false,
      configurable: true
    });
    obj[impl][utils.wrapperSymbol] = obj;

    if (Impl.init) {
      Impl.init(obj[impl], privateData);
    }

    return obj;
  },
  interface: URLSearchParams,
  expose: {
    Window: {
      URLSearchParams: URLSearchParams
    },
    Worker: {
      URLSearchParams: URLSearchParams
    }
  }
};
module.exports = iface;

var Impl = require(".//URLSearchParams-impl.js");
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVSTFNlYXJjaFBhcmFtcy5qcyJdLCJuYW1lcyI6WyJjb252ZXJzaW9ucyIsInJlcXVpcmUiLCJ1dGlscyIsImltcGwiLCJpbXBsU3ltYm9sIiwiSXRlcmF0b3JQcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJuZXh0IiwidmFsdWUiLCJpbnRlcm5hbCIsIml0ZXJJbnRlcm5hbFN5bWJvbCIsInRhcmdldCIsImtpbmQiLCJpbmRleCIsInZhbHVlcyIsIkFycmF5IiwiZnJvbSIsImxlbiIsImxlbmd0aCIsInVuZGVmaW5lZCIsImRvbmUiLCJwYWlyIiwibWFwIiwidHJ5V3JhcHBlckZvckltcGwiLCJrZXkiLCJyZXN1bHQiLCJ3cml0YWJsZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIlVSTFNlYXJjaFBhcmFtcyIsImFyZ3MiLCJpIiwiYXJndW1lbnRzIiwiaXNPYmplY3QiLCJpdGVyYXRvciIsIlR5cGVFcnJvciIsIlYiLCJ0bXAiLCJuZXh0SXRlbSIsImNvbnRleHQiLCJwdXNoIiwiUmVmbGVjdCIsIm93bktleXMiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidHlwZWRLZXkiLCJ0eXBlZFZhbHVlIiwiaWZhY2UiLCJzZXR1cCIsImRlZmluZVByb3BlcnR5IiwicHJvdG90eXBlIiwiZW50cmllcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJpcyIsImNyZWF0ZURlZmF1bHRJdGVyYXRvciIsImZvckVhY2giLCJjYWxsYmFjayIsInRoaXNBcmciLCJwYWlycyIsImNhbGwiLCJhcHBlbmQiLCJuYW1lIiwiZGVsZXRlIiwiXyIsImdldCIsImdldEFsbCIsImhhcyIsInNldCIsInNvcnQiLCJ0b1N0cmluZyIsImtleXMiLCJtaXhlZEludG8iLCJvYmoiLCJJbXBsIiwiaW1wbGVtZW50YXRpb24iLCJpc0ltcGwiLCJ3cmFwcGVyIiwid3JhcHBlckZvckltcGwiLCJjb252ZXJ0IiwiaW1wbEZvcldyYXBwZXIiLCJjb25zdHJ1Y3RvckFyZ3MiLCJwcml2YXRlRGF0YSIsImNyZWF0ZUltcGwiLCJfaW50ZXJuYWxTZXR1cCIsIndyYXBwZXJTeW1ib2wiLCJpbml0IiwiaW50ZXJmYWNlIiwiZXhwb3NlIiwiV2luZG93IiwiV29ya2VyIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7QUFFQSxJQUFNQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxvQkFBRCxDQUEzQjs7QUFDQSxJQUFNQyxLQUFLLEdBQUdELE9BQU8sQ0FBQyxZQUFELENBQXJCOztBQUVBLElBQU1FLElBQUksR0FBR0QsS0FBSyxDQUFDRSxVQUFuQjtBQUVBLElBQU1DLGlCQUFpQixHQUFHQyxNQUFNLENBQUNDLE1BQVAsQ0FBY0wsS0FBSyxDQUFDRyxpQkFBcEI7QUFDeEJHLEVBQUFBLElBQUksRUFBRTtBQUNKQyxJQUFBQSxLQUFLLEVBQUUsU0FBU0QsSUFBVCxHQUFnQjtBQUNyQixVQUFNRSxRQUFRLEdBQUcsS0FBS1IsS0FBSyxDQUFDUyxrQkFBWCxDQUFqQjtBQURxQixVQUViQyxNQUZhLEdBRVdGLFFBRlgsQ0FFYkUsTUFGYTtBQUFBLFVBRUxDLElBRkssR0FFV0gsUUFGWCxDQUVMRyxJQUZLO0FBQUEsVUFFQ0MsS0FGRCxHQUVXSixRQUZYLENBRUNJLEtBRkQ7QUFHckIsVUFBTUMsTUFBTSxHQUFHQyxLQUFLLENBQUNDLElBQU4sQ0FBV0wsTUFBTSxDQUFDVCxJQUFELENBQWpCLENBQWY7QUFDQSxVQUFNZSxHQUFHLEdBQUdILE1BQU0sQ0FBQ0ksTUFBbkI7O0FBQ0EsVUFBSUwsS0FBSyxJQUFJSSxHQUFiLEVBQWtCO0FBQ2hCLGVBQU87QUFBRVQsVUFBQUEsS0FBSyxFQUFFVyxTQUFUO0FBQW9CQyxVQUFBQSxJQUFJLEVBQUU7QUFBMUIsU0FBUDtBQUNEOztBQUVELFVBQU1DLElBQUksR0FBR1AsTUFBTSxDQUFDRCxLQUFELENBQW5CO0FBQ0FKLE1BQUFBLFFBQVEsQ0FBQ0ksS0FBVCxHQUFpQkEsS0FBSyxHQUFHLENBQXpCOztB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LENBQUNZLElBQUwsQ0FBVWIsR0FBRyxDQUFDekUsSUFBRCxDQUFiLEVBQXFCa0YsV0FBckI7QUFDRDs7QUFDRCxXQUFPVCxHQUFQO0FBQ0QsR0E3RVc7QUE4RVpjLEVBQUFBLFNBQVMsRUFBRTFELGVBOUVDO0FBK0VaMkQsRUFBQUEsTUFBTSxFQUFFO0FBQ05DLElBQUFBLE1BQU0sRUFBRTtBQUFFNUQsTUFBQUEsZUFBZSxFQUFmQTtBQUFGLEtBREY7QUFFTjZELElBQUFBLE1BQU0sRUFBRTtBQUFFN0QsTUFBQUEsZUFBZSxFQUFmQTtBQUFGO0FBRkY7QUEvRUksQ0FBZDtBQW9GQXVCLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQk4sS0FBakI7O0FBRUEsSUFBTTJCLElBQUksR0FBRzVFLE9BQU8sQ0FBQyw0QkFBRCxDQUFwQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBjb252ZXJzaW9ucyA9IHJlcXVpcmUoXCJ3ZWJpZGwtY29udmVyc2lvbnNcIik7XG5jb25zdCB1dGlscyA9IHJlcXVpcmUoXCIuL3V0aWxzLmpzXCIpO1xuXG5jb25zdCBpbXBsID0gdXRpbHMuaW1wbFN5bWJvbDtcblxuY29uc3QgSXRlcmF0b3JQcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHV0aWxzLkl0ZXJhdG9yUHJvdG90eXBlLCB7XG4gIG5leHQ6IHtcbiAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIGNvbnN0IGludGVybmFsID0gdGhpc1t1dGlscy5pdGVySW50ZXJuYWxTeW1ib2xdO1xuICAgICAgY29uc3QgeyB0YXJnZXQsIGtpbmQsIGluZGV4IH0gPSBpbnRlcm5hbDtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IEFycmF5LmZyb20odGFyZ2V0W2ltcGxdKTtcbiAgICAgIGNvbnN0IGxlbiA9IHZhbHVlcy5sZW5ndGg7XG4gICAgICBpZiAoaW5kZXggPj0gbGVuKSB7XG4gICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFpciA9IHZhbHVlc1tpbmRleF07XG4gICAgICBpbnRlcm5hbC5pbmRleCA9IGluZGV4ICsgMTtcbiAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHBhaXIubWFwKHV0aWxzLnRyeVdyYXBwZXJGb3JJbXBsKTtcblxuICAgICAgbGV0IHJlc3VsdDtcbiAgICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgICBjYXNlIFwia2V5XCI6XG4gICAgICAgICAgcmVzdWx0ID0ga2V5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidmFsdWVcIjpcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImtleSt2YWx1ZVwiOlxuICAgICAgICAgIHJlc3VsdCA9IFtrZXksIHZhbHVlXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IHZhbHVlOiByZXN1bHQsIGRvbmU6IGZhbHNlIH07XG4gICAgfSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9LFxuICBbU3ltYm9sLnRvU3RyaW5nVGFnXToge1xuICAgIHZhbHVlOiBcIlVSTFNlYXJjaFBhcmFtc0l0ZXJhdG9yXCIsXG4gICAgd3JpdGFibGU6IGZhbHNlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9XG59KTtcblxuZnVuY3Rpb24gVVJMU2VhcmNoUGFyYW1zKCkge1xuICBjb25zdCBhcmdzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAmJiBpIDwgMTsgKytpKSB7XG4gICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgfVxuXG4gIGlmIChhcmdzWzBdICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAodXRpbHMuaXNPYmplY3QoYXJnc1swXSkpIHtcbiAgICAgIGlmIChhcmdzWzBdW1N5bWJvbC5pdGVyYXRvcl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoIXV0aWxzLmlzT2JqZWN0KGFyZ3NbMF0pKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgIFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnVVJMU2VhcmNoUGFyYW1zJzogcGFyYW1ldGVyIDFcIiArIFwiIHNlcXVlbmNlXCIgKyBcIiBpcyBub3QgYW4gaXRlcmFibGUgb2JqZWN0LlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBWID0gW107XG4gICAgICAgICAgY29uc3QgdG1wID0gYXJnc1swXTtcbiAgICAgICAgICBmb3IgKGxldCBuZXh0SXRlbSBvZiB0bXApIHtcbiAgICAgICAgICAgIGlmICghdXRpbHMuaXNPYmplY3QobmV4dEl0ZW0pKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgXCJGYWlsZWQgdG8gY29uc3RydWN0ICdVUkxTZWFyY2hQYXJhbXMnOiBwYXJhbWV0ZXIgMVwiICtcbiAgICAgICAgICAgICAgICAgIFwiIHNlcXVlbmNlXCIgK1xuICAgICAgICAgICAgICAgICAgXCIncyBlbGVtZW50XCIgK1xuICAgICAgICAgICAgICAgICAgXCIgaXMgbm90IGFuIGl0ZXJhYmxlIG9iamVjdC5cIlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgViA9IFtdO1xuICAgICAgICAgICAgICBjb25zdCB0bXAgPSBuZXh0SXRlbTtcbiAgICAgICAgICAgICAgZm9yIChsZXQgbmV4dEl0ZW0gb2YgdG1wKSB7XG4gICAgICAgICAgICAgICAgbmV4dEl0ZW0gPSBjb252ZXJzaW9uc1tcIlVTVlN0cmluZ1wiXShuZXh0SXRlbSwge1xuICAgICAgICAgICAgICAgICAgY29udGV4dDpcbiAgICAgICAgICAgICAgICAgICAgXCJGYWlsZWQgdG8gY29uc3RydWN0ICdVUkxTZWFyY2hQYXJhbXMnOiBwYXJhbWV0ZXIgMVwiICsgXCIgc2VxdWVuY2VcIiArIFwiJ3MgZWxlbWVudFwiICsgXCIncyBlbGVtZW50XCJcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIFYucHVzaChuZXh0SXRlbSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbmV4dEl0ZW0gPSBWO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBWLnB1c2gobmV4dEl0ZW0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhcmdzWzBdID0gVjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF1dGlscy5pc09iamVjdChhcmdzWzBdKSkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdVUkxTZWFyY2hQYXJhbXMnOiBwYXJhbWV0ZXIgMVwiICsgXCIgcmVjb3JkXCIgKyBcIiBpcyBub3QgYW4gb2JqZWN0LlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFJlZmxlY3Qub3duS2V5cyhhcmdzWzBdKSkge1xuICAgICAgICAgICAgY29uc3QgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYXJnc1swXSwga2V5KTtcbiAgICAgICAgICAgIGlmIChkZXNjICYmIGRlc2MuZW51bWVyYWJsZSkge1xuICAgICAgICAgICAgICBsZXQgdHlwZWRLZXkgPSBrZXk7XG4gICAgICAgICAgICAgIGxldCB0eXBlZFZhbHVlID0gYXJnc1swXVtrZXldO1xuXG4gICAgICAgICAgICAgIHR5cGVkS2V5ID0gY29udmVyc2lvbnNbXCJVU1ZTdHJpbmdcIl0odHlwZWRLZXksIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1VSTFNlYXJjaFBhcmFtcyc6IHBhcmFtZXRlciAxXCIgKyBcIiByZWNvcmRcIiArIFwiJ3Mga2V5XCJcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgdHlwZWRWYWx1ZSA9IGNvbnZlcnNpb25zW1wiVVNWU3RyaW5nXCJdKHR5cGVkVmFsdWUsIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1VSTFNlYXJjaFBhcmFtcyc6IHBhcmFtZXRlciAxXCIgKyBcIiByZWNvcmRcIiArIFwiJ3MgdmFsdWVcIlxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICByZXN1bHRbdHlwZWRLZXldID0gdHlwZWRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYXJnc1swXSA9IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhcmdzWzBdID0gY29udmVyc2lvbnNbXCJVU1ZTdHJpbmdcIl0oYXJnc1swXSwgeyBjb250ZXh0OiBcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1VSTFNlYXJjaFBhcmFtcyc6IHBhcmFtZXRlciAxXCIgfSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGFyZ3NbMF0gPSBcIlwiO1xuICB9XG5cbiAgaWZhY2Uuc2V0dXAodGhpcywgYXJncyk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShVUkxTZWFyY2hQYXJhbXMsIFwicHJvdG90eXBlXCIsIHtcbiAgdmFsdWU6IFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUsXG4gIHdyaXRhYmxlOiBmYWxzZSxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGNvbmZpZ3VyYWJsZTogZmFsc2Vcbn0pO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZSwgU3ltYm9sLml0ZXJhdG9yLCB7XG4gIHdyaXRhYmxlOiB0cnVlLFxuICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgY29uZmlndXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogZnVuY3Rpb24gZW50cmllcygpIHtcbiAgICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSWxsZWdhbCBpbnZvY2F0aW9uXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHMuY3JlYXRlRGVmYXVsdEl0ZXJhdG9yKHRoaXMsIFwia2V5K3ZhbHVlXCIpO1xuICB9XG59KTtcblVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2spIHtcbiAgaWYgKCF0aGlzIHx8ICFtb2R1bGUuZXhwb3J0cy5pcyh0aGlzKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gIH1cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ2ZvckVhY2gnIG9uICdVUkxTZWFyY2hQYXJhbXMnOiAxIGFyZ3VtZW50IHJlcXVpcmVkLCBcIiArIFwiYnV0IG9ubHkgMCBwcmVzZW50LlwiXG4gICAgKTtcbiAgfVxuICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgXCJGYWlsZWQgdG8gZXhlY3V0ZSAnZm9yRWFjaCcgb24gJ1VSTFNlYXJjaFBhcmFtcyc6IFRoZSBjYWxsYmFjayBwcm92aWRlZCBcIiArIFwiYXMgcGFyYW1ldGVyIDEgaXMgbm90IGEgZnVuY3Rpb24uXCJcbiAgICApO1xuICB9XG4gIGNvbnN0IHRoaXNBcmcgPSBhcmd1bWVudHNbMV07XG4gIGxldCBwYWlycyA9IEFycmF5LmZyb20odGhpc1tpbXBsXSk7XG4gIGxldCBpID0gMDtcbiAgd2hpbGUgKGkgPCBwYWlycy5sZW5ndGgpIHtcbiAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBwYWlyc1tpXS5tYXAodXRpbHMudHJ5V3JhcHBlckZvckltcGwpO1xuICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWUsIGtleSwgdGhpcyk7XG4gICAgcGFpcnMgPSBBcnJheS5mcm9tKHRoaXNbaW1wbF0pO1xuICAgIGkrKztcbiAgfVxufTtcblVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24gYXBwZW5kKG5hbWUsIHZhbHVlKSB7XG4gIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSWxsZWdhbCBpbnZvY2F0aW9uXCIpO1xuICB9XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ2FwcGVuZCcgb24gJ1VSTFNlYXJjaFBhcmFtcyc6IDIgXCIgK1xuICAgICAgICBcImFyZ3VtZW50cyByZXF1aXJlZCwgYnV0IG9ubHkgXCIgK1xuICAgICAgICBhcmd1bWVudHMubGVuZ3RoICtcbiAgICAgICAgXCIgcHJlc2VudC5cIlxuICAgICk7XG4gIH1cblxuICBjb25zdCBhcmdzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAmJiBpIDwgMjsgKytpKSB7XG4gICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgfVxuXG4gIGFyZ3NbMF0gPSBjb252ZXJzaW9uc1tcIlVTVlN0cmluZ1wiXShhcmdzWzBdLCB7XG4gICAgY29udGV4dDogXCJGYWlsZWQgdG8gZXhlY3V0ZSAnYXBwZW5kJyBvbiAnVVJMU2VhcmNoUGFyYW1zJzogcGFyYW1ldGVyIDFcIlxuICB9KTtcblxuICBhcmdzWzFdID0gY29udmVyc2lvbnNbXCJVU1ZTdHJpbmdcIl0oYXJnc1sxXSwge1xuICAgIGNvbnRleHQ6IFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ2FwcGVuZCcgb24gJ1VSTFNlYXJjaFBhcmFtcyc6IHBhcmFtZXRlciAyXCJcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXNbaW1wbF0uYXBwZW5kKC4uLmFyZ3MpO1xufTtcblxuVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiBfKG5hbWUpIHtcbiAgaWYgKCF0aGlzIHx8ICFtb2R1bGUuZXhwb3J0cy5pcyh0aGlzKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gIH1cblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgXCJGYWlsZWQgdG8gZXhlY3V0ZSAnZGVsZXRlJyBvbiAnVVJMU2VhcmNoUGFyYW1zJzogMSBcIiArXG4gICAgICAgIFwiYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IFwiICtcbiAgICAgICAgYXJndW1lbnRzLmxlbmd0aCArXG4gICAgICAgIFwiIHByZXNlbnQuXCJcbiAgICApO1xuICB9XG5cbiAgY29uc3QgYXJncyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGggJiYgaSA8IDE7ICsraSkge1xuICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gIH1cblxuICBhcmdzWzBdID0gY29udmVyc2lvbnNbXCJVU1ZTdHJpbmdcIl0oYXJnc1swXSwge1xuICAgIGNvbnRleHQ6IFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ2RlbGV0ZScgb24gJ1VSTFNlYXJjaFBhcmFtcyc6IHBhcmFtZXRlciAxXCJcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXNbaW1wbF0uZGVsZXRlKC4uLmFyZ3MpO1xufTtcblxuVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQobmFtZSkge1xuICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgaW52b2NhdGlvblwiKTtcbiAgfVxuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBcIkZhaWxlZCB0byBleGVjdXRlICdnZXQnIG9uICdVUkxTZWFyY2hQYXJhbXMnOiAxIFwiICtcbiAgICAgICAgXCJhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgXCIgK1xuICAgICAgICBhcmd1bWVudHMubGVuZ3RoICtcbiAgICAgICAgXCIgcHJlc2VudC5cIlxuICAgICk7XG4gIH1cblxuICBjb25zdCBhcmdzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAmJiBpIDwgMTsgKytpKSB7XG4gICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgfVxuXG4gIGFyZ3NbMF0gPSBjb252ZXJzaW9uc1tcIlVTVlN0cmluZ1wiXShhcmdzWzBdLCB7IGNvbnRleHQ6IFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ2dldCcgb24gJ1VSTFNlYXJjaFBhcmFtcyc6IHBhcmFtZXRlciAxXCIgfSk7XG5cbiAgcmV0dXJuIHRoaXNbaW1wbF0uZ2V0KC4uLmFyZ3MpO1xufTtcblxuVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbiBnZXRBbGwobmFtZSkge1xuICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgaW52b2NhdGlvblwiKTtcbiAgfVxuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBcIkZhaWxlZCB0byBleGVjdXRlICdnZXRBbGwnIG9uICdVUkxTZWFyY2hQYXJhbXMnOiAxIFwiICtcbiAgICAgICAgXCJhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgXCIgK1xuICAgICAgICBhcmd1bWVudHMubGVuZ3RoICtcbiAgICAgICAgXCIgcHJlc2VudC5cIlxuICAgICk7XG4gIH1cblxuICBjb25zdCBhcmdzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAmJiBpIDwgMTsgKytpKSB7XG4gICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgfVxuXG4gIGFyZ3NbMF0gPSBjb252ZXJzaW9uc1tcIlVTVlN0cmluZ1wiXShhcmdzWzBdLCB7XG4gICAgY29udGV4dDogXCJGYWlsZWQgdG8gZXhlY3V0ZSAnZ2V0QWxsJyBvbiAnVVJMU2VhcmNoUGFyYW1zJzogcGFyYW1ldGVyIDFcIlxuICB9KTtcblxuICByZXR1cm4gdXRpbHMudHJ5V3JhcHBlckZvckltcGwodGhpc1tpbXBsXS5nZXRBbGwoLi4uYXJncykpO1xufTtcblxuVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiBoYXMobmFtZSkge1xuICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgaW52b2NhdGlvblwiKTtcbiAgfVxuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBcIkZhaWxlZCB0byBleGVjdXRlICdoYXMnIG9uICdVUkxTZWFyY2hQYXJhbXMnOiAxIFwiICtcbiAgICAgICAgXCJhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgXCIgK1xuICAgICAgICBhcmd1bWVudHMubGVuZ3RoICtcbiAgICAgICAgXCIgcHJlc2VudC5cIlxuICAgICk7XG4gIH1cblxuICBjb25zdCBhcmdzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAmJiBpIDwgMTsgKytpKSB7XG4gICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgfVxuXG4gIGFyZ3NbMF0gPSBjb252ZXJzaW9uc1tcIlVTVlN0cmluZ1wiXShhcmdzWzBdLCB7IGNvbnRleHQ6IFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ2hhcycgb24gJ1VSTFNlYXJjaFBhcmFtcyc6IHBhcmFtZXRlciAxXCIgfSk7XG5cbiAgcmV0dXJuIHRoaXNbaW1wbF0uaGFzKC4uLmFyZ3MpO1xufTtcblxuVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQobmFtZSwgdmFsdWUpIHtcbiAgaWYgKCF0aGlzIHx8ICFtb2R1bGUuZXhwb3J0cy5pcyh0aGlzKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gIH1cblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgXCJGYWlsZWQgdG8gZXhlY3V0ZSAnc2V0JyBvbiAnVVJMU2VhcmNoUGFyYW1zJzogMiBcIiArXG4gICAgICAgIFwiYXJndW1lbnRzIHJlcXVpcmVkLCBidXQgb25seSBcIiArXG4gICAgICAgIGFyZ3VtZW50cy5sZW5ndGggK1xuICAgICAgICBcIiBwcmVzZW50LlwiXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGFyZ3MgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoICYmIGkgPCAyOyArK2kpIHtcbiAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICB9XG5cbiAgYXJnc1swXSA9IGNvbnZlcnNpb25zW1wiVVNWU3RyaW5nXCJdKGFyZ3NbMF0sIHsgY29udGV4dDogXCJGYWlsZWQgdG8gZXhlY3V0ZSAnc2V0JyBvbiAnVVJMU2VhcmNoUGFyYW1zJzogcGFyYW1ldGVyIDFcIiB9KTtcblxuICBhcmdzWzFdID0gY29udmVyc2lvbnNbXCJVU1ZTdHJpbmdcIl0oYXJnc1sxXSwgeyBjb250ZXh0OiBcIkZhaWxlZCB0byBleGVjdXRlICdzZXQnIG9uICdVUkxTZWFyY2hQYXJhbXMnOiBwYXJhbWV0ZXIgMlwiIH0pO1xuXG4gIHJldHVybiB0aGlzW2ltcGxdLnNldCguLi5hcmdzKTtcbn07XG5cblVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uIHNvcnQoKSB7XG4gIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSWxsZWdhbCBpbnZvY2F0aW9uXCIpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXNbaW1wbF0uc29ydCgpO1xufTtcblxuVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgaW52b2NhdGlvblwiKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzW2ltcGxdLnRvU3RyaW5nKCk7XG59O1xuXG5VUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmVudHJpZXMgPSBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl07XG5cblVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uIGtleXMoKSB7XG4gIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSWxsZWdhbCBpbnZvY2F0aW9uXCIpO1xuICB9XG4gIHJldHVybiBtb2R1bGUuZXhwb3J0cy5jcmVhdGVEZWZhdWx0SXRlcmF0b3IodGhpcywgXCJrZXlcIik7XG59O1xuXG5VUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uIHZhbHVlcygpIHtcbiAgaWYgKCF0aGlzIHx8ICFtb2R1bGUuZXhwb3J0cy5pcyh0aGlzKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gIH1cbiAgcmV0dXJuIG1vZHVsZS5leHBvcnRzLmNyZWF0ZURlZmF1bHRJdGVyYXRvcih0aGlzLCBcInZhbHVlXCIpO1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywge1xuICB2YWx1ZTogXCJVUkxTZWFyY2hQYXJhbXNcIixcbiAgd3JpdGFibGU6IGZhbHNlLFxuICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgY29uZmlndXJhYmxlOiB0cnVlXG59KTtcblxuY29uc3QgaWZhY2UgPSB7XG4gIG1peGVkSW50bzogW10sXG4gIGlzKG9iaikge1xuICAgIGlmIChvYmopIHtcbiAgICAgIGlmIChvYmpbaW1wbF0gaW5zdGFuY2VvZiBJbXBsLmltcGxlbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb2R1bGUuZXhwb3J0cy5taXhlZEludG8ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIG1vZHVsZS5leHBvcnRzLm1peGVkSW50b1tpXSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcbiAgaXNJbXBsKG9iaikge1xuICAgIGlmIChvYmopIHtcbiAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBJbXBsLmltcGxlbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB3cmFwcGVyID0gdXRpbHMud3JhcHBlckZvckltcGwob2JqKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kdWxlLmV4cG9ydHMubWl4ZWRJbnRvLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmICh3cmFwcGVyIGluc3RhbmNlb2YgbW9kdWxlLmV4cG9ydHMubWl4ZWRJbnRvW2ldKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuICBjb252ZXJ0KG9iaiwgeyBjb250ZXh0ID0gXCJUaGUgcHJvdmlkZWQgdmFsdWVcIiB9ID0ge30pIHtcbiAgICBpZiAobW9kdWxlLmV4cG9ydHMuaXMob2JqKSkge1xuICAgICAgcmV0dXJuIHV0aWxzLmltcGxGb3JXcmFwcGVyKG9iaik7XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7Y29udGV4dH0gaXMgbm90IG9mIHR5cGUgJ1VSTFNlYXJjaFBhcmFtcycuYCk7XG4gIH0sXG5cbiAgY3JlYXRlRGVmYXVsdEl0ZXJhdG9yKHRhcmdldCwga2luZCkge1xuICAgIGNvbnN0IGl0ZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGl0ZXJhdG9yLCB1dGlscy5pdGVySW50ZXJuYWxTeW1ib2wsIHtcbiAgICAgIHZhbHVlOiB7IHRhcmdldCwga2luZCwgaW5kZXg6IDAgfSxcbiAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIGl0ZXJhdG9yO1xuICB9LFxuXG4gIGNyZWF0ZShjb25zdHJ1Y3RvckFyZ3MsIHByaXZhdGVEYXRhKSB7XG4gICAgbGV0IG9iaiA9IE9iamVjdC5jcmVhdGUoVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZSk7XG4gICAgb2JqID0gdGhpcy5zZXR1cChvYmosIGNvbnN0cnVjdG9yQXJncywgcHJpdmF0ZURhdGEpO1xuICAgIHJldHVybiBvYmo7XG4gIH0sXG4gIGNyZWF0ZUltcGwoY29uc3RydWN0b3JBcmdzLCBwcml2YXRlRGF0YSkge1xuICAgIGxldCBvYmogPSBPYmplY3QuY3JlYXRlKFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUpO1xuICAgIG9iaiA9IHRoaXMuc2V0dXAob2JqLCBjb25zdHJ1Y3RvckFyZ3MsIHByaXZhdGVEYXRhKTtcbiAgICByZXR1cm4gdXRpbHMuaW1wbEZvcldyYXBwZXIob2JqKTtcbiAgfSxcbiAgX2ludGVybmFsU2V0dXAob2JqKSB7fSxcbiAgc2V0dXAob2JqLCBjb25zdHJ1Y3RvckFyZ3MsIHByaXZhdGVEYXRhKSB7XG4gICAgaWYgKCFwcml2YXRlRGF0YSkgcHJpdmF0ZURhdGEgPSB7fTtcblxuICAgIHByaXZhdGVEYXRhLndyYXBwZXIgPSBvYmo7XG5cbiAgICB0aGlzLl9pbnRlcm5hbFNldHVwKG9iaik7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgaW1wbCwge1xuICAgICAgdmFsdWU6IG5ldyBJbXBsLmltcGxlbWVudGF0aW9uKGNvbnN0cnVjdG9yQXJncywgcHJpdmF0ZURhdGEpLFxuICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcblxuICAgIG9ialtpbXBsXVt1dGlscy53cmFwcGVyU3ltYm9sXSA9IG9iajtcbiAgICBpZiAoSW1wbC5pbml0KSB7XG4gICAgICBJbXBsLmluaXQob2JqW2ltcGxdLCBwcml2YXRlRGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH0sXG4gIGludGVyZmFjZTogVVJMU2VhcmNoUGFyYW1zLFxuICBleHBvc2U6IHtcbiAgICBXaW5kb3c6IHsgVVJMU2VhcmNoUGFyYW1zIH0sXG4gICAgV29ya2VyOiB7IFVSTFNlYXJjaFBhcmFtcyB9XG4gIH1cbn07IC8vIGlmYWNlXG5tb2R1bGUuZXhwb3J0cyA9IGlmYWNlO1xuXG5jb25zdCBJbXBsID0gcmVxdWlyZShcIi4vL1VSTFNlYXJjaFBhcmFtcy1pbXBsLmpzXCIpO1xuIl19