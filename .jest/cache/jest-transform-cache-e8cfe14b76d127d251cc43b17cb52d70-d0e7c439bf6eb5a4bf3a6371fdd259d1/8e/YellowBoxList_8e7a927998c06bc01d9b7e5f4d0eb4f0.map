{"version":3,"sources":["YellowBoxList.js"],"names":["Dimensions","require","React","FlatList","SafeAreaView","StyleSheet","View","YellowBoxButton","YellowBoxInspector","YellowBoxListRow","YellowBoxStyle","VIEWPORT_RATIO","MAX_ITEMS","Math","floor","get","height","GUTTER","HEIGHT","YellowBoxList","state","selectedCategory","_handleInspectorDismiss","category","setState","props","onDismiss","_handleInspectorMinimize","_handleRowPress","selectedWarnings","registry","absoluteFill","items","warnings","unshift","listStyle","min","length","styles","list","dismissAll","bottom","left","right","top","onDismissAll","item","safeArea","Component","create","position","width","flexDirection","justifyContent","paddingBottom","paddingEnd","backgroundColor","getBackgroundColor","marginTop","hairlineWidth","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\n'use strict';\n\nconst Dimensions = require('../../Utilities/Dimensions');\nconst React = require('react');\nconst FlatList = require('../../Lists/FlatList');\nconst SafeAreaView = require('../../Components/SafeAreaView/SafeAreaView');\nconst StyleSheet = require('../../StyleSheet/StyleSheet');\nconst View = require('../../Components/View/View');\nconst YellowBoxButton = require('./YellowBoxButton');\nconst YellowBoxInspector = require('./YellowBoxInspector');\nconst YellowBoxListRow = require('./YellowBoxListRow');\nconst YellowBoxStyle = require('./YellowBoxStyle');\n\nimport type {Category} from '../Data/YellowBoxCategory';\nimport type {Registry} from '../Data/YellowBoxRegistry';\n\ntype Props = $ReadOnly<{|\n  onDismiss: (category: Category) => void,\n  onDismissAll: () => void,\n  registry: Registry,\n|}>;\n\ntype State = {|\n  selectedCategory: ?Category,\n|};\n\nconst VIEWPORT_RATIO = 0.5;\nconst MAX_ITEMS = Math.floor(\n  (Dimensions.get('window').height * VIEWPORT_RATIO) /\n    (YellowBoxListRow.GUTTER + YellowBoxListRow.HEIGHT),\n);\n\nclass YellowBoxList extends React.Component<Props, State> {\n  state = {\n    selectedCategory: null,\n  };\n\n  render(): React.Node {\n    const selectedWarnings =\n      this.state.selectedCategory == null\n        ? null\n        : this.props.registry.get(this.state.selectedCategory);\n\n    if (selectedWarnings != null) {\n      return (\n        <View style={StyleSheet.absoluteFill}>\n          <YellowBoxInspector\n            onDismiss={this._handleInspectorDismiss}\n            onMinimize={this._handleInspectorMinimize}\n            warnings={selectedWarnings}\n          />\n        </View>\n      );\n    }\n\n    const items = [];\n    for (const [category, warnings] of this.props.registry) {\n      items.unshift({category, warnings});\n    }\n\n    const listStyle = {\n      height:\n        // Additional `0.5` so the (N + 1)th row can peek into view.\n        Math.min(items.length, MAX_ITEMS + 0.5) *\n        (YellowBoxListRow.GUTTER + YellowBoxListRow.HEIGHT),\n    };\n\n    return items.length === 0 ? null : (\n      <View style={styles.list}>\n        <View pointerEvents=\"box-none\" style={styles.dismissAll}>\n          <YellowBoxButton\n            hitSlop={{bottom: 4, left: 4, right: 4, top: 4}}\n            label=\"Dismiss All\"\n            onPress={this.props.onDismissAll}\n          />\n        </View>\n        <FlatList\n          data={items}\n          keyExtractor={item => item.category}\n          renderItem={({item}) => (\n            <YellowBoxListRow {...item} onPress={this._handleRowPress} />\n          )}\n          scrollEnabled={items.length > MAX_ITEMS}\n          scrollsToTop={false}\n          style={listStyle}\n        />\n        <SafeAreaView style={styles.safeArea} />\n      </View>\n    );\n  }\n\n  _handleInspectorDismiss = () => {\n    const category = this.state.selectedCategory;\n    if (category == null) {\n      return;\n    }\n    this.setState({selectedCategory: null}, () => {\n      this.props.onDismiss(category);\n    });\n  };\n\n  _handleInspectorMinimize = () => {\n    this.setState({selectedCategory: null});\n  };\n\n  _handleRowPress = (category: Category) => {\n    this.setState({selectedCategory: category});\n  };\n}\n\nconst styles = StyleSheet.create({\n  list: {\n    bottom: 0,\n    position: 'absolute',\n    width: '100%',\n  },\n  dismissAll: {\n    bottom: '100%',\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    paddingBottom: 4,\n    paddingEnd: 4,\n    position: 'absolute',\n    width: '100%',\n  },\n  safeArea: {\n    backgroundColor: YellowBoxStyle.getBackgroundColor(0.95),\n    marginTop: StyleSheet.hairlineWidth,\n  },\n});\n\nmodule.exports = YellowBoxList;\n"]}