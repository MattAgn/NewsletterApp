{"version":3,"sources":["YellowBoxInspector.js"],"names":["Platform","require","React","ScrollView","StyleSheet","Text","View","YellowBoxCategory","YellowBoxInspectorFooter","YellowBoxInspectorHeader","YellowBoxInspectorSourceMapStatus","YellowBoxInspectorStackFrame","YellowBoxStyle","openFileInEditor","YellowBoxInspector","state","selectedIndex","_handleRetrySymbolication","_cancelSymbolication","forceUpdate","warning","props","warnings","_symbolication","retrySymbolicate","_handleSelectIndex","setState","styles","root","bodyContent","body","bodyHeading","bodyHeadingText","bodyText","render","message","substitutionText","bodySection","symbolicated","status","getAvailableStack","map","frame","index","file","lineNumber","onDismiss","onMinimize","_handleSymbolication","prevProps","prevState","symbolicate","abort","Component","create","elevation","OS","Number","MAX_SAFE_INTEGER","undefined","height","backgroundColor","getBackgroundColor","borderBottomColor","getDividerColor","borderBottomWidth","hairlineWidth","borderTopColor","borderTopWidth","flex","paddingVertical","alignItems","flexDirection","marginBottom","paddingHorizontal","color","getTextColor","fontSize","fontWeight","includeFontPadding","lineHeight","marginTop","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\n'use strict';\n\nconst Platform = require('../../Utilities/Platform');\nconst React = require('react');\nconst ScrollView = require('../../Components/ScrollView/ScrollView');\nconst StyleSheet = require('../../StyleSheet/StyleSheet');\nconst Text = require('../../Text/Text');\nconst View = require('../../Components/View/View');\nconst YellowBoxCategory = require('../Data/YellowBoxCategory');\nconst YellowBoxInspectorFooter = require('./YellowBoxInspectorFooter');\nconst YellowBoxInspectorHeader = require('./YellowBoxInspectorHeader');\nconst YellowBoxInspectorSourceMapStatus = require('./YellowBoxInspectorSourceMapStatus');\nconst YellowBoxInspectorStackFrame = require('./YellowBoxInspectorStackFrame');\nconst YellowBoxStyle = require('./YellowBoxStyle');\n\nconst openFileInEditor = require('../../Core/Devtools/openFileInEditor');\n\nimport type YellowBoxWarning from '../Data/YellowBoxWarning';\nimport type {SymbolicationRequest} from '../Data/YellowBoxWarning';\n\ntype Props = $ReadOnly<{|\n  onDismiss: () => void,\n  onMinimize: () => void,\n  warnings: $ReadOnlyArray<YellowBoxWarning>,\n|}>;\n\ntype State = {|\n  selectedIndex: number,\n|};\n\nclass YellowBoxInspector extends React.Component<Props, State> {\n  _symbolication: ?SymbolicationRequest;\n\n  state = {\n    selectedIndex: 0,\n  };\n\n  render(): React.Node {\n    const {warnings} = this.props;\n    const {selectedIndex} = this.state;\n\n    const warning = warnings[selectedIndex];\n\n    return (\n      <View style={styles.root}>\n        <YellowBoxInspectorHeader\n          onSelectIndex={this._handleSelectIndex}\n          selectedIndex={selectedIndex}\n          warnings={warnings}\n        />\n        <ScrollView\n          contentContainerStyle={styles.bodyContent}\n          key={selectedIndex}\n          style={styles.body}>\n          <View>\n            <View style={styles.bodyHeading}>\n              <Text style={styles.bodyHeadingText}>Warning</Text>\n            </View>\n            <Text style={styles.bodyText}>\n              {YellowBoxCategory.render(\n                warning.message,\n                styles.substitutionText,\n              )}\n            </Text>\n          </View>\n          <View style={styles.bodySection}>\n            <View style={styles.bodyHeading}>\n              <Text style={styles.bodyHeadingText}>Stack</Text>\n              <YellowBoxInspectorSourceMapStatus\n                onPress={\n                  warning.symbolicated.status === 'FAILED'\n                    ? this._handleRetrySymbolication\n                    : null\n                }\n                status={warning.symbolicated.status}\n              />\n            </View>\n            {warning.getAvailableStack().map((frame, index) => (\n              <YellowBoxInspectorStackFrame\n                key={index}\n                frame={frame}\n                onPress={\n                  warning.symbolicated.status === 'COMPLETE'\n                    ? () => {\n                        openFileInEditor(frame.file, frame.lineNumber);\n                      }\n                    : null\n                }\n              />\n            ))}\n          </View>\n        </ScrollView>\n        <YellowBoxInspectorFooter\n          onDismiss={this.props.onDismiss}\n          onMinimize={this.props.onMinimize}\n        />\n      </View>\n    );\n  }\n\n  componentDidMount(): void {\n    this._handleSymbolication();\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State): void {\n    if (\n      prevProps.warnings !== this.props.warnings ||\n      prevState.selectedIndex !== this.state.selectedIndex\n    ) {\n      this._cancelSymbolication();\n      this._handleSymbolication();\n    }\n  }\n\n  componentWillUnmount(): void {\n    this._cancelSymbolication();\n  }\n\n  _handleRetrySymbolication = () => {\n    this._cancelSymbolication();\n    this.forceUpdate(() => {\n      const warning = this.props.warnings[this.state.selectedIndex];\n      this._symbolication = warning.retrySymbolicate(() => {\n        this.forceUpdate();\n      });\n    });\n  };\n\n  _handleSymbolication(): void {\n    const warning = this.props.warnings[this.state.selectedIndex];\n    if (warning.symbolicated.status !== 'COMPLETE') {\n      this._symbolication = warning.symbolicate(() => {\n        this.forceUpdate();\n      });\n    }\n  }\n\n  _cancelSymbolication(): void {\n    if (this._symbolication != null) {\n      this._symbolication.abort();\n      this._symbolication = null;\n    }\n  }\n\n  _handleSelectIndex = (selectedIndex: number): void => {\n    this.setState({selectedIndex});\n  };\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    elevation: Platform.OS === 'android' ? Number.MAX_SAFE_INTEGER : undefined,\n    height: '100%',\n  },\n  body: {\n    backgroundColor: YellowBoxStyle.getBackgroundColor(0.95),\n    borderBottomColor: YellowBoxStyle.getDividerColor(0.95),\n    borderBottomWidth: StyleSheet.hairlineWidth,\n    borderTopColor: YellowBoxStyle.getDividerColor(0.95),\n    borderTopWidth: StyleSheet.hairlineWidth,\n    flex: 1,\n  },\n  bodyContent: {\n    paddingVertical: 12,\n  },\n  bodyHeading: {\n    alignItems: 'center',\n    flexDirection: 'row',\n    marginBottom: 6,\n    paddingHorizontal: 12,\n  },\n  bodyHeadingText: {\n    color: YellowBoxStyle.getTextColor(1),\n    flex: 1,\n    fontSize: 20,\n    fontWeight: '600',\n    includeFontPadding: false,\n    lineHeight: 28,\n  },\n  bodyText: {\n    color: YellowBoxStyle.getTextColor(1),\n    fontSize: 14,\n    includeFontPadding: false,\n    lineHeight: 18,\n    paddingHorizontal: 12,\n  },\n  substitutionText: {\n    color: YellowBoxStyle.getTextColor(0.6),\n  },\n  bodySection: {\n    marginTop: 20,\n  },\n});\n\nmodule.exports = YellowBoxInspector;\n"]}