e8d637178e18a33d82fe94e8cfcc213e
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var Platform = require('../../Utilities/Platform');

var React = require('react');

var ScrollView = require('../../Components/ScrollView/ScrollView');

var StyleSheet = require('../../StyleSheet/StyleSheet');

var Text = require('../../Text/Text');

var View = require('../../Components/View/View');

var YellowBoxCategory = require('../Data/YellowBoxCategory');

var YellowBoxInspectorFooter = require('./YellowBoxInspectorFooter');

var YellowBoxInspectorHeader = require('./YellowBoxInspectorHeader');

var YellowBoxInspectorSourceMapStatus = require('./YellowBoxInspectorSourceMapStatus');

var YellowBoxInspectorStackFrame = require('./YellowBoxInspectorStackFrame');

var YellowBoxStyle = require('./YellowBoxStyle');

var openFileInEditor = require('../../Core/Devtools/openFileInEditor');

var YellowBoxInspector = function (_React$Component) {
  (0, _inherits2.default)(YellowBoxInspector, _React$Component);

  function YellowBoxInspector() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2.default)(this, YellowBoxInspector);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(YellowBoxInspector)).call.apply(_getPrototypeOf2, [this].concat(args)));
    _this.state = {
      selectedIndex: 0
    };

    _this._handleRetrySymbolication = function () {
      _this._cancelSymbolication();

      _this.forceUpdate(function () {
        var warning = _this.props.warnings[_this.state.selectedIndex];
        _this._symbolication = warning.retrySymbolicate(function () {
          _this.forceUpdate();
        });
      });
    };

    _this._handleSelectIndex = function (selectedIndex) {
      _this.setState({
        selectedIndex: selectedIndex
      });
    };

    return _this;
  }

  (0, _createClass2.default)(YellowBoxInspector, [{
    key: "render",
    value: function render() {
      var warnings = this.props.warnings;
      var selectedIndex = this.state.selectedIndex;
      var warning = warnings[selectedIndex];
      return React.createElement(View, {
        style: styles.root
      }, React.createElement(YellowBoxInspectorHeader, {
        onSelectIndex: this._handleSelectIndex,
        selectedIndex: selectedIndex,
        warnings: warnings
      }), React.createElement(ScrollView, {
        contentContainerStyle: styles.bodyContent,
        key: selectedIndex,
        style: styles.body
      }, React.createElement(View, null, React.createElement(View, {
        style: styles.bodyHeading
      }, React.createElement(Text, {
        style: styles.bodyHeadingText
      }, "Warning")), React.createElement(Text, {
        style: styles.bodyText
      }, YellowBoxCategory.render(warning.message, styles.substitutionText))), React.createElement(View, {
        style: styles.bodySection
      }, React.createElement(View, {
        style: styles.bodyHeading
      }, React.createElement(Text, {
        style: styles.bodyHeadingText
      }, "Stack"), React.createElement(YellowBoxInspectorSourceMapStatus, {
        onPress: warning.symbolicated.status === 'FAILED' ? this._handleRetrySymbolication : null,
        status: warning.symbolicated.status
      })), warning.getAvailableStack().map(function (frame, index) {
        return React.createElement(YellowBoxInspectorStackFrame, {
          key: index,
          frame: frame,
          onPress: warning.symbolicated.status === 'COMPLETE' ? function () {
            openFileInEditor(frame.file, frame.lineNumber);
          } : null
        });
      }))), React.createElement(YellowBoxInspectorFooter, {
        onDismiss: this.props.onDismiss,
        onMinimize: this.props.onMinimize
      }));
    }
  }, {
    key: "componentDidMount",
    value: function componentDidMount() {
      this._handleSymbolication();
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps, prevState) {
      if (prevProps.warnings !== this.props.warnings || prevState.selectedIndex !== this.state.selectedIndex) {
        this._cancelSymbolication();

        this._handleSymbolication();
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this._cancelSymbolication();
    }
  }, {
    key: "_handleSymbolication",
    value: function _handleSymbolication() {
      var _this2 = this;

      var warning = this.props.warnings[this.state.selectedIndex];

      if (warning.symbolicated.status !== 'COMPLETE') {
        this._symbolication = warning.symbolicate(function () {
          _this2.forceUpdate();
        });
      }
    }
  }, {
    key: "_cancelSymbolication",
    value: function _cancelSymbolication() {
      if (this._symbolication != null) {
        this._symbolication.abort();

        this._symbolication = null;
      }
    }
  }]);
  return YellowBoxInspector;
}(React.Component);

var styles = StyleSheet.create({
  root: {
    elevation: Platform.OS === 'android' ? Number.MAX_SAFE_INTEGER : undefined,
    height: '100%'
  },
  body: {
    backgroundColor: YellowBoxStyle.getBackgroundColor(0.95),
    borderBottomColor: YellowBoxStyle.getDividerColor(0.95),
    borderBottomWidth: StyleSheet.hairlineWidth,
    borderTopColor: YellowBoxStyle.getDividerColor(0.95),
    borderTopWidth: StyleSheet.hairlineWidth,
    flex: 1
  },
  bodyContent: {
    paddingVertical: 12
  },
  bodyHeading: {
    alignItems: 'center',
    flexDirection: 'row',
    marginBottom: 6,
    paddingHorizontal: 12
  },
  bodyHeadingText: {
    color: YellowBoxStyle.getTextColor(1),
    flex: 1,
    fontSize: 20,
    fontWeight: '600',
    includeFontPadding: false,
    lineHeight: 28
  },
  bodyText: {
    color: YellowBoxStyle.getTextColor(1),
    fontSize: 14,
    includeFontPadding: false,
    lineHeight: 18,
    paddingHorizontal: 12
  },
  substitutionText: {
    color: YellowBoxStyle.getTextColor(0.6)
  },
  bodySection: {
    marginTop: 20
  }
});
module.exports = YellowBoxInspector;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlllbGxvd0JveEluc3BlY3Rvci5qcyJdLCJuYW1lcyI6WyJQbGF0Zm9ybSIsInJlcXVpcmUiLCJSZWFjdCIsIlNjcm9sbFZpZXciLCJTdHlsZVNoZWV0IiwiVGV4dCIsIlZpZXciLCJZZWxsb3dCb3hDYXRlZ29yeSIsIlllbGxvd0JveEluc3BlY3RvckZvb3RlciIsIlllbGxvd0JveEluc3BlY3RvckhlYWRlciIsIlllbGxvd0JveEluc3BlY3RvclNvdXJjZU1hcFN0YXR1cyIsIlllbGxvd0JveEluc3BlY3RvclN0YWNrRnJhbWUiLCJZZWxsb3dCb3hTdHlsZSIsIm9wZW5GaWxlSW5FZGl0b3IiLCJZZWxsb3dCb3hJbnNwZWN0b3IiLCJzdGF0ZSIsInNlbGVjdGVkSW5kZXgiLCJfaGFuZGxlUmV0cnlTeW1ib2xpY2F0aW9uIiwiX2NhbmNlbFN5bWJvbGljYXRpb24iLCJmb3JjZVVwZGF0ZSIsIndhcm5pbmciLCJwcm9wcyIsIndhcm5pbmdzIiwiX3N5bWJvbGljYXRpb24iLCJyZXRyeVN5bWJvbGljYXRlIiwiX2hhbmRsZVNlbGVjdEluZGV4Iiwic2V0U3RhdGUiLCJzdHlsZXMiLCJyb290IiwiYm9keUNvbnRlbnQiLCJib2R5IiwiYm9keUhlYWRpbmciLCJib2R5SGVhZGluZ1RleHQiLCJib2R5VGV4dCIsInJlbmRlciIsIm1lc3NhZ2UiLCJzdWJzdGl0dXRpb25UZXh0IiwiYm9keVNlY3Rpb24iLCJzeW1ib2xpY2F0ZWQiLCJzdGF0dXMiLCJnZXRBdmFpbGFibGVTdGFjayIsIm1hcCIsImZyYW1lIiwiaW5kZXgiLCJmaWxlIiwibGluZU51bWJlciIsIm9uRGlzbWlzcyIsIm9uTWluaW1pemUiLCJfaGFuZGxlU3ltYm9saWNhdGlvbiIsInByZXZQcm9wcyIsInByZXZTdGF0ZSIsInN5bWJvbGljYXRlIiwiYWJvcnQiLCJDb21wb25lbnQiLCJjcmVhdGUiLCJlbGV2YXRpb24iLCJPUyIsIk51bWJlciIsIk1BWF9TQUZFX0lOVEVHRVIiLCJ1bmRlZmluZWQiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJnZXRCYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJCb3R0b21Db2xvciIsImdldERpdmlkZXJDb2xvciIsImJvcmRlckJvdHRvbVdpZHRoIiwiaGFpcmxpbmVXaWR0aCIsImJvcmRlclRvcENvbG9yIiwiYm9yZGVyVG9wV2lkdGgiLCJmbGV4IiwicGFkZGluZ1ZlcnRpY2FsIiwiYWxpZ25JdGVtcyIsImZsZXhEaXJlY3Rpb24iLCJtYXJnaW5Cb3R0b20iLCJwYWRkaW5nSG9yaXpvbnRhbCIsImNvbG9yIiwiZ2V0VGV4dENvbG9yIiwiZm9udFNpemUiLCJmb250V2VpZ2h0IiwiaW5jbHVkZUZvbnRQYWRkaW5nIiwibGluZUhlaWdodCIsIm1hcmdpblRvcCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVBOzs7Ozs7Ozs7Ozs7OztBQUVBLElBQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLDBCQUFELENBQXhCOztBQUNBLElBQU1DLEtBQUssR0FBR0QsT0FBTyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0EsSUFBTUUsVUFBVSxHQUFHRixPQUFPLENBQUMsd0NBQUQsQ0FBMUI7O0FBQ0EsSUFBTUcsVUFBVSxHQUFHSCxPQUFPLENBQUMsNkJBQUQsQ0FBMUI7O0FBQ0EsSUFBTUksSUFBSSxHQUFHSixPQUFPLENBQUMsaUJBQUQsQ0FBcEI7O0FBQ0EsSUFBTUssSUFBSSxHQUFHTCxPQUFPLENBQUMsNEJBQUQsQ0FBcEI7O0FBQ0EsSUFBTU0saUJBQWlCLEdBQUdOLE9BQU8sQ0FBQywyQkFBRCxDQUFqQzs7QUFDQSxJQUFNTyx3QkFBd0IsR0FBR1AsT0FBTyxDQUFDLDRCQUFELENBQXhDOztBQUNBLElBQU1RLHdCQUF3QixHQUFHUixPQUFPLENBQUMsNEJBQUQsQ0FBeEM7O0FBQ0EsSUFBTVMsaUNBQWlDLEdBQUdULE9BQU8sQ0FBQyxxQ0FBRCxDQUFqRDs7QUFDQSxJQUFNVSw0QkFBNEIsR0FBR1YsT0FBTyxDQUFDLGdDQUFELENBQTVDOztBQUNBLElB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QUU7QUFORyxHQXRCYztBQThCL0IvQyxFQUFBQSxRQUFRLEVBQUU7QUFDUjBDLElBQUFBLEtBQUssRUFBRS9ELGNBQWMsQ0FBQ2dFLFlBQWYsQ0FBNEIsQ0FBNUIsQ0FEQztBQUVSQyxJQUFBQSxRQUFRLEVBQUUsRUFGRjtBQUdSRSxJQUFBQSxrQkFBa0IsRUFBRSxLQUhaO0FBSVJDLElBQUFBLFVBQVUsRUFBRSxFQUpKO0FBS1JOLElBQUFBLGlCQUFpQixFQUFFO0FBTFgsR0E5QnFCO0FBcUMvQnRDLEVBQUFBLGdCQUFnQixFQUFFO0FBQ2hCdUMsSUFBQUEsS0FBSyxFQUFFL0QsY0FBYyxDQUFDZ0UsWUFBZixDQUE0QixHQUE1QjtBQURTLEdBckNhO0FBd0MvQnZDLEVBQUFBLFdBQVcsRUFBRTtBQUNYNEMsSUFBQUEsU0FBUyxFQUFFO0FBREE7QUF4Q2tCLENBQWxCLENBQWY7QUE2Q0FDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnJFLGtCQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0LWxvY2FsXG4gKiBAZm9ybWF0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBQbGF0Zm9ybSA9IHJlcXVpcmUoJy4uLy4uL1V0aWxpdGllcy9QbGF0Zm9ybScpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuY29uc3QgU2Nyb2xsVmlldyA9IHJlcXVpcmUoJy4uLy4uL0NvbXBvbmVudHMvU2Nyb2xsVmlldy9TY3JvbGxWaWV3Jyk7XG5jb25zdCBTdHlsZVNoZWV0ID0gcmVxdWlyZSgnLi4vLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0Jyk7XG5jb25zdCBUZXh0ID0gcmVxdWlyZSgnLi4vLi4vVGV4dC9UZXh0Jyk7XG5jb25zdCBWaWV3ID0gcmVxdWlyZSgnLi4vLi4vQ29tcG9uZW50cy9WaWV3L1ZpZXcnKTtcbmNvbnN0IFllbGxvd0JveENhdGVnb3J5ID0gcmVxdWlyZSgnLi4vRGF0YS9ZZWxsb3dCb3hDYXRlZ29yeScpO1xuY29uc3QgWWVsbG93Qm94SW5zcGVjdG9yRm9vdGVyID0gcmVxdWlyZSgnLi9ZZWxsb3dCb3hJbnNwZWN0b3JGb290ZXInKTtcbmNvbnN0IFllbGxvd0JveEluc3BlY3RvckhlYWRlciA9IHJlcXVpcmUoJy4vWWVsbG93Qm94SW5zcGVjdG9ySGVhZGVyJyk7XG5jb25zdCBZZWxsb3dCb3hJbnNwZWN0b3JTb3VyY2VNYXBTdGF0dXMgPSByZXF1aXJlKCcuL1llbGxvd0JveEluc3BlY3RvclNvdXJjZU1hcFN0YXR1cycpO1xuY29uc3QgWWVsbG93Qm94SW5zcGVjdG9yU3RhY2tGcmFtZSA9IHJlcXVpcmUoJy4vWWVsbG93Qm94SW5zcGVjdG9yU3RhY2tGcmFtZScpO1xuY29uc3QgWWVsbG93Qm94U3R5bGUgPSByZXF1aXJlKCcuL1llbGxvd0JveFN0eWxlJyk7XG5cbmNvbnN0IG9wZW5GaWxlSW5FZGl0b3IgPSByZXF1aXJlKCcuLi8uLi9Db3JlL0RldnRvb2xzL29wZW5GaWxlSW5FZGl0b3InKTtcblxuaW1wb3J0IHR5cGUgWWVsbG93Qm94V2FybmluZyBmcm9tICcuLi9EYXRhL1llbGxvd0JveFdhcm5pbmcnO1xuaW1wb3J0IHR5cGUge1N5bWJvbGljYXRpb25SZXF1ZXN0fSBmcm9tICcuLi9EYXRhL1llbGxvd0JveFdhcm5pbmcnO1xuXG50eXBlIFByb3BzID0gJFJlYWRPbmx5PHt8XG4gIG9uRGlzbWlzczogKCkgPT4gdm9pZCxcbiAgb25NaW5pbWl6ZTogKCkgPT4gdm9pZCxcbiAgd2FybmluZ3M6ICRSZWFkT25seUFycmF5PFllbGxvd0JveFdhcm5pbmc+LFxufH0+O1xuXG50eXBlIFN0YXRlID0ge3xcbiAgc2VsZWN0ZWRJbmRleDogbnVtYmVyLFxufH07XG5cbmNsYXNzIFllbGxvd0JveEluc3BlY3RvciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgX3N5bWJvbGljYXRpb246ID9TeW1ib2xpY2F0aW9uUmVxdWVzdDtcblxuICBzdGF0ZSA9IHtcbiAgICBzZWxlY3RlZEluZGV4OiAwLFxuICB9O1xuXG4gIHJlbmRlcigpOiBSZWFjdC5Ob2RlIHtcbiAgICBjb25zdCB7d2FybmluZ3N9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7c2VsZWN0ZWRJbmRleH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgY29uc3Qgd2FybmluZyA9IHdhcm5pbmdzW3NlbGVjdGVkSW5kZXhdO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMucm9vdH0+XG4gICAgICAgIDxZZWxsb3dCb3hJbnNwZWN0b3JIZWFkZXJcbiAgICAgICAgICBvblNlbGVjdEluZGV4PXt0aGlzLl9oYW5kbGVTZWxlY3RJbmRleH1cbiAgICAgICAgICBzZWxlY3RlZEluZGV4PXtzZWxlY3RlZEluZGV4fVxuICAgICAgICAgIHdhcm5pbmdzPXt3YXJuaW5nc31cbiAgICAgICAgLz5cbiAgICAgICAgPFNjcm9sbFZpZXdcbiAgICAgICAgICBjb250ZW50Q29udGFpbmVyU3R5bGU9e3N0eWxlcy5ib2R5Q29udGVudH1cbiAgICAgICAgICBrZXk9e3NlbGVjdGVkSW5kZXh9XG4gICAgICAgICAgc3R5bGU9e3N0eWxlcy5ib2R5fT5cbiAgICAgICAgICA8Vmlldz5cbiAgICAgICAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuYm9keUhlYWRpbmd9PlxuICAgICAgICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLmJvZHlIZWFkaW5nVGV4dH0+V2FybmluZzwvVGV4dD5cbiAgICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgICAgIDxUZXh0IHN0eWxlPXtzdHlsZXMuYm9keVRleHR9PlxuICAgICAgICAgICAgICB7WWVsbG93Qm94Q2F0ZWdvcnkucmVuZGVyKFxuICAgICAgICAgICAgICAgIHdhcm5pbmcubWVzc2FnZSxcbiAgICAgICAgICAgICAgICBzdHlsZXMuc3Vic3RpdHV0aW9uVGV4dCxcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5ib2R5U2VjdGlvbn0+XG4gICAgICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLmJvZHlIZWFkaW5nfT5cbiAgICAgICAgICAgICAgPFRleHQgc3R5bGU9e3N0eWxlcy5ib2R5SGVhZGluZ1RleHR9PlN0YWNrPC9UZXh0PlxuICAgICAgICAgICAgICA8WWVsbG93Qm94SW5zcGVjdG9yU291cmNlTWFwU3RhdHVzXG4gICAgICAgICAgICAgICAgb25QcmVzcz17XG4gICAgICAgICAgICAgICAgICB3YXJuaW5nLnN5bWJvbGljYXRlZC5zdGF0dXMgPT09ICdGQUlMRUQnXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5faGFuZGxlUmV0cnlTeW1ib2xpY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGF0dXM9e3dhcm5pbmcuc3ltYm9saWNhdGVkLnN0YXR1c31cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgICAgIHt3YXJuaW5nLmdldEF2YWlsYWJsZVN0YWNrKCkubWFwKChmcmFtZSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgPFllbGxvd0JveEluc3BlY3RvclN0YWNrRnJhbWVcbiAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICAgIGZyYW1lPXtmcmFtZX1cbiAgICAgICAgICAgICAgICBvblByZXNzPXtcbiAgICAgICAgICAgICAgICAgIHdhcm5pbmcuc3ltYm9saWNhdGVkLnN0YXR1cyA9PT0gJ0NPTVBMRVRFJ1xuICAgICAgICAgICAgICAgICAgICA/ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5GaWxlSW5FZGl0b3IoZnJhbWUuZmlsZSwgZnJhbWUubGluZU51bWJlcik7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgIDwvU2Nyb2xsVmlldz5cbiAgICAgICAgPFllbGxvd0JveEluc3BlY3RvckZvb3RlclxuICAgICAgICAgIG9uRGlzbWlzcz17dGhpcy5wcm9wcy5vbkRpc21pc3N9XG4gICAgICAgICAgb25NaW5pbWl6ZT17dGhpcy5wcm9wcy5vbk1pbmltaXplfVxuICAgICAgICAvPlxuICAgICAgPC9WaWV3PlxuICAgICk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpOiB2b2lkIHtcbiAgICB0aGlzLl9oYW5kbGVTeW1ib2xpY2F0aW9uKCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBQcm9wcywgcHJldlN0YXRlOiBTdGF0ZSk6IHZvaWQge1xuICAgIGlmIChcbiAgICAgIHByZXZQcm9wcy53YXJuaW5ncyAhPT0gdGhpcy5wcm9wcy53YXJuaW5ncyB8fFxuICAgICAgcHJldlN0YXRlLnNlbGVjdGVkSW5kZXggIT09IHRoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleFxuICAgICkge1xuICAgICAgdGhpcy5fY2FuY2VsU3ltYm9saWNhdGlvbigpO1xuICAgICAgdGhpcy5faGFuZGxlU3ltYm9saWNhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCk6IHZvaWQge1xuICAgIHRoaXMuX2NhbmNlbFN5bWJvbGljYXRpb24oKTtcbiAgfVxuXG4gIF9oYW5kbGVSZXRyeVN5bWJvbGljYXRpb24gPSAoKSA9PiB7XG4gICAgdGhpcy5fY2FuY2VsU3ltYm9saWNhdGlvbigpO1xuICAgIHRoaXMuZm9yY2VVcGRhdGUoKCkgPT4ge1xuICAgICAgY29uc3Qgd2FybmluZyA9IHRoaXMucHJvcHMud2FybmluZ3NbdGhpcy5zdGF0ZS5zZWxlY3RlZEluZGV4XTtcbiAgICAgIHRoaXMuX3N5bWJvbGljYXRpb24gPSB3YXJuaW5nLnJldHJ5U3ltYm9saWNhdGUoKCkgPT4ge1xuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBfaGFuZGxlU3ltYm9saWNhdGlvbigpOiB2b2lkIHtcbiAgICBjb25zdCB3YXJuaW5nID0gdGhpcy5wcm9wcy53YXJuaW5nc1t0aGlzLnN0YXRlLnNlbGVjdGVkSW5kZXhdO1xuICAgIGlmICh3YXJuaW5nLnN5bWJvbGljYXRlZC5zdGF0dXMgIT09ICdDT01QTEVURScpIHtcbiAgICAgIHRoaXMuX3N5bWJvbGljYXRpb24gPSB3YXJuaW5nLnN5bWJvbGljYXRlKCgpID0+IHtcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgX2NhbmNlbFN5bWJvbGljYXRpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N5bWJvbGljYXRpb24gIT0gbnVsbCkge1xuICAgICAgdGhpcy5fc3ltYm9saWNhdGlvbi5hYm9ydCgpO1xuICAgICAgdGhpcy5fc3ltYm9saWNhdGlvbiA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZVNlbGVjdEluZGV4ID0gKHNlbGVjdGVkSW5kZXg6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkSW5kZXh9KTtcbiAgfTtcbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICByb290OiB7XG4gICAgZWxldmF0aW9uOiBQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnID8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgOiB1bmRlZmluZWQsXG4gICAgaGVpZ2h0OiAnMTAwJScsXG4gIH0sXG4gIGJvZHk6IHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IFllbGxvd0JveFN0eWxlLmdldEJhY2tncm91bmRDb2xvcigwLjk1KSxcbiAgICBib3JkZXJCb3R0b21Db2xvcjogWWVsbG93Qm94U3R5bGUuZ2V0RGl2aWRlckNvbG9yKDAuOTUpLFxuICAgIGJvcmRlckJvdHRvbVdpZHRoOiBTdHlsZVNoZWV0LmhhaXJsaW5lV2lkdGgsXG4gICAgYm9yZGVyVG9wQ29sb3I6IFllbGxvd0JveFN0eWxlLmdldERpdmlkZXJDb2xvcigwLjk1KSxcbiAgICBib3JkZXJUb3BXaWR0aDogU3R5bGVTaGVldC5oYWlybGluZVdpZHRoLFxuICAgIGZsZXg6IDEsXG4gIH0sXG4gIGJvZHlDb250ZW50OiB7XG4gICAgcGFkZGluZ1ZlcnRpY2FsOiAxMixcbiAgfSxcbiAgYm9keUhlYWRpbmc6IHtcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBtYXJnaW5Cb3R0b206IDYsXG4gICAgcGFkZGluZ0hvcml6b250YWw6IDEyLFxuICB9LFxuICBib2R5SGVhZGluZ1RleHQ6IHtcbiAgICBjb2xvcjogWWVsbG93Qm94U3R5bGUuZ2V0VGV4dENvbG9yKDEpLFxuICAgIGZsZXg6IDEsXG4gICAgZm9udFNpemU6IDIwLFxuICAgIGZvbnRXZWlnaHQ6ICc2MDAnLFxuICAgIGluY2x1ZGVGb250UGFkZGluZzogZmFsc2UsXG4gICAgbGluZUhlaWdodDogMjgsXG4gIH0sXG4gIGJvZHlUZXh0OiB7XG4gICAgY29sb3I6IFllbGxvd0JveFN0eWxlLmdldFRleHRDb2xvcigxKSxcbiAgICBmb250U2l6ZTogMTQsXG4gICAgaW5jbHVkZUZvbnRQYWRkaW5nOiBmYWxzZSxcbiAgICBsaW5lSGVpZ2h0OiAxOCxcbiAgICBwYWRkaW5nSG9yaXpvbnRhbDogMTIsXG4gIH0sXG4gIHN1YnN0aXR1dGlvblRleHQ6IHtcbiAgICBjb2xvcjogWWVsbG93Qm94U3R5bGUuZ2V0VGV4dENvbG9yKDAuNiksXG4gIH0sXG4gIGJvZHlTZWN0aW9uOiB7XG4gICAgbWFyZ2luVG9wOiAyMCxcbiAgfSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFllbGxvd0JveEluc3BlY3RvcjtcbiJdfQ==