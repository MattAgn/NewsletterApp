{"version":3,"sources":["index.js"],"names":["Object","defineProperty","exports","value","_interopDefault","ex","Stream","require","http","Url","https","zlib","Readable","BUFFER","Symbol","TYPE","Blob","blobParts","arguments","options","buffers","size","a","length","Number","i","element","buffer","Buffer","ArrayBuffer","isView","from","byteOffset","byteLength","String","push","concat","type","undefined","toLowerCase","test","Promise","resolve","toString","buf","ab","slice","readable","_read","start","end","relativeStart","relativeEnd","Math","max","min","span","slicedBuffer","blob","defineProperties","prototype","enumerable","toStringTag","writable","configurable","FetchError","message","systemError","Error","call","code","errno","captureStackTrace","constructor","create","name","convert","e","INTERNALS","PassThrough","Body","body","_this","_ref","_ref$size","_ref$timeout","timeout","isURLSearchParams","isBlob","isBuffer","disturbed","error","on","err","url","bodyUsed","arrayBuffer","consumeBody","then","ct","headers","get","json","_this2","JSON","parse","reject","text","textConverted","_this3","convertBody","mixIn","proto","getOwnPropertyNames","desc","getOwnPropertyDescriptor","_this4","TypeError","alloc","stream","accum","accumBytes","abort","resTimeout","setTimeout","chunk","clearTimeout","charset","res","str","exec","pop","obj","append","delete","getAll","has","set","sort","clone","instance","p1","p2","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","writeToStream","dest","write","global","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","find","map","key","MAP","Headers","init","rawHeaders","raw","headerNames","keys","headerName","method","iterator","pairs","pair","Array","join","callback","thisArg","getHeaders","_pairs$i","createHeadersIterator","entries","forEach","values","kind","k","INTERNAL","target","HeadersIteratorPrototype","index","setPrototypeOf","next","getPrototypeOf","_INTERNAL","len","done","exportNodeCompatibleHeaders","__proto__","hostHeaderKey","createHeadersLenient","isArray","val","INTERNALS$1","STATUS_CODES","Response","opts","status","contentType","statusText","counter","ok","redirected","INTERNALS$2","parse_url","format_url","format","streamDestructionSupported","isRequest","input","isAbortSignal","signal","Request","parsedURL","href","toUpperCase","inputBody","redirect","follow","compress","agent","getNodeRequestOptions","request","protocol","hostname","contentLengthValue","totalBytes","AbortError","PassThrough$1","resolve_url","fetch","send","response","destroy","emit","aborted","abortAndFinalize","finalize","req","reqTimeout","addEventListener","removeEventListener","once","socket","isRedirect","statusCode","location","locationURL","requestOpts","response_options","statusMessage","codings","zlibOptions","flush","Z_SYNC_FLUSH","finishFlush","createGunzip","createInflate","createInflateRaw","createBrotliDecompress","module","default"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar Stream = _interopDefault(require('stream'));\nvar http = _interopDefault(require('http'));\nvar Url = _interopDefault(require('url'));\nvar https = _interopDefault(require('https'));\nvar zlib = _interopDefault(require('zlib'));\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\nconst resolve_url = Url.resolve;\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nmodule.exports = exports = fetch;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = exports;\nexports.Headers = Headers;\nexports.Request = Request;\nexports.Response = Response;\nexports.FetchError = FetchError;\n"]}