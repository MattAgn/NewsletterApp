793c38206b9e75501b86b91b995f370b
"use strict";

var conversions = require("webidl-conversions");

var utils = require("./utils.js");

var impl = utils.implSymbol;

function URL(url) {
  if (!new.target) {
    throw new TypeError("Failed to construct 'URL'. Please use the 'new' operator; this constructor " + "cannot be called as a function.");
  }

  if (arguments.length < 1) {
    throw new TypeError("Failed to construct 'URL': 1 " + "argument required, but only " + arguments.length + " present.");
  }

  var args = [];

  for (var i = 0; i < arguments.length && i < 2; ++i) {
    args[i] = arguments[i];
  }

  args[0] = conversions["USVString"](args[0], {
    context: "Failed to construct 'URL': parameter 1"
  });

  if (args[1] !== undefined) {
    args[1] = conversions["USVString"](args[1], {
      context: "Failed to construct 'URL': parameter 2"
    });
  }

  iface.setup(this, args);
}

Object.defineProperty(URL, "prototype", {
  value: URL.prototype,
  writable: false,
  enumerable: false,
  configurable: false
});

URL.prototype.toJSON = function toJSON() {
  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  return this[impl].toJSON();
};

Object.defineProperty(URL.prototype, "href", {
  get: function get() {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return this[impl]["href"];
  },
  set: function set(V) {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    V = conversions["USVString"](V, {
      context: "Failed to set the 'href' property on 'URL': The provided value"
    });
    this[impl]["href"] = V;
  },
  enumerable: true,
  configurable: true
});

URL.prototype.toString = function toString() {
  if (!this || !module.exports.is(this)) {
    throw new TypeError("Illegal invocation");
  }

  return this[impl]["href"];
};

Object.defineProperty(URL.prototype, "origin", {
  get: function get() {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return this[impl]["origin"];
  },
  enumerable: true,
  configurable: true
});
Object.defineProperty(URL.prototype, "protocol", {
  get: function get() {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return this[impl]["protocol"];
  },
  set: function set(V) {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    V = conversions["USVString"](V, {
      context: "Failed to set the 'protocol' property on 'URL': The provided value"
    });
    this[impl]["protocol"] = V;
  },
  enumerable: true,
  configurable: true
});
Object.defineProperty(URL.prototype, "username", {
  get: function get() {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return this[impl]["username"];
  },
  set: function set(V) {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    V = conversions["USVString"](V, {
      context: "Failed to set the 'username' property on 'URL': The provided value"
    });
    this[impl]["username"] = V;
  },
  enumerable: true,
  configurable: true
});
Object.defineProperty(URL.prototype, "password", {
  get: function get() {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return this[impl]["password"];
  },
  set: function set(V) {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    V = conversions["USVString"](V, {
      context: "Failed to set the 'password' property on 'URL': The provided value"
    });
    this[impl]["password"] = V;
  },
  enumerable: true,
  configurable: true
});
Object.defineProperty(URL.prototype, "host", {
  get: function get() {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return this[impl]["host"];
  },
  set: function set(V) {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    V = conversions["USVString"](V, {
      context: "Failed to set the 'host' property on 'URL': The provided value"
    });
    this[impl]["host"] = V;
  },
  enumerable: true,
  configurable: true
});
Object.defineProperty(URL.prototype, "hostname", {
  get: function get() {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return this[impl]["hostname"];
  },
  set: function set(V) {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    V = conversions["USVString"](V, {
      context: "Failed to set the 'hostname' property on 'URL': The provided value"
    });
    this[impl]["hostname"] = V;
  },
  enumerable: true,
  configurable: true
});
Object.defineProperty(URL.prototype, "port", {
  get: function get() {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return this[impl]["port"];
  },
  set: function set(V) {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    V = conversions["USVString"](V, {
      context: "Failed to set the 'port' property on 'URL': The provided value"
    });
    this[impl]["port"] = V;
  },
  enumerable: true,
  configurable: true
});
Object.defineProperty(URL.prototype, "pathname", {
  get: function get() {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return this[impl]["pathname"];
  },
  set: function set(V) {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    V = conversions["USVString"](V, {
      context: "Failed to set the 'pathname' property on 'URL': The provided value"
    });
    this[impl]["pathname"] = V;
  },
  enumerable: true,
  configurable: true
});
Object.defineProperty(URL.prototype, "search", {
  get: function get() {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return this[impl]["search"];
  },
  set: function set(V) {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    V = conversions["USVString"](V, {
      context: "Failed to set the 'search' property on 'URL': The provided value"
    });
    this[impl]["search"] = V;
  },
  enumerable: true,
  configurable: true
});
Object.defineProperty(URL.prototype, "searchParams", {
  get: function get() {
    var _this = this;

    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return utils.getSameObject(this, "searchParams", function () {
      return utils.tryWrapperForImpl(_this[impl]["searchParams"]);
    });
  },
  enumerable: true,
  configurable: true
});
Object.defineProperty(URL.prototype, "hash", {
  get: function get() {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    return this[impl]["hash"];
  },
  set: function set(V) {
    if (!this || !module.exports.is(this)) {
      throw new TypeError("Illegal invocation");
    }

    V = conversions["USVString"](V, {
      context: "Failed to set the 'hash' property on 'URL': The provided value"
    });
    this[impl]["hash"] = V;
  },
  enumerable: true,
  configurable: true
});
Object.defineProperty(URL.prototype, typeof Symbol === "function" ? Symbol.toStringTag : "@@toStringTag", {
  value: "URL",
  writable: false,
  enumerable: false,
  configurable: true
});
var iface = {
  mixedInto: [],
  is: function is(obj) {
    if (obj) {
      if (obj[impl] instanceof Impl.implementation) {
        return true;
      }

      for (var i = 0; i < module.exports.mixedInto.length; ++i) {
        if (obj instanceof module.exports.mixedInto[i]) {
          return true;
        }
      }
    }

    return false;
  },
  isImpl: function isImpl(obj) {
    if (obj) {
      if (obj instanceof Impl.implementation) {
        return true;
      }

      var wrapper = utils.wrapperForImpl(obj);

      for (var i = 0; i < module.exports.mixedInto.length; ++i) {
        if (wrapper instanceof module.exports.mixedInto[i]) {
          return true;
        }
      }
    }

    return false;
  },
  convert: function convert(obj) {
    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
        _ref$context = _ref.context,
        context = _ref$context === void 0 ? "The provided value" : _ref$context;

    if (module.exports.is(obj)) {
      return utils.implForWrapper(obj);
    }

    throw new TypeError(context + " is not of type 'URL'.");
  },
  create: function create(constructorArgs, privateData) {
    var obj = Object.create(URL.prototype);
    obj = this.setup(obj, constructorArgs, privateData);
    return obj;
  },
  createImpl: function createImpl(constructorArgs, privateData) {
    var obj = Object.create(URL.prototype);
    obj = this.setup(obj, constructorArgs, privateData);
    return utils.implForWrapper(obj);
  },
  _internalSetup: function _internalSetup(obj) {},
  setup: function setup(obj, constructorArgs, privateData) {
    if (!privateData) privateData = {};
    privateData.wrapper = obj;

    this._internalSetup(obj);

    Object.defineProperty(obj, impl, {
      value: new Impl.implementation(constructorArgs, privateData),
      writable: false,
      enumerable: false,
      configurable: true
    });
    obj[impl][utils.wrapperSymbol] = obj;

    if (Impl.init) {
      Impl.init(obj[impl], privateData);
    }

    return obj;
  },
  interface: URL,
  expose: {
    Window: {
      URL: URL
    },
    Worker: {
      URL: URL
    }
  }
};
module.exports = iface;

var Impl = require(".//URL-impl.js");
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVSTC5qcyJdLCJuYW1lcyI6WyJjb252ZXJzaW9ucyIsInJlcXVpcmUiLCJ1dGlscyIsImltcGwiLCJpbXBsU3ltYm9sIiwiVVJMIiwidXJsIiwibmV3IiwidGFyZ2V0IiwiVHlwZUVycm9yIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJncyIsImkiLCJjb250ZXh0IiwidW5kZWZpbmVkIiwiaWZhY2UiLCJzZXR1cCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJwcm90b3R5cGUiLCJ3cml0YWJsZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ0b0pTT04iLCJtb2R1bGUiLCJleHBvcnRzIiwiaXMiLCJnZXQiLCJzZXQiLCJWIiwidG9TdHJpbmciLCJnZXRTYW1lT2JqZWN0IiwidHJ5V3JhcHBlckZvckltcGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIm1peGVkSW50byIsIm9iaiIsIkltcGwiLCJpbXBsZW1lbnRhdGlvbiIsImlzSW1wbCIsIndyYXBwZXIiLCJ3cmFwcGVyRm9ySW1wbCIsImNvbnZlcnQiLCJpbXBsRm9yV3JhcHBlciIsImNyZWF0ZSIsImNvbnN0cnVjdG9yQXJncyIsInByaXZhdGVEYXRhIiwiY3JlYXRlSW1wbCIsIl9pbnRlcm5hbFNldHVwIiwid3JhcHBlclN5bWJvbCIsImluaXQiLCJpbnRlcmZhY2UiLCJleHBvc2UiLCJXaW5kb3ciLCJXb3JrZXIiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLFdBQVcsR0FBR0MsT0FBTyxDQUFDLG9CQUFELENBQTNCOztBQUNBLElBQU1DLEtBQUssR0FBR0QsT0FBTyxDQUFDLFlBQUQsQ0FBckI7O0FBRUEsSUFBTUUsSUFBSSxHQUFHRCxLQUFLLENBQUNFLFVBQW5COztBQUVBLFNBQVNDLEdBQVQsQ0FBYUMsR0FBYixFQUFrQjtBQUNoQixNQUFJLENBQUNDLEdBQUcsQ0FBQ0MsTUFBVCxFQUFpQjtBQUNmLFVBQU0sSUFBSUMsU0FBSixDQUNKLGdGQUFnRixp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QXBCLElBQUFBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQm1CLEdBQXRCLEVBQTJCbkMsSUFBM0IsRUFBaUM7QUFDL0JpQixNQUFBQSxLQUFLLEVBQUUsSUFBSW1CLElBQUksQ0FBQ0MsY0FBVCxDQUF3Qk8sZUFBeEIsRUFBeUNDLFdBQXpDLENBRHdCO0FBRS9CMUIsTUFBQUEsUUFBUSxFQUFFLEtBRnFCO0FBRy9CQyxNQUFBQSxVQUFVLEVBQUUsS0FIbUI7QUFJL0JDLE1BQUFBLFlBQVksRUFBRTtBQUppQixLQUFqQztBQU9BYyxJQUFBQSxHQUFHLENBQUNuQyxJQUFELENBQUgsQ0FBVUQsS0FBSyxDQUFDaUQsYUFBaEIsSUFBaUNiLEdBQWpDOztBQUNBLFFBQUlDLElBQUksQ0FBQ2EsSUFBVCxFQUFlO0FBQ2JiLE1BQUFBLElBQUksQ0FBQ2EsSUFBTCxDQUFVZCxHQUFHLENBQUNuQyxJQUFELENBQWIsRUFBcUI2QyxXQUFyQjtBQUNEOztBQUNELFdBQU9WLEdBQVA7QUFDRCxHQWxFVztBQW1FWmUsRUFBQUEsU0FBUyxFQUFFaEQsR0FuRUM7QUFvRVppRCxFQUFBQSxNQUFNLEVBQUU7QUFDTkMsSUFBQUEsTUFBTSxFQUFFO0FBQUVsRCxNQUFBQSxHQUFHLEVBQUhBO0FBQUYsS0FERjtBQUVObUQsSUFBQUEsTUFBTSxFQUFFO0FBQUVuRCxNQUFBQSxHQUFHLEVBQUhBO0FBQUY7QUFGRjtBQXBFSSxDQUFkO0FBeUVBcUIsTUFBTSxDQUFDQyxPQUFQLEdBQWlCWCxLQUFqQjs7QUFFQSxJQUFNdUIsSUFBSSxHQUFHdEMsT0FBTyxDQUFDLGdCQUFELENBQXBCIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IGNvbnZlcnNpb25zID0gcmVxdWlyZShcIndlYmlkbC1jb252ZXJzaW9uc1wiKTtcbmNvbnN0IHV0aWxzID0gcmVxdWlyZShcIi4vdXRpbHMuanNcIik7XG5cbmNvbnN0IGltcGwgPSB1dGlscy5pbXBsU3ltYm9sO1xuXG5mdW5jdGlvbiBVUkwodXJsKSB7XG4gIGlmICghbmV3LnRhcmdldCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1VSTCcuIFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yOyB0aGlzIGNvbnN0cnVjdG9yIFwiICsgXCJjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCJcbiAgICApO1xuICB9XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1VSTCc6IDEgXCIgKyBcImFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSBcIiArIGFyZ3VtZW50cy5sZW5ndGggKyBcIiBwcmVzZW50LlwiXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGFyZ3MgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoICYmIGkgPCAyOyArK2kpIHtcbiAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICB9XG5cbiAgYXJnc1swXSA9IGNvbnZlcnNpb25zW1wiVVNWU3RyaW5nXCJdKGFyZ3NbMF0sIHsgY29udGV4dDogXCJGYWlsZWQgdG8gY29uc3RydWN0ICdVUkwnOiBwYXJhbWV0ZXIgMVwiIH0pO1xuXG4gIGlmIChhcmdzWzFdICE9PSB1bmRlZmluZWQpIHtcbiAgICBhcmdzWzFdID0gY29udmVyc2lvbnNbXCJVU1ZTdHJpbmdcIl0oYXJnc1sxXSwgeyBjb250ZXh0OiBcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1VSTCc6IHBhcmFtZXRlciAyXCIgfSk7XG4gIH1cblxuICBpZmFjZS5zZXR1cCh0aGlzLCBhcmdzKTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFVSTCwgXCJwcm90b3R5cGVcIiwge1xuICB2YWx1ZTogVVJMLnByb3RvdHlwZSxcbiAgd3JpdGFibGU6IGZhbHNlLFxuICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgY29uZmlndXJhYmxlOiBmYWxzZVxufSk7XG5cblVSTC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgaW52b2NhdGlvblwiKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzW2ltcGxdLnRvSlNPTigpO1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFVSTC5wcm90b3R5cGUsIFwiaHJlZlwiLCB7XG4gIGdldCgpIHtcbiAgICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSWxsZWdhbCBpbnZvY2F0aW9uXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzW2ltcGxdW1wiaHJlZlwiXTtcbiAgfSxcblxuICBzZXQoVikge1xuICAgIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gICAgfVxuXG4gICAgViA9IGNvbnZlcnNpb25zW1wiVVNWU3RyaW5nXCJdKFYsIHsgY29udGV4dDogXCJGYWlsZWQgdG8gc2V0IHRoZSAnaHJlZicgcHJvcGVydHkgb24gJ1VSTCc6IFRoZSBwcm92aWRlZCB2YWx1ZVwiIH0pO1xuXG4gICAgdGhpc1tpbXBsXVtcImhyZWZcIl0gPSBWO1xuICB9LFxuXG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZVxufSk7XG5cblVSTC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgaWYgKCF0aGlzIHx8ICFtb2R1bGUuZXhwb3J0cy5pcyh0aGlzKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gIH1cbiAgcmV0dXJuIHRoaXNbaW1wbF1bXCJocmVmXCJdO1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFVSTC5wcm90b3R5cGUsIFwib3JpZ2luXCIsIHtcbiAgZ2V0KCkge1xuICAgIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNbaW1wbF1bXCJvcmlnaW5cIl07XG4gIH0sXG5cbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgY29uZmlndXJhYmxlOiB0cnVlXG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFVSTC5wcm90b3R5cGUsIFwicHJvdG9jb2xcIiwge1xuICBnZXQoKSB7XG4gICAgaWYgKCF0aGlzIHx8ICFtb2R1bGUuZXhwb3J0cy5pcyh0aGlzKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgaW52b2NhdGlvblwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1tpbXBsXVtcInByb3RvY29sXCJdO1xuICB9LFxuXG4gIHNldChWKSB7XG4gICAgaWYgKCF0aGlzIHx8ICFtb2R1bGUuZXhwb3J0cy5pcyh0aGlzKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgaW52b2NhdGlvblwiKTtcbiAgICB9XG5cbiAgICBWID0gY29udmVyc2lvbnNbXCJVU1ZTdHJpbmdcIl0oViwgeyBjb250ZXh0OiBcIkZhaWxlZCB0byBzZXQgdGhlICdwcm90b2NvbCcgcHJvcGVydHkgb24gJ1VSTCc6IFRoZSBwcm92aWRlZCB2YWx1ZVwiIH0pO1xuXG4gICAgdGhpc1tpbXBsXVtcInByb3RvY29sXCJdID0gVjtcbiAgfSxcblxuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBjb25maWd1cmFibGU6IHRydWVcbn0pO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoVVJMLnByb3RvdHlwZSwgXCJ1c2VybmFtZVwiLCB7XG4gIGdldCgpIHtcbiAgICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSWxsZWdhbCBpbnZvY2F0aW9uXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzW2ltcGxdW1widXNlcm5hbWVcIl07XG4gIH0sXG5cbiAgc2V0KFYpIHtcbiAgICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSWxsZWdhbCBpbnZvY2F0aW9uXCIpO1xuICAgIH1cblxuICAgIFYgPSBjb252ZXJzaW9uc1tcIlVTVlN0cmluZ1wiXShWLCB7IGNvbnRleHQ6IFwiRmFpbGVkIHRvIHNldCB0aGUgJ3VzZXJuYW1lJyBwcm9wZXJ0eSBvbiAnVVJMJzogVGhlIHByb3ZpZGVkIHZhbHVlXCIgfSk7XG5cbiAgICB0aGlzW2ltcGxdW1widXNlcm5hbWVcIl0gPSBWO1xuICB9LFxuXG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZVxufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShVUkwucHJvdG90eXBlLCBcInBhc3N3b3JkXCIsIHtcbiAgZ2V0KCkge1xuICAgIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNbaW1wbF1bXCJwYXNzd29yZFwiXTtcbiAgfSxcblxuICBzZXQoVikge1xuICAgIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gICAgfVxuXG4gICAgViA9IGNvbnZlcnNpb25zW1wiVVNWU3RyaW5nXCJdKFYsIHsgY29udGV4dDogXCJGYWlsZWQgdG8gc2V0IHRoZSAncGFzc3dvcmQnIHByb3BlcnR5IG9uICdVUkwnOiBUaGUgcHJvdmlkZWQgdmFsdWVcIiB9KTtcblxuICAgIHRoaXNbaW1wbF1bXCJwYXNzd29yZFwiXSA9IFY7XG4gIH0sXG5cbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgY29uZmlndXJhYmxlOiB0cnVlXG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFVSTC5wcm90b3R5cGUsIFwiaG9zdFwiLCB7XG4gIGdldCgpIHtcbiAgICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSWxsZWdhbCBpbnZvY2F0aW9uXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzW2ltcGxdW1wiaG9zdFwiXTtcbiAgfSxcblxuICBzZXQoVikge1xuICAgIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gICAgfVxuXG4gICAgViA9IGNvbnZlcnNpb25zW1wiVVNWU3RyaW5nXCJdKFYsIHsgY29udGV4dDogXCJGYWlsZWQgdG8gc2V0IHRoZSAnaG9zdCcgcHJvcGVydHkgb24gJ1VSTCc6IFRoZSBwcm92aWRlZCB2YWx1ZVwiIH0pO1xuXG4gICAgdGhpc1tpbXBsXVtcImhvc3RcIl0gPSBWO1xuICB9LFxuXG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZVxufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShVUkwucHJvdG90eXBlLCBcImhvc3RuYW1lXCIsIHtcbiAgZ2V0KCkge1xuICAgIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNbaW1wbF1bXCJob3N0bmFtZVwiXTtcbiAgfSxcblxuICBzZXQoVikge1xuICAgIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gICAgfVxuXG4gICAgViA9IGNvbnZlcnNpb25zW1wiVVNWU3RyaW5nXCJdKFYsIHsgY29udGV4dDogXCJGYWlsZWQgdG8gc2V0IHRoZSAnaG9zdG5hbWUnIHByb3BlcnR5IG9uICdVUkwnOiBUaGUgcHJvdmlkZWQgdmFsdWVcIiB9KTtcblxuICAgIHRoaXNbaW1wbF1bXCJob3N0bmFtZVwiXSA9IFY7XG4gIH0sXG5cbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgY29uZmlndXJhYmxlOiB0cnVlXG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFVSTC5wcm90b3R5cGUsIFwicG9ydFwiLCB7XG4gIGdldCgpIHtcbiAgICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSWxsZWdhbCBpbnZvY2F0aW9uXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzW2ltcGxdW1wicG9ydFwiXTtcbiAgfSxcblxuICBzZXQoVikge1xuICAgIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gICAgfVxuXG4gICAgViA9IGNvbnZlcnNpb25zW1wiVVNWU3RyaW5nXCJdKFYsIHsgY29udGV4dDogXCJGYWlsZWQgdG8gc2V0IHRoZSAncG9ydCcgcHJvcGVydHkgb24gJ1VSTCc6IFRoZSBwcm92aWRlZCB2YWx1ZVwiIH0pO1xuXG4gICAgdGhpc1tpbXBsXVtcInBvcnRcIl0gPSBWO1xuICB9LFxuXG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZVxufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShVUkwucHJvdG90eXBlLCBcInBhdGhuYW1lXCIsIHtcbiAgZ2V0KCkge1xuICAgIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNbaW1wbF1bXCJwYXRobmFtZVwiXTtcbiAgfSxcblxuICBzZXQoVikge1xuICAgIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gICAgfVxuXG4gICAgViA9IGNvbnZlcnNpb25zW1wiVVNWU3RyaW5nXCJdKFYsIHsgY29udGV4dDogXCJGYWlsZWQgdG8gc2V0IHRoZSAncGF0aG5hbWUnIHByb3BlcnR5IG9uICdVUkwnOiBUaGUgcHJvdmlkZWQgdmFsdWVcIiB9KTtcblxuICAgIHRoaXNbaW1wbF1bXCJwYXRobmFtZVwiXSA9IFY7XG4gIH0sXG5cbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgY29uZmlndXJhYmxlOiB0cnVlXG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFVSTC5wcm90b3R5cGUsIFwic2VhcmNoXCIsIHtcbiAgZ2V0KCkge1xuICAgIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNbaW1wbF1bXCJzZWFyY2hcIl07XG4gIH0sXG5cbiAgc2V0KFYpIHtcbiAgICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSWxsZWdhbCBpbnZvY2F0aW9uXCIpO1xuICAgIH1cblxuICAgIFYgPSBjb252ZXJzaW9uc1tcIlVTVlN0cmluZ1wiXShWLCB7IGNvbnRleHQ6IFwiRmFpbGVkIHRvIHNldCB0aGUgJ3NlYXJjaCcgcHJvcGVydHkgb24gJ1VSTCc6IFRoZSBwcm92aWRlZCB2YWx1ZVwiIH0pO1xuXG4gICAgdGhpc1tpbXBsXVtcInNlYXJjaFwiXSA9IFY7XG4gIH0sXG5cbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgY29uZmlndXJhYmxlOiB0cnVlXG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFVSTC5wcm90b3R5cGUsIFwic2VhcmNoUGFyYW1zXCIsIHtcbiAgZ2V0KCkge1xuICAgIGlmICghdGhpcyB8fCAhbW9kdWxlLmV4cG9ydHMuaXModGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb25cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHV0aWxzLmdldFNhbWVPYmplY3QodGhpcywgXCJzZWFyY2hQYXJhbXNcIiwgKCkgPT4ge1xuICAgICAgcmV0dXJuIHV0aWxzLnRyeVdyYXBwZXJGb3JJbXBsKHRoaXNbaW1wbF1bXCJzZWFyY2hQYXJhbXNcIl0pO1xuICAgIH0pO1xuICB9LFxuXG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZVxufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShVUkwucHJvdG90eXBlLCBcImhhc2hcIiwge1xuICBnZXQoKSB7XG4gICAgaWYgKCF0aGlzIHx8ICFtb2R1bGUuZXhwb3J0cy5pcyh0aGlzKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgaW52b2NhdGlvblwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1tpbXBsXVtcImhhc2hcIl07XG4gIH0sXG5cbiAgc2V0KFYpIHtcbiAgICBpZiAoIXRoaXMgfHwgIW1vZHVsZS5leHBvcnRzLmlzKHRoaXMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSWxsZWdhbCBpbnZvY2F0aW9uXCIpO1xuICAgIH1cblxuICAgIFYgPSBjb252ZXJzaW9uc1tcIlVTVlN0cmluZ1wiXShWLCB7IGNvbnRleHQ6IFwiRmFpbGVkIHRvIHNldCB0aGUgJ2hhc2gnIHByb3BlcnR5IG9uICdVUkwnOiBUaGUgcHJvdmlkZWQgdmFsdWVcIiB9KTtcblxuICAgIHRoaXNbaW1wbF1bXCJoYXNoXCJdID0gVjtcbiAgfSxcblxuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBjb25maWd1cmFibGU6IHRydWVcbn0pO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoVVJMLnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7XG4gIHZhbHVlOiBcIlVSTFwiLFxuICB3cml0YWJsZTogZmFsc2UsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBjb25maWd1cmFibGU6IHRydWVcbn0pO1xuXG5jb25zdCBpZmFjZSA9IHtcbiAgbWl4ZWRJbnRvOiBbXSxcbiAgaXMob2JqKSB7XG4gICAgaWYgKG9iaikge1xuICAgICAgaWYgKG9ialtpbXBsXSBpbnN0YW5jZW9mIEltcGwuaW1wbGVtZW50YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZHVsZS5leHBvcnRzLm1peGVkSW50by5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgbW9kdWxlLmV4cG9ydHMubWl4ZWRJbnRvW2ldKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuICBpc0ltcGwob2JqKSB7XG4gICAgaWYgKG9iaikge1xuICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEltcGwuaW1wbGVtZW50YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHdyYXBwZXIgPSB1dGlscy53cmFwcGVyRm9ySW1wbChvYmopO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb2R1bGUuZXhwb3J0cy5taXhlZEludG8ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKHdyYXBwZXIgaW5zdGFuY2VvZiBtb2R1bGUuZXhwb3J0cy5taXhlZEludG9baV0pIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG4gIGNvbnZlcnQob2JqLCB7IGNvbnRleHQgPSBcIlRoZSBwcm92aWRlZCB2YWx1ZVwiIH0gPSB7fSkge1xuICAgIGlmIChtb2R1bGUuZXhwb3J0cy5pcyhvYmopKSB7XG4gICAgICByZXR1cm4gdXRpbHMuaW1wbEZvcldyYXBwZXIob2JqKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJHtjb250ZXh0fSBpcyBub3Qgb2YgdHlwZSAnVVJMJy5gKTtcbiAgfSxcblxuICBjcmVhdGUoY29uc3RydWN0b3JBcmdzLCBwcml2YXRlRGF0YSkge1xuICAgIGxldCBvYmogPSBPYmplY3QuY3JlYXRlKFVSTC5wcm90b3R5cGUpO1xuICAgIG9iaiA9IHRoaXMuc2V0dXAob2JqLCBjb25zdHJ1Y3RvckFyZ3MsIHByaXZhdGVEYXRhKTtcbiAgICByZXR1cm4gb2JqO1xuICB9LFxuICBjcmVhdGVJbXBsKGNvbnN0cnVjdG9yQXJncywgcHJpdmF0ZURhdGEpIHtcbiAgICBsZXQgb2JqID0gT2JqZWN0LmNyZWF0ZShVUkwucHJvdG90eXBlKTtcbiAgICBvYmogPSB0aGlzLnNldHVwKG9iaiwgY29uc3RydWN0b3JBcmdzLCBwcml2YXRlRGF0YSk7XG4gICAgcmV0dXJuIHV0aWxzLmltcGxGb3JXcmFwcGVyKG9iaik7XG4gIH0sXG4gIF9pbnRlcm5hbFNldHVwKG9iaikge30sXG4gIHNldHVwKG9iaiwgY29uc3RydWN0b3JBcmdzLCBwcml2YXRlRGF0YSkge1xuICAgIGlmICghcHJpdmF0ZURhdGEpIHByaXZhdGVEYXRhID0ge307XG5cbiAgICBwcml2YXRlRGF0YS53cmFwcGVyID0gb2JqO1xuXG4gICAgdGhpcy5faW50ZXJuYWxTZXR1cChvYmopO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGltcGwsIHtcbiAgICAgIHZhbHVlOiBuZXcgSW1wbC5pbXBsZW1lbnRhdGlvbihjb25zdHJ1Y3RvckFyZ3MsIHByaXZhdGVEYXRhKSxcbiAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG5cbiAgICBvYmpbaW1wbF1bdXRpbHMud3JhcHBlclN5bWJvbF0gPSBvYmo7XG4gICAgaWYgKEltcGwuaW5pdCkge1xuICAgICAgSW1wbC5pbml0KG9ialtpbXBsXSwgcHJpdmF0ZURhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9LFxuICBpbnRlcmZhY2U6IFVSTCxcbiAgZXhwb3NlOiB7XG4gICAgV2luZG93OiB7IFVSTCB9LFxuICAgIFdvcmtlcjogeyBVUkwgfVxuICB9XG59OyAvLyBpZmFjZVxubW9kdWxlLmV4cG9ydHMgPSBpZmFjZTtcblxuY29uc3QgSW1wbCA9IHJlcXVpcmUoXCIuLy9VUkwtaW1wbC5qc1wiKTtcbiJdfQ==