e12dc59968bf30d589e4b320ba792632
'use strict';

var INTERNAL_CALLSITES_REGEX = new RegExp(['/Libraries/Renderer/oss/ReactNativeRenderer-dev\\.js$', '/Libraries/BatchedBridge/MessageQueue\\.js$'].join('|'));
var exceptionID = 0;

function reportException(e, isFatal) {
  var _require = require('../BatchedBridge/NativeModules'),
      ExceptionsManager = _require.ExceptionsManager;

  if (ExceptionsManager) {
    var parseErrorStack = require('./Devtools/parseErrorStack');

    var stack = parseErrorStack(e);
    var currentExceptionID = ++exceptionID;
    var message = e.jsEngine == null ? e.message : e.message + ", js engine: " + e.jsEngine;

    if (isFatal) {
      ExceptionsManager.reportFatalException(message, stack, currentExceptionID);
    } else {
      ExceptionsManager.reportSoftException(message, stack, currentExceptionID);
    }

    if (__DEV__) {
      var symbolicateStackTrace = require('./Devtools/symbolicateStackTrace');

      symbolicateStackTrace(stack).then(function (prettyStack) {
        if (prettyStack) {
          var stackWithoutInternalCallsites = prettyStack.filter(function (frame) {
            return frame.file && frame.file.match(INTERNAL_CALLSITES_REGEX) === null;
          });
          ExceptionsManager.updateExceptionMessage(message, stackWithoutInternalCallsites, currentExceptionID);
        } else {
          throw new Error('The stack is null');
        }
      }).catch(function (error) {
        return console.warn('Unable to symbolicate stack trace: ' + error.message);
      });
    }
  }
}

function handleException(e, isFatal) {
  if (!e.message) {
    e = new Error(e);
  }

  if (console._errorOriginal) {
    console._errorOriginal(e.message);
  } else {
    console.error(e.message);
  }

  reportException(e, isFatal);
}

function reactConsoleErrorHandler() {
  console._errorOriginal.apply(console, arguments);

  if (!console.reportErrorsAsExceptions) {
    return;
  }

  if (arguments[0] && arguments[0].stack) {
    reportException(arguments[0], false);
  } else {
    var stringifySafe = require('../Utilities/stringifySafe');

    var str = Array.prototype.map.call(arguments, stringifySafe).join(', ');

    if (str.slice(0, 10) === '"Warning: ') {
      return;
    }

    var error = new Error('console.error: ' + str);
    error.framesToPop = 1;
    reportException(error, false);
  }
}

function installConsoleErrorReporter() {
  if (console._errorOriginal) {
    return;
  }

  console._errorOriginal = console.error.bind(console);
  console.error = reactConsoleErrorHandler;

  if (console.reportErrorsAsExceptions === undefined) {
    console.reportErrorsAsExceptions = true;
  }
}

module.exports = {
  handleException: handleException,
  installConsoleErrorReporter: installConsoleErrorReporter
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkV4Y2VwdGlvbnNNYW5hZ2VyLmpzIl0sIm5hbWVzIjpbIklOVEVSTkFMX0NBTExTSVRFU19SRUdFWCIsIlJlZ0V4cCIsImpvaW4iLCJleGNlcHRpb25JRCIsInJlcG9ydEV4Y2VwdGlvbiIsImUiLCJpc0ZhdGFsIiwicmVxdWlyZSIsIkV4Y2VwdGlvbnNNYW5hZ2VyIiwicGFyc2VFcnJvclN0YWNrIiwic3RhY2siLCJjdXJyZW50RXhjZXB0aW9uSUQiLCJtZXNzYWdlIiwianNFbmdpbmUiLCJyZXBvcnRGYXRhbEV4Y2VwdGlvbiIsInJlcG9ydFNvZnRFeGNlcHRpb24iLCJfX0RFVl9fIiwic3ltYm9saWNhdGVTdGFja1RyYWNlIiwidGhlbiIsInByZXR0eVN0YWNrIiwic3RhY2tXaXRob3V0SW50ZXJuYWxDYWxsc2l0ZXMiLCJmaWx0ZXIiLCJmcmFtZSIsImZpbGUiLCJtYXRjaCIsInVwZGF0ZUV4Y2VwdGlvbk1lc3NhZ2UiLCJFcnJvciIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsImhhbmRsZUV4Y2VwdGlvbiIsIl9lcnJvck9yaWdpbmFsIiwicmVhY3RDb25zb2xlRXJyb3JIYW5kbGVyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJyZXBvcnRFcnJvcnNBc0V4Y2VwdGlvbnMiLCJzdHJpbmdpZnlTYWZlIiwic3RyIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJtYXAiLCJjYWxsIiwic2xpY2UiLCJmcmFtZXNUb1BvcCIsImluc3RhbGxDb25zb2xlRXJyb3JSZXBvcnRlciIsImJpbmQiLCJ1bmRlZmluZWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFVQTs7QUFJQSxJQUFNQSx3QkFBd0IsR0FBRyxJQUFJQyxNQUFKLENBQy9CLENBQ0UsdURBREYsRUFFRSw2Q0FGRixFQUdFQyxJQUhGLENBR08sR0FIUCxDQUQrQixDQUFqQztBQVVBLElBQUlDLFdBQVcsR0FBRyxDQUFsQjs7QUFDQSxTQUFTQyxlQUFULENBQXlCQyxDQUF6QixF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LENBQUMsNEJBQUQsQ0FBN0I7O0FBQ0EsUUFBTStCLEdBQUcsR0FBR0MsS0FBSyxDQUFDQyxTQUFOLENBQWdCQyxHQUFoQixDQUFvQkMsSUFBcEIsQ0FBeUJQLFNBQXpCLEVBQW9DRSxhQUFwQyxFQUFtRG5DLElBQW5ELENBQXdELElBQXhELENBQVo7O0FBQ0EsUUFBSW9DLEdBQUcsQ0FBQ0ssS0FBSixDQUFVLENBQVYsRUFBYSxFQUFiLE1BQXFCLFlBQXpCLEVBQXVDO0FBSXJDO0FBQ0Q7O0FBQ0QsUUFBTWYsS0FBb0IsR0FBRyxJQUFJRixLQUFKLENBQVUsb0JBQW9CWSxHQUE5QixDQUE3QjtBQUNBVixJQUFBQSxLQUFLLENBQUNnQixXQUFOLEdBQW9CLENBQXBCO0FBQ0F4QyxJQUFBQSxlQUFlLENBQUN3QixLQUFELEVBQXNCLEtBQXRCLENBQWY7QUFDRDtBQUNGOztBQU1ELFNBQVNpQiwyQkFBVCxHQUF1QztBQUVyQyxNQUFJaEIsT0FBTyxDQUFDRyxjQUFaLEVBQTRCO0FBQzFCO0FBQ0Q7O0FBRURILEVBQUFBLE9BQU8sQ0FBQ0csY0FBUixHQUF5QkgsT0FBTyxDQUFDRCxLQUFSLENBQWNrQixJQUFkLENBQW1CakIsT0FBbkIsQ0FBekI7QUFDQUEsRUFBQUEsT0FBTyxDQUFDRCxLQUFSLEdBQWdCSyx3QkFBaEI7O0FBQ0EsTUFBSUosT0FBTyxDQUFDTyx3QkFBUixLQUFxQ1csU0FBekMsRUFBb0Q7QUFHbERsQixJQUFBQSxPQUFPLENBQUNPLHdCQUFSLEdBQW1DLElBQW5DO0FBQ0Q7QUFDRjs7QUFFRFksTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQUNsQixFQUFBQSxlQUFlLEVBQWZBLGVBQUQ7QUFBa0JjLEVBQUFBLDJCQUEyQixFQUEzQkE7QUFBbEIsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7RXh0ZW5kZWRFcnJvcn0gZnJvbSAnLi9EZXZ0b29scy9wYXJzZUVycm9yU3RhY2snO1xuXG5jb25zdCBJTlRFUk5BTF9DQUxMU0lURVNfUkVHRVggPSBuZXcgUmVnRXhwKFxuICBbXG4gICAgJy9MaWJyYXJpZXMvUmVuZGVyZXIvb3NzL1JlYWN0TmF0aXZlUmVuZGVyZXItZGV2XFxcXC5qcyQnLFxuICAgICcvTGlicmFyaWVzL0JhdGNoZWRCcmlkZ2UvTWVzc2FnZVF1ZXVlXFxcXC5qcyQnLFxuICBdLmpvaW4oJ3wnKSxcbik7XG5cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV2ZWxvcGVyLXZpc2libGUgYXNwZWN0IG9mIGVycm9ycyBhbmQgZXhjZXB0aW9uc1xuICovXG5sZXQgZXhjZXB0aW9uSUQgPSAwO1xuZnVuY3Rpb24gcmVwb3J0RXhjZXB0aW9uKGU6IEV4dGVuZGVkRXJyb3IsIGlzRmF0YWw6IGJvb2xlYW4pIHtcbiAgY29uc3Qge0V4Y2VwdGlvbnNNYW5hZ2VyfSA9IHJlcXVpcmUoJy4uL0JhdGNoZWRCcmlkZ2UvTmF0aXZlTW9kdWxlcycpO1xuICBpZiAoRXhjZXB0aW9uc01hbmFnZXIpIHtcbiAgICBjb25zdCBwYXJzZUVycm9yU3RhY2sgPSByZXF1aXJlKCcuL0RldnRvb2xzL3BhcnNlRXJyb3JTdGFjaycpO1xuICAgIGNvbnN0IHN0YWNrID0gcGFyc2VFcnJvclN0YWNrKGUpO1xuICAgIGNvbnN0IGN1cnJlbnRFeGNlcHRpb25JRCA9ICsrZXhjZXB0aW9uSUQ7XG4gICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICBlLmpzRW5naW5lID09IG51bGwgPyBlLm1lc3NhZ2UgOiBgJHtlLm1lc3NhZ2V9LCBqcyBlbmdpbmU6ICR7ZS5qc0VuZ2luZX1gO1xuICAgIGlmIChpc0ZhdGFsKSB7XG4gICAgICBFeGNlcHRpb25zTWFuYWdlci5yZXBvcnRGYXRhbEV4Y2VwdGlvbihcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgc3RhY2ssXG4gICAgICAgIGN1cnJlbnRFeGNlcHRpb25JRCxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIEV4Y2VwdGlvbnNNYW5hZ2VyLnJlcG9ydFNvZnRFeGNlcHRpb24obWVzc2FnZSwgc3RhY2ssIGN1cnJlbnRFeGNlcHRpb25JRCk7XG4gICAgfVxuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICBjb25zdCBzeW1ib2xpY2F0ZVN0YWNrVHJhY2UgPSByZXF1aXJlKCcuL0RldnRvb2xzL3N5bWJvbGljYXRlU3RhY2tUcmFjZScpO1xuICAgICAgc3ltYm9saWNhdGVTdGFja1RyYWNlKHN0YWNrKVxuICAgICAgICAudGhlbihwcmV0dHlTdGFjayA9PiB7XG4gICAgICAgICAgaWYgKHByZXR0eVN0YWNrKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFja1dpdGhvdXRJbnRlcm5hbENhbGxzaXRlcyA9IHByZXR0eVN0YWNrLmZpbHRlcihcbiAgICAgICAgICAgICAgZnJhbWUgPT5cbiAgICAgICAgICAgICAgICBmcmFtZS5maWxlICYmXG4gICAgICAgICAgICAgICAgZnJhbWUuZmlsZS5tYXRjaChJTlRFUk5BTF9DQUxMU0lURVNfUkVHRVgpID09PSBudWxsLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIEV4Y2VwdGlvbnNNYW5hZ2VyLnVwZGF0ZUV4Y2VwdGlvbk1lc3NhZ2UoXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIHN0YWNrV2l0aG91dEludGVybmFsQ2FsbHNpdGVzLFxuICAgICAgICAgICAgICBjdXJyZW50RXhjZXB0aW9uSUQsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzdGFjayBpcyBudWxsJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT5cbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBzeW1ib2xpY2F0ZSBzdGFjayB0cmFjZTogJyArIGVycm9yLm1lc3NhZ2UpLFxuICAgICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5kZWNsYXJlIHZhciBjb25zb2xlOiB0eXBlb2YgY29uc29sZSAmIHtcbiAgX2Vycm9yT3JpZ2luYWw6IEZ1bmN0aW9uLFxuICByZXBvcnRFcnJvcnNBc0V4Y2VwdGlvbnM6IGJvb2xlYW4sXG59O1xuXG4vKipcbiAqIExvZ3MgZXhjZXB0aW9ucyB0byB0aGUgKG5hdGl2ZSkgY29uc29sZSBhbmQgZGlzcGxheXMgdGhlbVxuICovXG5mdW5jdGlvbiBoYW5kbGVFeGNlcHRpb24oZTogRXJyb3IsIGlzRmF0YWw6IGJvb2xlYW4pIHtcbiAgLy8gV29ya2Fyb3VuZCBmb3IgcmVwb3J0aW5nIGVycm9ycyBjYXVzZWQgYnkgYHRocm93ICdzb21lIHN0cmluZydgXG4gIC8vIFVuZm9ydHVuYXRlbHkgdGhlcmUgaXMgbm8gd2F5IHRvIGZpZ3VyZSBvdXQgdGhlIHN0YWNrdHJhY2UgaW4gdGhpc1xuICAvLyBjYXNlLCBzbyBpZiB5b3UgZW5kZWQgdXAgaGVyZSB0cnlpbmcgdG8gdHJhY2UgYW4gZXJyb3IsIGxvb2sgZm9yXG4gIC8vIGB0aHJvdyAnPGVycm9yIG1lc3NhZ2U+J2Agc29tZXdoZXJlIGluIHlvdXIgY29kZWJhc2UuXG4gIGlmICghZS5tZXNzYWdlKSB7XG4gICAgZSA9IG5ldyBFcnJvcihlKTtcbiAgfVxuICBpZiAoY29uc29sZS5fZXJyb3JPcmlnaW5hbCkge1xuICAgIGNvbnNvbGUuX2Vycm9yT3JpZ2luYWwoZS5tZXNzYWdlKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmVycm9yKGUubWVzc2FnZSk7XG4gIH1cbiAgcmVwb3J0RXhjZXB0aW9uKGUsIGlzRmF0YWwpO1xufVxuXG5mdW5jdGlvbiByZWFjdENvbnNvbGVFcnJvckhhbmRsZXIoKSB7XG4gIGNvbnNvbGUuX2Vycm9yT3JpZ2luYWwuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgaWYgKCFjb25zb2xlLnJlcG9ydEVycm9yc0FzRXhjZXB0aW9ucykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChhcmd1bWVudHNbMF0gJiYgYXJndW1lbnRzWzBdLnN0YWNrKSB7XG4gICAgcmVwb3J0RXhjZXB0aW9uKGFyZ3VtZW50c1swXSwgLyogaXNGYXRhbCAqLyBmYWxzZSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgc3RyaW5naWZ5U2FmZSA9IHJlcXVpcmUoJy4uL1V0aWxpdGllcy9zdHJpbmdpZnlTYWZlJyk7XG4gICAgY29uc3Qgc3RyID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGFyZ3VtZW50cywgc3RyaW5naWZ5U2FmZSkuam9pbignLCAnKTtcbiAgICBpZiAoc3RyLnNsaWNlKDAsIDEwKSA9PT0gJ1wiV2FybmluZzogJykge1xuICAgICAgLy8gUmVhY3Qgd2FybmluZ3MgdXNlIGNvbnNvbGUuZXJyb3Igc28gdGhhdCBhIHN0YWNrIHRyYWNlIGlzIHNob3duLCBidXRcbiAgICAgIC8vIHdlIGRvbid0IChjdXJyZW50bHkpIHdhbnQgdGhlc2UgdG8gc2hvdyBhIHJlZGJveFxuICAgICAgLy8gKE5vdGU6IExvZ2ljIGR1cGxpY2F0ZWQgaW4gcG9seWZpbGxzL2NvbnNvbGUuanMuKVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBlcnJvcjogRXh0ZW5kZWRFcnJvciA9IG5ldyBFcnJvcignY29uc29sZS5lcnJvcjogJyArIHN0cik7XG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxO1xuICAgIHJlcG9ydEV4Y2VwdGlvbihlcnJvciwgLyogaXNGYXRhbCAqLyBmYWxzZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBTaG93cyBhIHJlZGJveCB3aXRoIHN0YWNrdHJhY2UgZm9yIGFsbCBjb25zb2xlLmVycm9yIG1lc3NhZ2VzLiAgRGlzYWJsZSBieVxuICogc2V0dGluZyBgY29uc29sZS5yZXBvcnRFcnJvcnNBc0V4Y2VwdGlvbnMgPSBmYWxzZTtgIGluIHlvdXIgYXBwLlxuICovXG5mdW5jdGlvbiBpbnN0YWxsQ29uc29sZUVycm9yUmVwb3J0ZXIoKSB7XG4gIC8vIEVuYWJsZSByZXBvcnRFcnJvcnNBc0V4Y2VwdGlvbnNcbiAgaWYgKGNvbnNvbGUuX2Vycm9yT3JpZ2luYWwpIHtcbiAgICByZXR1cm47IC8vIGFscmVhZHkgaW5zdGFsbGVkXG4gIH1cbiAgLy8gRmxvdyBkb2Vzbid0IGxpa2UgaXQgd2hlbiB5b3Ugc2V0IGFyYml0cmFyeSB2YWx1ZXMgb24gYSBnbG9iYWwgb2JqZWN0XG4gIGNvbnNvbGUuX2Vycm9yT3JpZ2luYWwgPSBjb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSk7XG4gIGNvbnNvbGUuZXJyb3IgPSByZWFjdENvbnNvbGVFcnJvckhhbmRsZXI7XG4gIGlmIChjb25zb2xlLnJlcG9ydEVycm9yc0FzRXhjZXB0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gSW5kaXZpZHVhbCBhcHBzIGNhbiBkaXNhYmxlIHRoaXNcbiAgICAvLyBGbG93IGRvZXNuJ3QgbGlrZSBpdCB3aGVuIHlvdSBzZXQgYXJiaXRyYXJ5IHZhbHVlcyBvbiBhIGdsb2JhbCBvYmplY3RcbiAgICBjb25zb2xlLnJlcG9ydEVycm9yc0FzRXhjZXB0aW9ucyA9IHRydWU7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7aGFuZGxlRXhjZXB0aW9uLCBpbnN0YWxsQ29uc29sZUVycm9yUmVwb3J0ZXJ9O1xuIl19