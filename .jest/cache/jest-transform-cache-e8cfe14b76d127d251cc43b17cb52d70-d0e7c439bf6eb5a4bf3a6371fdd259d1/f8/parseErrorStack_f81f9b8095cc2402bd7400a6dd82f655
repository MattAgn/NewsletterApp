4bb8f10c07c35fae37c206ee3cc39646
'use strict';

function parseErrorStack(e) {
  if (!e || !e.stack) {
    return [];
  }

  var stacktraceParser = require('stacktrace-parser');

  var stack = Array.isArray(e.stack) ? e.stack : stacktraceParser.parse(e.stack);
  var framesToPop = typeof e.framesToPop === 'number' ? e.framesToPop : 0;

  while (framesToPop--) {
    stack.shift();
  }

  return stack;
}

module.exports = parseErrorStack;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnNlRXJyb3JTdGFjay5qcyJdLCJuYW1lcyI6WyJwYXJzZUVycm9yU3RhY2siLCJlIiwic3RhY2siLCJzdGFja3RyYWNlUGFyc2VyIiwicmVxdWlyZSIsIkFycmF5IiwiaXNBcnJheSIsInBhcnNlIiwiZnJhbWVzVG9Qb3AiLCJzaGlmdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVBOztBQWNBLFNBQVNBLGVBQVQsQ0FBeUJDLENBQXpCLEVBQThEO0FBQzVELE1BQUksQ0FBQ0EsQ0FBRCxJQUFNLENBQUNBLENBQUMsQ0FBQ0MsS0FBYixFQUFvQjtBQUNsQixXQUFPLEVBQVA7QUFDRDs7QUFFRCxNQUFNQyxnQkFBZ0IsR0FBR0MsT0FBTyxDQUFDLG1CQUFELENBQWhDOztBQUNBLE1BQU1GLEtBQUssR0FBR0csS0FBSyxDQUFDQyxPQUFOLENBQWNMLENBQUMsQ0FBQ0MsS0FBaEIsSUFDVkQsQ0FBQyxDQUFDQyxLQURRLEdBRVZDLGdCQUFnQixDQUFDSSxLQUFqQixDQUF1Qk4sQ0FBQyxDQUFDQyxLQUF6QixDQUZKO0FBSUEsTUFBSU0sV0FBVyxHQUFHLE9BQU9QLENBQUMsQ0FBQ08sV0FBVCxLQUF5QixRQUF6QixHQUFvQ1AsQ0FBQyxDQUFDTyxXQUF0QyxHQUFvRCxDQUF0RTs7QUFDQSxTQUFPQSxXQUFXLEVBQWxCLEVBQXNCO0FBQ3BCTixJQUFBQSxLQUFLLENBQUNPLEtBQU47QUFDRDs7QUFDRCxTQUFPUCxLQUFQO0FBQ0Q7O0FBRURRLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlgsZUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgdHlwZSBTdGFja0ZyYW1lID0ge1xuICBjb2x1bW46ID9udW1iZXIsXG4gIGZpbGU6IHN0cmluZyxcbiAgbGluZU51bWJlcjogbnVtYmVyLFxuICBtZXRob2ROYW1lOiBzdHJpbmcsXG59O1xuXG5leHBvcnQgdHlwZSBFeHRlbmRlZEVycm9yID0gRXJyb3IgJiB7XG4gIGZyYW1lc1RvUG9wPzogbnVtYmVyLFxuICBqc0VuZ2luZT86IHN0cmluZyxcbn07XG5cbmZ1bmN0aW9uIHBhcnNlRXJyb3JTdGFjayhlOiBFeHRlbmRlZEVycm9yKTogQXJyYXk8U3RhY2tGcmFtZT4ge1xuICBpZiAoIWUgfHwgIWUuc3RhY2spIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCBzdGFja3RyYWNlUGFyc2VyID0gcmVxdWlyZSgnc3RhY2t0cmFjZS1wYXJzZXInKTtcbiAgY29uc3Qgc3RhY2sgPSBBcnJheS5pc0FycmF5KGUuc3RhY2spXG4gICAgPyBlLnN0YWNrXG4gICAgOiBzdGFja3RyYWNlUGFyc2VyLnBhcnNlKGUuc3RhY2spO1xuXG4gIGxldCBmcmFtZXNUb1BvcCA9IHR5cGVvZiBlLmZyYW1lc1RvUG9wID09PSAnbnVtYmVyJyA/IGUuZnJhbWVzVG9Qb3AgOiAwO1xuICB3aGlsZSAoZnJhbWVzVG9Qb3AtLSkge1xuICAgIHN0YWNrLnNoaWZ0KCk7XG4gIH1cbiAgcmV0dXJuIHN0YWNrO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlRXJyb3JTdGFjaztcbiJdfQ==