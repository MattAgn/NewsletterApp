{"version":3,"sources":["makeQuery.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_objectSpread2","_defineProperty2","_errors","isNodeValid","node","type","makeAliases","aliases","query","map","alias","reduce","acc","makeQuery","name","queryNames","matcherFn","instance","getBy","matcher","find","props","error","ErrorWithStack","prepareErrorMessage","getAllBy","results","findAll","length","queryBy","createQueryByError","queryAllBy","_default"],"mappings":"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","sourcesContent":["var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _objectSpread2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));var _defineProperty2=_interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));var _errors=require(\"./errors\");function isNodeValid(node){return typeof node.type==='string';}function makeAliases(aliases,query){return aliases.map(function(alias){return(0,_defineProperty2.default)({},alias,query);}).reduce(function(acc,query){return(0,_objectSpread2.default)({},acc,query);},{});}var makeQuery=function makeQuery(name,queryNames,matcherFn){return function(instance){var getBy=function getBy(matcher){try{return instance.find(function(node){return isNodeValid(node)&&matcherFn(node.props[name],matcher);});}catch(error){throw new _errors.ErrorWithStack((0,_errors.prepareErrorMessage)(error),getBy);}};var getAllBy=function getAllBy(matcher){var results=instance.findAll(function(node){return isNodeValid(node)&&matcherFn(node.props[name],matcher);});if(results.length===0){throw new _errors.ErrorWithStack('No instances found',getAllBy);}return results;};var queryBy=function queryBy(matcher){try{return getBy(matcher);}catch(error){return(0,_errors.createQueryByError)(error,queryBy);}};var queryAllBy=function queryAllBy(matcher){try{return getAllBy(matcher);}catch(error){return[];}};return(0,_objectSpread2.default)({},makeAliases(queryNames.getBy,getBy),makeAliases(queryNames.getAllBy,getAllBy),makeAliases(queryNames.queryBy,queryBy),makeAliases(queryNames.queryAllBy,queryAllBy));};};var _default=makeQuery;exports.default=_default;"]}