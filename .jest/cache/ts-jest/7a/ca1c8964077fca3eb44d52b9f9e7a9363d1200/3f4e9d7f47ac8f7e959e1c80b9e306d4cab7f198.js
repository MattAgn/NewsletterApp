"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const effects_1 = require("redux-saga/effects");
const signup_1 = require("../../api/signup");
const types_1 = require("./types");
const actions_1 = require("../toaster/actions");
const wording_1 = require("../../../utils/wording");
function* subscribeNewsletterSaga(action) {
    try {
        const { email } = action.payload;
        yield effects_1.call(signup_1.SignUpApi.subscribeNewsletter, { email });
        yield effects_1.put(actions_1.ToasterActions.showSuccessMessage(wording_1.wording.subscriptionSuccessful));
    }
    catch (err) {
        yield effects_1.put(actions_1.ToasterActions.showErrorMessage(wording_1.wording.basicError));
    }
}
function* subscribeNewsletterWatcher() {
    yield effects_1.takeEvery(types_1.SignUpActionTypes.SUBSCRIBE_NEWSLETTER, subscribeNewsletterSaga);
}
exports.subscribeNewsletterWatcher = subscribeNewsletterWatcher;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hdHRoaWV1L3Byb2plY3RzL2xlYXJuaW5nL05ld3NsZXR0ZXJBcHAvc3JjL2NvbXBsZXgtdmVyc2lvbi9tb2R1bGVzL3NpZ251cC9zYWdhcy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLGdEQUEwRDtBQUcxRCw2Q0FBNkM7QUFHN0MsbUNBQTRDO0FBQzVDLGdEQUFvRDtBQUNwRCxvREFBaUQ7QUFFakQsUUFBUSxDQUFDLENBQUMsdUJBQXVCLENBQy9CLE1BQXVGO0lBRXZGLElBQUk7UUFDRixNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQztRQUNqQyxNQUFNLGNBQUksQ0FBQyxrQkFBUyxDQUFDLG1CQUFtQixFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUNyRCxNQUFNLGFBQUcsQ0FBQyx3QkFBYyxDQUFDLGtCQUFrQixDQUFDLGlCQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDO0tBQzlFO0lBQUMsT0FBTyxHQUFHLEVBQUU7UUFDWixNQUFNLGFBQUcsQ0FBQyx3QkFBYyxDQUFDLGdCQUFnQixDQUFDLGlCQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztLQUNoRTtBQUNILENBQUM7QUFFRCxRQUFlLENBQUMsQ0FBQywwQkFBMEI7SUFDekMsTUFBTSxtQkFBUyxDQUFDLHlCQUFpQixDQUFDLG9CQUFvQixFQUFFLHVCQUF1QixDQUFDLENBQUM7QUFDbkYsQ0FBQztBQUZELGdFQUVDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXR0aGlldS9wcm9qZWN0cy9sZWFybmluZy9OZXdzbGV0dGVyQXBwL3NyYy9jb21wbGV4LXZlcnNpb24vbW9kdWxlcy9zaWdudXAvc2FnYXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2FsbCwgcHV0LCB0YWtlRXZlcnkgfSBmcm9tICdyZWR1eC1zYWdhL2VmZmVjdHMnO1xuaW1wb3J0IHsgQWN0aW9uc09mVHlwZSB9IGZyb20gJ0BtYXJ0aW5faG90ZWxsL3JleC10aWxzJztcblxuaW1wb3J0IHsgU2lnblVwQXBpIH0gZnJvbSAnLi4vLi4vYXBpL3NpZ251cCc7XG5cbmltcG9ydCB7IFRTaWduVXBBY3Rpb25PYmplY3RUeXBlcyB9IGZyb20gJy4vYWN0aW9ucyc7XG5pbXBvcnQgeyBTaWduVXBBY3Rpb25UeXBlcyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgVG9hc3RlckFjdGlvbnMgfSBmcm9tICcuLi90b2FzdGVyL2FjdGlvbnMnO1xuaW1wb3J0IHsgd29yZGluZyB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3dvcmRpbmcnO1xuXG5mdW5jdGlvbiogc3Vic2NyaWJlTmV3c2xldHRlclNhZ2EoXG4gIGFjdGlvbjogQWN0aW9uc09mVHlwZTxUU2lnblVwQWN0aW9uT2JqZWN0VHlwZXMsIFNpZ25VcEFjdGlvblR5cGVzLlNVQlNDUklCRV9ORVdTTEVUVEVSPlxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBlbWFpbCB9ID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgeWllbGQgY2FsbChTaWduVXBBcGkuc3Vic2NyaWJlTmV3c2xldHRlciwgeyBlbWFpbCB9KTtcbiAgICB5aWVsZCBwdXQoVG9hc3RlckFjdGlvbnMuc2hvd1N1Y2Nlc3NNZXNzYWdlKHdvcmRpbmcuc3Vic2NyaXB0aW9uU3VjY2Vzc2Z1bCkpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB5aWVsZCBwdXQoVG9hc3RlckFjdGlvbnMuc2hvd0Vycm9yTWVzc2FnZSh3b3JkaW5nLmJhc2ljRXJyb3IpKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24qIHN1YnNjcmliZU5ld3NsZXR0ZXJXYXRjaGVyKCkge1xuICB5aWVsZCB0YWtlRXZlcnkoU2lnblVwQWN0aW9uVHlwZXMuU1VCU0NSSUJFX05FV1NMRVRURVIsIHN1YnNjcmliZU5ld3NsZXR0ZXJTYWdhKTtcbn1cbiJdLCJ2ZXJzaW9uIjozfQ==